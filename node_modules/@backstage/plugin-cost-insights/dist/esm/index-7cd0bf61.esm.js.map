{"version":3,"file":"index-7cd0bf61.esm.js","sources":["../../src/plugin.ts","../../src/types/Duration.ts","../../src/types/Alert.ts","../../src/types/ChangeStatistic.ts","../../src/types/Currency.ts","../../src/types/Icon.ts","../../src/utils/navigation.tsx","../../src/utils/config.ts","../../src/utils/assert.ts","../../src/utils/currency.ts","../../src/hooks/useConfig.tsx","../../src/hooks/useCurrency.tsx","../../src/utils/filters.ts","../../src/utils/history.ts","../../src/api/CostInsightsApi.ts","../../src/utils/duration.ts","../../src/utils/loading.ts","../../src/utils/styles.ts","../../src/hooks/useLoading.tsx","../../src/hooks/useGroups.tsx","../../src/hooks/useFilters.tsx","../../src/hooks/useScroll.tsx","../../src/hooks/useLastCompleteBillingDate.tsx","../../src/forms/AlertAcceptForm.tsx","../../src/forms/AlertSnoozeForm.tsx","../../src/forms/AlertDismissForm.tsx","../../src/utils/alerts.tsx","../../src/components/CostInsightsPage/CostInsightsThemeProvider.tsx","../../src/components/AlertInstructionsLayout/AlertInstructionsLayout.tsx","../../src/components/BarChart/BarChartLabel.tsx","../../src/components/BarChart/BarChartTick.tsx","../../src/components/BarChart/BarChartStepperButton.tsx","../../src/components/BarChart/BarChartSteps.tsx","../../src/components/BarChart/BarChartStepper.tsx","../../src/components/BarChart/BarChartTooltip.tsx","../../src/components/BarChart/BarChartTooltipItem.tsx","../../src/utils/formatters.ts","../../src/utils/sort.ts","../../src/utils/graphs.ts","../../src/components/BarChart/BarChart.tsx","../../src/components/LegendItem/LegendItem.tsx","../../src/components/BarChart/BarChartLegend.tsx","../../src/utils/change.ts","../../src/utils/grammar.ts","../../src/components/CostGrowth/CostGrowth.tsx","../../src/components/CostGrowth/CostGrowthIndicator.tsx","../../src/components/CostInsightsTabs/selector.ts","../../src/components/CostInsightsTabs/CostInsightsTabs.tsx","../../src/components/CostInsightsLayout/CostInsightsLayout.tsx","../../src/components/CostInsightsNavigation/CostInsightsNavigation.tsx","../../src/components/ProductInsightsCard/ProductEntityTable.tsx","../../src/components/ProductInsightsCard/ProductEntityDialog.tsx","../../src/components/ProductInsightsCard/ProductInsightsChart.tsx","../../src/components/ProjectGrowthAlertCard/ProjectGrowthAlertChart.tsx","../../src/components/ProjectGrowthAlertCard/ProjectGrowthAlertCard.tsx","../../src/alerts/ProjectGrowthAlert.tsx","../../src/components/UnlabeledDataflowAlertCard/UnlabeledDataflowAlertCard.tsx","../../src/alerts/UnlabeledDataflowAlert.tsx","../../src/components/ProjectGrowthInstructionsPage/ProjectGrowthInstructionsPage.tsx","../../src/example/components/KubernetesMigrationAlertCard/KubernetesMigrationBarChartLegend.tsx","../../src/example/components/KubernetesMigrationAlertCard/KubernetesMigrationBarChart.tsx","../../src/example/components/KubernetesMigrationAlertCard/KubernetesMigrationAlertCard.tsx","../../src/example/forms/KubernetesMigrationDismissForm.tsx","../../src/example/alerts/KubernetesMigrationAlert.tsx","../../src/testUtils/products.ts","../../src/testUtils/filters.ts","../../src/testUtils/loading.ts","../../src/testUtils/mockData.ts","../../../../node_modules/react-is/cjs/react-is.production.min.js","../../../../node_modules/react-is/cjs/react-is.development.js","../../../../node_modules/react-is/index.js","../../../../node_modules/object-assign/index.js","../../../../node_modules/prop-types/lib/ReactPropTypesSecret.js","../../../../node_modules/prop-types/checkPropTypes.js","../../../../node_modules/prop-types/factoryWithTypeCheckers.js","../../../../node_modules/prop-types/factoryWithThrowingShims.js","../../../../node_modules/prop-types/index.js","../../../../packages/core-app-api/src/lib/globalObject.ts","../../../../packages/core-app-api/src/apis/system/ApiProvider.tsx","../../../../packages/core-app-api/src/apis/system/ApiFactoryRegistry.ts","../../../../packages/core-app-api/src/lib/loginPopup.ts","../../../../packages/core-app-api/src/lib/AuthConnector/DefaultAuthConnector.ts","../../../../packages/core-app-api/src/lib/AuthConnector/DirectAuthConnector.ts","../../../../packages/core-app-api/src/lib/AuthSessionManager/common.ts","../../../../node_modules/zen-observable/lib/Observable.js","../../../../node_modules/zen-observable/index.js","../../../../packages/core-app-api/src/lib/subjects.ts","../../../../packages/core-app-api/src/lib/AuthSessionManager/SessionStateTracker.ts","../../../../packages/core-app-api/src/lib/AuthSessionManager/RefreshingAuthSessionManager.ts","../../../../packages/core-app-api/src/lib/AuthSessionManager/StaticAuthSessionManager.ts","../../../../packages/core-app-api/src/lib/AuthSessionManager/AuthSessionStore.ts","../../../../packages/core-app-api/src/apis/implementations/auth/github/GithubAuth.ts","../../../../packages/core-app-api/src/apis/implementations/auth/oauth2/OAuth2.ts","../../../../packages/core-app-api/src/apis/implementations/auth/gitlab/GitlabAuth.ts","../../../../packages/core-app-api/src/apis/implementations/auth/google/GoogleAuth.ts","../../../../packages/core-app-api/src/apis/implementations/auth/okta/OktaAuth.ts","../../../../packages/core-app-api/src/apis/implementations/auth/saml/SamlAuth.ts","../../../../packages/core-app-api/src/apis/implementations/auth/auth0/Auth0Auth.ts","../../../../packages/core-app-api/src/apis/implementations/auth/microsoft/MicrosoftAuth.ts","../../../../packages/core-app-api/src/apis/implementations/auth/onelogin/OneLoginAuth.ts","../../../../packages/core-app-api/src/apis/implementations/AlertApi/AlertApiForwarder.ts","../../../../packages/core-app-api/src/apis/implementations/DiscoveryApi/UrlPatternDiscovery.ts","../../../../packages/core-app-api/src/apis/implementations/ErrorApi/ErrorAlerter.ts","../../../../packages/core-app-api/src/apis/implementations/ErrorApi/ErrorApiForwarder.ts","../../../../packages/core-app-api/src/apis/implementations/ErrorApi/UnhandledErrorForwarder.ts","../../../../packages/core-app-api/src/apis/implementations/OAuthRequestApi/OAuthPendingRequests.ts","../../../../packages/core-app-api/src/apis/implementations/OAuthRequestApi/OAuthRequestManager.ts","../../../../packages/core-app-api/src/apis/implementations/StorageApi/WebStorage.ts","../../../../packages/core-app-api/src/extensions/componentData.tsx","../../../../packages/core-app-api/src/routing/FeatureFlagged.tsx","../../../../packages/core-app-api/src/routing/types.ts","../../../../packages/core-app-api/src/routing/RoutingProvider.tsx","../../../../packages/core-app-api/src/app/AppContext.tsx","../../../../packages/core-app-api/src/app/defaultApis.ts","../../src/testUtils/providers.tsx","../../src/testUtils/testUtils.ts","../../src/example/client.ts"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  createPlugin,\n  createRouteRef,\n  createRoutableExtension,\n} from '@backstage/core-plugin-api';\n\nexport const rootRouteRef = createRouteRef({\n  path: '/cost-insights',\n  title: 'Cost Insights',\n});\n\nexport const projectGrowthAlertRef = createRouteRef({\n  path: '/cost-insights/investigating-growth',\n  title: 'Investigating Growth',\n});\n\nexport const unlabeledDataflowAlertRef = createRouteRef({\n  path: '/cost-insights/labeling-jobs',\n  title: 'Labeling Dataflow Jobs',\n});\n\nexport const costInsightsPlugin = createPlugin({\n  id: 'cost-insights',\n  register({ featureFlags }) {\n    featureFlags.register('cost-insights-currencies');\n  },\n  routes: {\n    root: rootRouteRef,\n    growthAlerts: projectGrowthAlertRef,\n    unlabeledDataflowAlerts: unlabeledDataflowAlertRef,\n  },\n});\n\nexport const CostInsightsPage = costInsightsPlugin.provide(\n  createRoutableExtension({\n    component: () =>\n      import('./components/CostInsightsPage').then(m => m.CostInsightsPage),\n    mountPoint: rootRouteRef,\n  }),\n);\n\nexport const CostInsightsProjectGrowthInstructionsPage =\n  costInsightsPlugin.provide(\n    createRoutableExtension({\n      component: () =>\n        import('./components/ProjectGrowthInstructionsPage').then(\n          m => m.ProjectGrowthInstructionsPage,\n        ),\n      mountPoint: projectGrowthAlertRef,\n    }),\n  );\n\nexport const CostInsightsLabelDataflowInstructionsPage =\n  costInsightsPlugin.provide(\n    createRoutableExtension({\n      component: () =>\n        import('./components/LabelDataflowInstructionsPage').then(\n          m => m.LabelDataflowInstructionsPage,\n        ),\n      mountPoint: unlabeledDataflowAlertRef,\n    }),\n  );\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Time periods for cost comparison; slight abuse of ISO 8601 periods. We take P3M to mean\n * 'last completed quarter', and P30D/P90D to be '[month|quarter] relative to today'. So if\n * it's September 15, P3M represents costs for Q2 and P30D represents August 16 -\n * September 15.\n */\nexport enum Duration {\n  P7D = 'P7D',\n  P30D = 'P30D',\n  P90D = 'P90D',\n  P3M = 'P3M',\n}\n\nexport const DEFAULT_DATE_FORMAT = 'yyyy-LL-dd';\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ForwardRefExoticComponent, RefAttributes } from 'react';\nimport { ChangeStatistic } from './ChangeStatistic';\nimport { Duration } from './Duration';\nimport { Maybe } from './Maybe';\n\n/**\n * Generic alert type with required fields for display. The `element` field will be rendered in\n * the Cost Insights \"Action Items\" section. This should use data fetched in the CostInsightsApi\n * implementation to render an InfoCard or other visualization.\n *\n * The alert type exposes hooks which can be used to enable and access various events,\n * such as when a user dismisses or snoozes an alert. Default forms and buttons\n * will be rendered if a hook is defined.\n *\n * Each default form can be overridden with a custom component. It must be implemented using\n * React.forwardRef. See https://reactjs.org/docs/forwarding-refs\n *\n * Errors thrown within hooks will generate a snackbar error notification.\n */\n\nexport type Alert = {\n  title: string | JSX.Element;\n  subtitle: string | JSX.Element;\n  element?: JSX.Element;\n  status?: AlertStatus;\n  url?: string;\n  buttonText?: string; // Default: View Instructions\n  SnoozeForm?: Maybe<AlertForm>;\n  AcceptForm?: Maybe<AlertForm>;\n  DismissForm?: Maybe<AlertForm>;\n  onSnoozed?(options: AlertOptions): Promise<Alert[]>;\n  onAccepted?(options: AlertOptions): Promise<Alert[]>;\n  onDismissed?(options: AlertOptions): Promise<Alert[]>;\n};\n\nexport type AlertForm<\n  A extends Alert = any,\n  Data = any,\n> = ForwardRefExoticComponent<\n  AlertFormProps<A, Data> & RefAttributes<HTMLFormElement>\n>;\n\nexport interface AlertOptions<T = any> {\n  data: T;\n  group: string;\n}\n\n/**\n * Default snooze form intervals are expressed using an ISO 8601 repeating interval string.\n * For example, R1/P7D/2020-09-02 for 1 week or R1/P30D/2020-09-02 for 1 month.\n *\n * For example, if a user dismisses an alert on Monday January 01 for 1 week,\n * it can be re-served on Monday, January 08. 7 calendar days from January 02,\n * inclusive of the last day.\n *\n * https://en.wikipedia.org/wiki/ISO_8601#Repeating_intervals\n */\nexport interface AlertSnoozeFormData {\n  intervals: string;\n}\n\nexport interface AlertDismissFormData {\n  other: Maybe<string>;\n  reason: AlertDismissReason;\n  feedback: Maybe<string>;\n}\n\n// TODO: Convert enum to literal\nexport enum AlertStatus {\n  Snoozed = 'snoozed',\n  Accepted = 'accepted',\n  Dismissed = 'dismissed',\n}\n\nexport type AlertFormProps<A extends Alert, FormData = {}> = {\n  alert: A;\n  onSubmit: (data: FormData) => void;\n  disableSubmit: (isDisabled: boolean) => void;\n};\n\nexport interface AlertDismissOption {\n  label: string;\n  reason: string;\n}\n\nexport enum AlertDismissReason {\n  Other = 'other',\n  Resolved = 'resolved',\n  Expected = 'expected',\n  Seasonal = 'seasonal',\n  Migration = 'migration',\n  NotApplicable = 'not-applicable',\n}\n\nexport const AlertDismissOptions: AlertDismissOption[] = [\n  {\n    reason: AlertDismissReason.Resolved,\n    label: 'This action item is now resolved.',\n  },\n  {\n    reason: AlertDismissReason.Seasonal,\n    label: 'This is an expected increase at this time of year.',\n  },\n  {\n    reason: AlertDismissReason.Migration,\n    label: 'This increase is from a migration in process.',\n  },\n  {\n    reason: AlertDismissReason.Expected,\n    label: 'This is an expected increase due to our team’s priorities.',\n  },\n  {\n    reason: AlertDismissReason.NotApplicable,\n    label: 'This action item doesn’t make sense for my team.',\n  },\n  {\n    reason: AlertDismissReason.Other,\n    label: 'Other (please specify)',\n  },\n];\n\nexport type AlertSnoozeOption = {\n  label: string;\n  duration: Duration;\n};\n\nexport const AlertSnoozeOptions: AlertSnoozeOption[] = [\n  {\n    duration: Duration.P7D,\n    label: '1 Week',\n  },\n  {\n    duration: Duration.P30D,\n    label: '1 Month',\n  },\n  {\n    duration: Duration.P90D,\n    label: '1 Quarter',\n  },\n];\n\nexport interface AlertCost {\n  id: string;\n  aggregation: [number, number];\n}\n\nexport interface ResourceData {\n  previous: number;\n  current: number;\n  name: Maybe<string>;\n}\n\nexport interface BarChartOptions {\n  previousFill: string;\n  currentFill: string;\n  previousName: string;\n  currentName: string;\n}\n\n/** deprecated use BarChartOptions instead */\nexport interface BarChartData extends BarChartOptions {}\n\nexport enum DataKey {\n  Previous = 'previous',\n  Current = 'current',\n  Name = 'name',\n}\n\nexport interface ProjectGrowthData {\n  project: string;\n  periodStart: string;\n  periodEnd: string;\n  aggregation: [number, number];\n  change: ChangeStatistic;\n  products: Array<AlertCost>;\n}\n\nexport interface UnlabeledDataflowData {\n  periodStart: string;\n  periodEnd: string;\n  projects: Array<UnlabeledDataflowAlertProject>;\n  unlabeledCost: number;\n  labeledCost: number;\n}\n\nexport interface UnlabeledDataflowAlertProject {\n  id: string;\n  unlabeledCost: number;\n  labeledCost: number;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport interface ChangeStatistic {\n  // The ratio of change from one duration to another, expressed as: (newSum - oldSum) / oldSum\n  // If a ratio cannot be calculated - such as when a new or old sum is zero,\n  // the ratio can be omitted and where applicable, ∞ or -∞ will display based on amount.\n  ratio?: number;\n  // The actual USD change between time periods (can be negative if costs decreased)\n  amount: number;\n}\n\nexport const EngineerThreshold = 0.5;\n\nexport enum ChangeThreshold {\n  upper = 0.05,\n  lower = -0.05,\n}\n\nexport enum GrowthType {\n  Negligible,\n  Savings,\n  Excess,\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport interface Currency {\n  kind: string | null;\n  label: string;\n  unit: string;\n  prefix?: string;\n  rate?: number;\n}\n\nexport enum CurrencyType {\n  USD = 'USD',\n  CarbonOffsetTons = 'CARBON_OFFSET_TONS',\n  Beers = 'BEERS',\n  IceCream = 'PINTS_OF_ICE_CREAM',\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport type Icon = {\n  kind: string;\n  component: JSX.Element;\n};\n\nexport enum IconType {\n  Compute = 'compute',\n  Data = 'data',\n  Database = 'database',\n  Storage = 'storage',\n  Search = 'search',\n  ML = 'ml',\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport MoneyIcon from '@material-ui/icons/MonetizationOn';\nimport ActionIcon from '@material-ui/icons/Whatshot';\nimport Settings from '@material-ui/icons/Settings';\nimport AccountTree from '@material-ui/icons/AccountTree';\nimport Storage from '@material-ui/icons/Storage';\nimport Search from '@material-ui/icons/Search';\nimport CloudQueue from '@material-ui/icons/CloudQueue';\nimport School from '@material-ui/icons/School';\nimport ViewHeadline from '@material-ui/icons/ViewHeadline';\nimport { IconType } from '../types';\n\nexport enum DefaultNavigation {\n  CostOverviewCard = 'cost-overview-card',\n  AlertInsightsHeader = 'alert-insights-header',\n}\n\nexport type NavigationItem = {\n  navigation: string;\n  icon: JSX.Element;\n  title: string;\n};\n\nexport const getDefaultNavigationItems = (alerts: number): NavigationItem[] => {\n  const items = [\n    {\n      navigation: DefaultNavigation.CostOverviewCard,\n      icon: <MoneyIcon />,\n      title: 'Cost Overview',\n    },\n  ];\n  if (alerts > 0) {\n    items.push({\n      navigation: DefaultNavigation.AlertInsightsHeader,\n      icon: <ActionIcon />,\n      title: 'Action Items',\n    });\n  }\n  return items;\n};\n\nexport function getIcon(icon?: string): JSX.Element {\n  switch (icon) {\n    case IconType.Compute:\n      return <Settings />;\n    case IconType.Data:\n      return <AccountTree />;\n    case IconType.Database:\n      return <ViewHeadline />;\n    case IconType.Storage:\n      return <Storage />;\n    case IconType.Search:\n      return <Search />;\n    case IconType.ML:\n      return <School />;\n    default:\n      return <CloudQueue />;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Metric } from '../types';\n\nexport function validateMetrics(metrics: Metric[]) {\n  const defaults = metrics.filter(metric => metric.default);\n  if (defaults.length > 1) {\n    throw new Error(\n      `Only one default metric can be set at a time. Found ${defaults.length}`,\n    );\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function notEmpty<TValue>(\n  value: TValue | null | undefined,\n): value is TValue {\n  return !isNull(value) && !isUndefined(value);\n}\n\nexport function isUndefined(value: any): value is undefined {\n  return value === undefined;\n}\n\nexport function isNull(value: any): boolean {\n  return value === null;\n}\n\n// Utility for exhaustiveness checking in switch statements\nexport function assertNever(x: never): never {\n  throw new Error(`Exhaustiveness check failed: ${x}`);\n}\n\nexport function assertAlways<T>(argument: T | undefined): T {\n  if (argument === undefined) {\n    throw new TypeError(\n      'Expected to always find a value but received undefined',\n    );\n  }\n  return argument;\n}\n\n// Utility for working with static lists; asserts a value will always be found or\n// throws an error\nexport function findAlways<T>(\n  collection: T[],\n  callback: (el: T) => boolean,\n): T {\n  return assertAlways(collection.find(callback));\n}\n\nexport function findAnyKey<T>(\n  record: Record<string, T> | undefined,\n): string | undefined {\n  return Object.keys(record ?? {}).find(_ => true);\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Currency, CurrencyType, Duration } from '../types';\nimport { assertNever } from '../utils/assert';\n\nexport const rateOf = (cost: number, duration: Duration) => {\n  switch (duration) {\n    case Duration.P30D:\n      return cost / 12;\n    case Duration.P7D:\n    case Duration.P90D:\n    case Duration.P3M:\n      return cost / 4;\n    default:\n      return assertNever(duration);\n  }\n};\n\nexport const defaultCurrencies: Currency[] = [\n  {\n    kind: null,\n    label: 'Engineers 🛠',\n    unit: 'engineer',\n  },\n  {\n    kind: CurrencyType.USD,\n    label: 'US Dollars 💵',\n    unit: 'dollar',\n    prefix: '$',\n    rate: 1,\n  },\n  {\n    kind: CurrencyType.CarbonOffsetTons,\n    label: 'Carbon Offset Tons ♻️⚖️s',\n    unit: 'carbon offset ton',\n    rate: 3.5,\n  },\n  {\n    kind: CurrencyType.Beers,\n    label: 'Beers 🍺',\n    unit: 'beer',\n    rate: 4.5,\n  },\n  {\n    kind: CurrencyType.IceCream,\n    label: 'Pints of Ice Cream 🍦',\n    unit: 'ice cream pint',\n    rate: 5.5,\n  },\n];\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  createContext,\n  PropsWithChildren,\n  useContext,\n  useEffect,\n  useState,\n} from 'react';\nimport { Config as BackstageConfig } from '@backstage/config';\nimport { Currency, Icon, Metric, Product } from '../types';\nimport { getIcon } from '../utils/navigation';\nimport { validateMetrics } from '../utils/config';\nimport { defaultCurrencies } from '../utils/currency';\nimport { configApiRef, useApi } from '@backstage/core-plugin-api';\n\n/*\n * Config schema 2020-10-15\n *\n * costInsights:\n *   engineerCost: 200000\n *   products:\n *     productA:\n *       name: Product A\n *       icon: storage\n *     productB:\n *       name: Product B\n *       icon: data\n *   metrics:\n *     metricA:\n *       name: Metric A\n *       default: true\n *     metricB:\n *       name: Metric B\n */\n\nexport type ConfigContextProps = {\n  metrics: Metric[];\n  products: Product[];\n  icons: Icon[];\n  engineerCost: number;\n  currencies: Currency[];\n};\n\nexport const ConfigContext = createContext<ConfigContextProps | undefined>(\n  undefined,\n);\n\nconst defaultState: ConfigContextProps = {\n  metrics: [],\n  products: [],\n  icons: [],\n  engineerCost: 0,\n  currencies: defaultCurrencies,\n};\n\nexport const ConfigProvider = ({ children }: PropsWithChildren<{}>) => {\n  const c: BackstageConfig = useApi(configApiRef);\n  const [config, setConfig] = useState(defaultState);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    function getProducts(): Product[] {\n      const products = c.getConfig('costInsights.products');\n      return products.keys().map(key => ({\n        kind: key,\n        name: products.getString(`${key}.name`),\n        aggregation: [0, 0],\n      }));\n    }\n\n    function getMetrics(): Metric[] {\n      const metrics = c.getOptionalConfig('costInsights.metrics');\n      if (metrics) {\n        return metrics.keys().map(key => ({\n          kind: key,\n          name: metrics.getString(`${key}.name`),\n          default: metrics.getOptionalBoolean(`${key}.default`) ?? false,\n        }));\n      }\n\n      return [];\n    }\n\n    function getIcons(): Icon[] {\n      const products = c.getConfig('costInsights.products');\n      const keys = products.keys();\n\n      return keys.map(k => ({\n        kind: k,\n        component: getIcon(products.getOptionalString(`${k}.icon`)),\n      }));\n    }\n\n    function getEngineerCost(): number {\n      return c.getNumber('costInsights.engineerCost');\n    }\n\n    function getConfig() {\n      const products = getProducts();\n      const metrics = getMetrics();\n      const engineerCost = getEngineerCost();\n      const icons = getIcons();\n\n      validateMetrics(metrics);\n\n      setConfig(prevState => ({\n        ...prevState,\n        metrics,\n        products,\n        engineerCost,\n        icons,\n      }));\n\n      setLoading(false);\n    }\n\n    getConfig();\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  if (loading) {\n    return null;\n  }\n\n  return (\n    <ConfigContext.Provider value={config}>{children}</ConfigContext.Provider>\n  );\n};\n\nexport function useConfig(): ConfigContextProps {\n  const config = useContext(ConfigContext);\n  return config ? config : assertNever();\n}\n\nfunction assertNever(): never {\n  throw new Error('Cannot use useConfig outside of ConfigProvider');\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, {\n  Dispatch,\n  SetStateAction,\n  useState,\n  useContext,\n  PropsWithChildren,\n} from 'react';\nimport { Currency } from '../types';\nimport { findAlways } from '../utils/assert';\nimport { defaultCurrencies } from '../utils/currency';\n\nexport type CurrencyContextProps = {\n  currency: Currency;\n  setCurrency: Dispatch<SetStateAction<Currency>>;\n};\n\nexport const CurrencyContext = React.createContext<\n  CurrencyContextProps | undefined\n>(undefined);\n\nexport const CurrencyProvider = ({ children }: PropsWithChildren<{}>) => {\n  const engineers = findAlways(defaultCurrencies, c => c.kind === null);\n  const [currency, setCurrency] = useState<Currency>(engineers);\n  return (\n    <CurrencyContext.Provider value={{ currency, setCurrency }}>\n      {children}\n    </CurrencyContext.Provider>\n  );\n};\n\nexport function useCurrency(): [Currency, Dispatch<SetStateAction<Currency>>] {\n  const context = useContext(CurrencyContext);\n\n  if (!context) {\n    assertNever();\n  }\n\n  return [context.currency, context.setCurrency];\n}\n\nfunction assertNever(): never {\n  throw Error('Cannot use useCurrency outside of CurrencyProvider');\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Duration, Group, PageFilters } from '../types';\n\nexport function getDefaultPageFilters(groups: Group[]): PageFilters {\n  return {\n    group: groups.length ? groups[0].id : null,\n    project: null,\n    duration: Duration.P90D,\n    metric: null,\n  };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport qs from 'qs';\nimport * as yup from 'yup';\nimport { Duration, Group, PageFilters } from '../types';\nimport { getDefaultPageFilters } from '../utils/filters';\nimport { ConfigContextProps } from '../hooks/useConfig';\n\nconst schema = yup\n  .object()\n  .shape({\n    group: yup.string().nullable(),\n    project: yup.string().nullable(),\n  })\n  .required();\n\nexport const stringify = (queryParams: Partial<PageFilters>) =>\n  qs.stringify(queryParams, { strictNullHandling: true });\n\nexport const parse = (queryString: string): Partial<PageFilters> =>\n  qs.parse(queryString, { ignoreQueryPrefix: true, strictNullHandling: true });\n\nexport const validate = (queryString: string): Promise<PageFilters> => {\n  return schema.validate(parse(queryString), {\n    stripUnknown: true,\n    strict: true,\n  }) as Promise<PageFilters>;\n};\n\nexport const getInitialPageState = (\n  groups: Group[],\n  queryParams: Partial<PageFilters> = {},\n) => {\n  return {\n    ...getDefaultPageFilters(groups),\n    ...(queryParams.project ? { project: queryParams.project } : {}),\n    ...(queryParams.group ? { group: queryParams.group } : {}),\n  };\n};\n\nexport const getInitialProductState = (config: ConfigContextProps) =>\n  config.products.map(product => ({\n    productType: product.kind,\n    duration: Duration.P30D,\n  }));\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Alert,\n  Cost,\n  Entity,\n  Group,\n  Project,\n  Maybe,\n  MetricData,\n} from '../types';\nimport { createApiRef } from '@backstage/core-plugin-api';\n\nexport type ProductInsightsOptions = {\n  /**\n   * The product from the cost-insights configuration in app-config.yaml\n   */\n  product: string;\n\n  /**\n   * The group id from getUserGroups or query parameters\n   */\n  group: string;\n\n  /**\n   * An ISO 8601 repeating interval string, such as R2/P3M/2020-09-01\n   */\n  intervals: string;\n\n  /**\n   * (optional) The project id from getGroupProjects or query parameters\n   */\n  project: Maybe<string>;\n};\n\nexport type CostInsightsApi = {\n  /**\n   * Get the most current date for which billing data is complete, in YYYY-MM-DD format. This helps\n   * define the intervals used in other API methods to avoid showing incomplete cost. The costs for\n   * today, for example, will not be complete. This ideally comes from the cloud provider.\n   */\n  getLastCompleteBillingDate(): Promise<string>;\n\n  /**\n   * Get a list of groups the given user belongs to. These may be LDAP groups or similar\n   * organizational groups. Cost Insights is designed to show costs based on group membership;\n   * if a user has multiple groups, they are able to switch between groups to see costs for each.\n   *\n   * This method should be removed once the Backstage identity plugin provides the same concept.\n   *\n   * @param userId The login id for the current user\n   */\n  getUserGroups(userId: string): Promise<Group[]>;\n\n  /**\n   * Get a list of cloud billing entities that belong to this group (projects in GCP, AWS has a\n   * similar concept in billing accounts). These act as filters for the displayed costs, users can\n   * choose whether they see all costs for a group, or those from a particular owned project.\n   *\n   * @param group The group id from getUserGroups or query parameters\n   */\n  getGroupProjects(group: string): Promise<Project[]>;\n\n  /**\n   * Get daily cost aggregations for a given group and interval time frame.\n   *\n   * The return type includes an array of daily cost aggregations as well as statistics about the\n   * change in cost over the intervals. Calculating these statistics requires us to bucket costs\n   * into two or more time periods, hence a repeating interval format rather than just a start and\n   * end date.\n   *\n   * The rate of change in this comparison allows teams to reason about their cost growth (or\n   * reduction) and compare it to metrics important to the business.\n   *\n   * @param group The group id from getUserGroups or query parameters\n   * @param intervals An ISO 8601 repeating interval string, such as R2/P30D/2020-09-01\n   *   https://en.wikipedia.org/wiki/ISO_8601#Repeating_intervals\n   */\n  getGroupDailyCost(group: string, intervals: string): Promise<Cost>;\n\n  /**\n   * Get daily cost aggregations for a given billing entity (project in GCP, AWS has a similar\n   * concept in billing accounts) and interval time frame.\n   *\n   * The return type includes an array of daily cost aggregations as well as statistics about the\n   * change in cost over the intervals. Calculating these statistics requires us to bucket costs\n   * into two or more time periods, hence a repeating interval format rather than just a start and\n   * end date.\n   *\n   * The rate of change in this comparison allows teams to reason about the project's cost growth\n   * (or reduction) and compare it to metrics important to the business.\n   *\n   * @param project The project id from getGroupProjects or query parameters\n   * @param intervals An ISO 8601 repeating interval string, such as R2/P30D/2020-09-01\n   *   https://en.wikipedia.org/wiki/ISO_8601#Repeating_intervals\n   */\n  getProjectDailyCost(project: string, intervals: string): Promise<Cost>;\n\n  /**\n   * Get aggregations for a particular metric and interval time frame. Teams\n   * can see metrics important to their business in comparison to the growth\n   * (or reduction) of a project or group's daily costs.\n   *\n   * @param metric A metric from the cost-insights configuration in app-config.yaml.\n   * @param intervals An ISO 8601 repeating interval string, such as R2/P30D/2020-09-01\n   *   https://en.wikipedia.org/wiki/ISO_8601#Repeating_intervals\n   */\n  getDailyMetricData(metric: string, intervals: string): Promise<MetricData>;\n\n  /**\n   * Get cost aggregations for a particular cloud product and interval time frame. This includes\n   * total cost for the product, as well as a breakdown of particular entities that incurred cost\n   * in this product. The type of entity depends on the product - it may be deployed services,\n   * storage buckets, managed database instances, etc.\n   *\n   * If project is supplied, this should only return product costs for the given billing entity\n   * (project in GCP).\n   *\n   * The time period is supplied as a Duration rather than intervals, since this is always expected\n   * to return data for two bucketed time period (e.g. month vs month, or quarter vs quarter).\n   *\n   * @param options Options to use when fetching insights for a particular cloud product and\n   *                interval time frame.\n   */\n  getProductInsights(options: ProductInsightsOptions): Promise<Entity>;\n\n  /**\n   * Get current cost alerts for a given group. These show up as Action Items for the group on the\n   * Cost Insights page. Alerts may include cost-saving recommendations, such as infrastructure\n   * migrations, or cost-related warnings, such as an unexpected billing anomaly.\n   */\n  getAlerts(group: string): Promise<Alert[]>;\n};\n\nexport const costInsightsApiRef = createApiRef<CostInsightsApi>({\n  id: 'plugin.costinsights.service',\n  description: 'Provides cost data and alerts for the cost-insights plugin',\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DateTime, Duration as LuxonDuration } from 'luxon';\nimport { Duration, DEFAULT_DATE_FORMAT } from '../types';\nimport { assertNever } from './assert';\n\nexport const DEFAULT_DURATION = Duration.P30D;\n\n/**\n * Derive the start date of a given period, assuming two repeating intervals.\n *\n * @param duration see comment on Duration enum\n * @param inclusiveEndDate from CostInsightsApi.getLastCompleteBillingDate\n */\nexport function inclusiveStartDateOf(\n  duration: Duration,\n  inclusiveEndDate: string,\n): string {\n  switch (duration) {\n    case Duration.P7D:\n    case Duration.P30D:\n    case Duration.P90D:\n      return DateTime.fromISO(inclusiveEndDate)\n        .minus(\n          LuxonDuration.fromISO(duration).plus(LuxonDuration.fromISO(duration)),\n        )\n        .toFormat(DEFAULT_DATE_FORMAT);\n    case Duration.P3M:\n      return DateTime.fromISO(inclusiveEndDate)\n        .startOf('quarter')\n        .minus(\n          LuxonDuration.fromISO(duration).plus(LuxonDuration.fromISO(duration)),\n        )\n        .toFormat(DEFAULT_DATE_FORMAT);\n    default:\n      return assertNever(duration);\n  }\n}\n\nexport function exclusiveEndDateOf(\n  duration: Duration,\n  inclusiveEndDate: string,\n): string {\n  switch (duration) {\n    case Duration.P7D:\n    case Duration.P30D:\n    case Duration.P90D:\n      return DateTime.fromISO(inclusiveEndDate)\n        .plus({ days: 1 })\n        .toFormat(DEFAULT_DATE_FORMAT);\n    case Duration.P3M:\n      return DateTime.fromISO(quarterEndDate(inclusiveEndDate))\n        .plus({ days: 1 })\n        .toFormat(DEFAULT_DATE_FORMAT);\n    default:\n      return assertNever(duration);\n  }\n}\n\nexport function inclusiveEndDateOf(\n  duration: Duration,\n  inclusiveEndDate: string,\n): string {\n  return DateTime.fromISO(exclusiveEndDateOf(duration, inclusiveEndDate))\n    .minus({ days: 1 })\n    .toFormat(DEFAULT_DATE_FORMAT);\n}\n\n// https://en.wikipedia.org/wiki/ISO_8601#Repeating_intervals\nexport function intervalsOf(\n  duration: Duration,\n  inclusiveEndDate: string,\n  repeating: number = 2,\n) {\n  return `R${repeating}/${duration}/${exclusiveEndDateOf(\n    duration,\n    inclusiveEndDate,\n  )}`;\n}\n\nexport function quarterEndDate(inclusiveEndDate: string): string {\n  const endDate = DateTime.fromISO(inclusiveEndDate);\n  const endOfQuarter = endDate.endOf('quarter').toFormat(DEFAULT_DATE_FORMAT);\n  if (endOfQuarter === inclusiveEndDate) {\n    return endDate.toFormat(DEFAULT_DATE_FORMAT);\n  }\n  return endDate\n    .startOf('quarter')\n    .minus({ days: 1 })\n    .toFormat(DEFAULT_DATE_FORMAT);\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Duration, Entity, Loading, Maybe, Product } from '../types';\nimport { DEFAULT_DURATION } from './duration';\n\nexport type ProductState = {\n  product: Product;\n  entity: Maybe<Entity>;\n  duration: Duration;\n};\n\nexport enum DefaultLoadingAction {\n  UserGroups = 'user-groups',\n  LastCompleteBillingDate = 'billing-date',\n  CostInsightsInitial = 'cost-insights-initial',\n  CostInsightsPage = 'cost-insights-page',\n  CostInsightsProducts = 'cost-insights-products',\n  CostInsightsAlerts = 'cost-insights-alerts',\n}\n\nexport const INITIAL_LOADING_ACTIONS = [\n  DefaultLoadingAction.UserGroups,\n  DefaultLoadingAction.CostInsightsInitial,\n  DefaultLoadingAction.CostInsightsProducts,\n];\n\nexport const getDefaultState = (loadingActions: string[]): Loading => {\n  return loadingActions.reduce(\n    (defaultState, action) => ({ ...defaultState, [action]: true }),\n    {},\n  );\n};\n\nexport const getResetState = (loadingActions: string[]): Loading => {\n  return loadingActions.reduce(\n    (defaultState, action) => ({ ...defaultState, [action]: false }),\n    {},\n  );\n};\n\nexport const getResetStateWithoutInitial = (\n  loadingActions: string[],\n): Loading => {\n  return loadingActions.reduce((defaultState, action) => {\n    const loadingActionState = (INITIAL_LOADING_ACTIONS as string[]).includes(\n      action,\n    )\n      ? false\n      : true;\n    return { ...defaultState, [action]: loadingActionState };\n  }, {});\n};\n\nexport const settledResponseOf = (\n  responses: PromiseSettledResult<Entity | any>[],\n): Array<Maybe<Entity>> => {\n  return responses.map(response =>\n    response.status === 'fulfilled' ? response.value : null,\n  );\n};\n\nexport const initialStatesOf = (\n  products: Product[],\n  responses: Array<Maybe<Entity>>,\n): ProductState[] => {\n  return products.map((product, index) => ({\n    entity: responses[index],\n    product: product,\n    duration: DEFAULT_DURATION,\n  }));\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  createStyles,\n  emphasize,\n  darken,\n  getLuminance,\n  lighten,\n  makeStyles,\n} from '@material-ui/core';\nimport { BackstageTheme } from '@backstage/theme';\nimport { CostInsightsTheme, CostInsightsThemeOptions } from '../types';\n\nexport const costInsightsLightTheme = {\n  palette: {\n    blue: '#509AF5',\n    lightBlue: '#9BF0E1',\n    darkBlue: '#4101F5',\n    magenta: '#DC148C',\n    yellow: '#FFC864',\n    tooltip: {\n      background: '#171717',\n      color: '#DDD',\n    },\n    navigationText: '#b5b5b5',\n    alertBackground: 'rgba(219, 219, 219, 0.13)',\n    dataViz: [\n      '#509BF5',\n      '#4B917D',\n      '#FF6437',\n      '#F573A0',\n      '#F59B23',\n      '#B49BC8',\n      '#C39687',\n      '#A0C3D2',\n      '#FFC864',\n      '#BABABA',\n    ],\n  },\n} as CostInsightsThemeOptions;\n\n// Higher tonal values from light theme (Google recommends 600 -> 200)\n// https://material.io/design/color/the-color-system.html#tools-for-picking-colors\nexport const costInsightsDarkTheme = {\n  palette: {\n    blue: '#77b8f9',\n    lightBlue: '#d8f9f4',\n    darkBlue: '#b595fd',\n    magenta: '#ee93cd',\n    yellow: '#fff2da',\n    tooltip: {\n      background: '#EEE',\n      color: '#424242',\n    },\n    navigationText: '#b5b5b5',\n    alertBackground: 'rgba(32, 32, 32, 0.13)',\n    dataViz: [\n      '#8accff',\n      '#7bc2ac',\n      '#ff9664',\n      '#ffa5d1',\n      '#ffcc57',\n      '#e6ccfb',\n      '#f7c7b7',\n      '#d2f6ff',\n      '#fffb94',\n      '#ececec',\n    ],\n  },\n} as CostInsightsThemeOptions;\n\n// The opposite of MUI's emphasize function - darken darks, lighten lights\nexport function brighten(color: string, coefficient = 0.2) {\n  return getLuminance(color) > 0.5\n    ? lighten(color, coefficient)\n    : darken(color, coefficient);\n}\n\nexport const useCostOverviewStyles = (theme: CostInsightsTheme) => ({\n  axis: {\n    fill: theme.palette.text.primary,\n  },\n  container: {\n    height: 450,\n    width: 1200,\n  },\n  cartesianGrid: {\n    stroke: theme.palette.textVerySubtle,\n  },\n  chart: {\n    margin: {\n      right: 30,\n      top: 16,\n    },\n  },\n  yAxis: {\n    width: 75,\n  },\n});\n\nexport const useOverviewTabsStyles = makeStyles<CostInsightsTheme>(\n  (theme: CostInsightsTheme) => ({\n    default: {\n      padding: theme.spacing(2),\n      fontWeight: theme.typography.fontWeightBold,\n      color: theme.palette.text.secondary,\n      textTransform: 'uppercase',\n    },\n    selected: {\n      color: theme.palette.text.primary,\n    },\n  }),\n);\n\nexport const useBarChartStyles = (theme: CostInsightsTheme) => ({\n  axis: {\n    fill: theme.palette.text.primary,\n  },\n  barChart: {\n    margin: {\n      left: 16,\n      right: 16,\n    },\n  },\n  cartesianGrid: {\n    stroke: theme.palette.textVerySubtle,\n  },\n  cursor: {\n    fill: theme.palette.textVerySubtle,\n    fillOpacity: 0.3,\n  },\n  container: {\n    height: 400,\n    width: 1200,\n  },\n  infoIcon: {\n    marginLeft: 2,\n    fontSize: '1.25em',\n  },\n  xAxis: {\n    height: 50,\n  },\n});\n\nexport const useBarChartLayoutStyles = makeStyles<BackstageTheme>(theme =>\n  createStyles({\n    wrapper: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    legend: {\n      paddingBottom: theme.spacing(2),\n    },\n  }),\n);\n\nexport const useBarChartStepperButtonStyles = makeStyles<CostInsightsTheme>(\n  (theme: CostInsightsTheme) =>\n    createStyles({\n      root: {\n        ...theme.typography.button,\n        boxSizing: 'border-box',\n        transition: theme.transitions.create(\n          ['background-color', 'box-shadow', 'border'],\n          {\n            duration: theme.transitions.duration.short,\n          },\n        ),\n        borderRadius: '50%',\n        padding: 0,\n        width: 40,\n        height: 40,\n        boxShadow: theme.shadows[6],\n        '&:active': {\n          boxShadow: theme.shadows[12],\n        },\n        color: theme.palette.text.primary,\n        backgroundColor: lighten(theme.palette.background.default, 0.1),\n        '&:hover': {\n          backgroundColor: lighten(theme.palette.background.default, 0.2),\n          textDecoration: 'none',\n        },\n      },\n    }),\n);\n\nexport const useBarChartLabelStyles = makeStyles<BackstageTheme>(theme =>\n  createStyles({\n    foreignObject: {\n      textAlign: 'center',\n    },\n    label: {\n      fontWeight: theme.typography.fontWeightBold,\n      display: 'block',\n      textDecoration: 'none',\n      overflow: 'hidden',\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n    },\n    infoIcon: {\n      marginLeft: 2,\n      fontSize: '1.25em',\n    },\n    button: {\n      textTransform: 'none',\n      fontWeight: theme.typography.fontWeightBold,\n      fontSize: theme.typography.fontSize,\n    },\n  }),\n);\n\nexport const useCostInsightsStyles = makeStyles<BackstageTheme>(theme => ({\n  h6Subtle: {\n    ...theme.typography.h6,\n    fontWeight: 'normal',\n    color: theme.palette.textSubtle,\n  },\n}));\n\nexport const useCostInsightsTabsStyles = makeStyles<BackstageTheme>(\n  (theme: BackstageTheme) => ({\n    tabs: {\n      borderBottom: `1px solid ${theme.palette.textVerySubtle}`,\n      backgroundColor: brighten(theme.palette.background.default),\n      padding: theme.spacing(0, 4),\n    },\n    tab: {\n      minHeight: 68,\n      minWidth: 180,\n      padding: theme.spacing(1, 4),\n      '&:hover': {\n        color: 'inherit',\n        backgroundColor: 'inherit',\n      },\n    },\n    indicator: {\n      backgroundColor: theme.palette.navigation.indicator,\n      height: 4,\n    },\n    tabLabel: {\n      display: 'flex',\n      alignItems: 'center',\n    },\n    tabLabelText: {\n      fontSize: theme.typography.fontSize,\n      fontWeight: theme.typography.fontWeightBold,\n    },\n    menuItem: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      minWidth: 180,\n      padding: theme.spacing(2, 2),\n    },\n    menuItemSelected: {\n      backgroundColor: lighten(theme.palette.background.default, 0.3),\n    },\n  }),\n);\n\nexport const useAlertCardActionHeaderStyles = makeStyles<BackstageTheme>(\n  (theme: BackstageTheme) =>\n    createStyles({\n      root: {\n        paddingBottom: theme.spacing(2),\n        borderRadius: 'unset',\n      },\n      title: {\n        fontSize: theme.typography.fontSize,\n        fontWeight: theme.typography.fontWeightBold,\n        lineHeight: 1.5,\n      },\n      action: {\n        margin: 0,\n      },\n    }),\n);\n\nexport const useCostGrowthStyles = makeStyles<BackstageTheme>(\n  (theme: BackstageTheme) =>\n    createStyles({\n      excess: {\n        color: theme.palette.status.error,\n      },\n      savings: {\n        color: theme.palette.status.ok,\n      },\n      indicator: {\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'flex-end',\n      },\n    }),\n);\n\nexport const useCostGrowthLegendStyles = makeStyles<BackstageTheme>(theme => ({\n  h5: {\n    ...theme.typography.h5,\n    fontWeight: 500,\n    padding: 0,\n  },\n  marker: {\n    display: 'inherit',\n    marginRight: theme.spacing(1),\n  },\n  helpIcon: {\n    display: 'inherit',\n  },\n  title: {\n    ...theme.typography.overline,\n    fontWeight: 500,\n    lineHeight: 0,\n    marginRight: theme.spacing(1),\n    color: theme.palette.textSubtle,\n  },\n  tooltip: {\n    display: 'block',\n    padding: theme.spacing(1),\n    backgroundColor: theme.palette.navigation.background,\n  },\n  tooltipText: {\n    color: theme.palette.background.default,\n    fontSize: theme.typography.fontSize,\n    lineHeight: 1.5,\n  },\n}));\n\nexport const useBarChartStepperStyles = makeStyles<BackstageTheme>(\n  (theme: BackstageTheme) =>\n    createStyles({\n      paper: {\n        display: 'flex',\n        flexDirection: 'row',\n        justifyContent: 'space-around',\n        alignItems: 'center',\n        background: 'transparent',\n        padding: 8,\n      },\n      step: {\n        backgroundColor: theme.palette.action.disabled,\n        borderRadius: '50%',\n        width: 9,\n        height: 9,\n        margin: '0 2px',\n      },\n      stepActive: {\n        backgroundColor: theme.palette.primary.main,\n      },\n      steps: {\n        display: 'flex',\n        flexDirection: 'row',\n      },\n      backButton: {\n        position: 'absolute',\n        left: 0,\n        top: 'calc(50% - 60px)',\n        zIndex: 100,\n      },\n      nextButton: {\n        position: 'absolute',\n        right: 0,\n        top: 'calc(50% - 60px)',\n        zIndex: 100,\n      },\n    }),\n);\n\nexport const useNavigationStyles = makeStyles<CostInsightsTheme>(\n  (theme: CostInsightsTheme) =>\n    createStyles({\n      menuList: {\n        borderRadius: theme.shape.borderRadius,\n        backgroundColor: theme.palette.navigation.background,\n        minWidth: 250,\n      },\n      menuItem: {\n        background: 'transparent',\n        border: 0,\n        textTransform: 'none',\n        width: '100%',\n        minHeight: theme.spacing(6),\n        margin: theme.spacing(0.5, 2, 0.5, 0),\n      },\n      listItemIcon: {\n        minWidth: 40,\n      },\n      navigationIcon: {\n        fill: theme.palette.navigationText,\n      },\n      title: {\n        whiteSpace: 'nowrap',\n        lineHeight: 1,\n        color: theme.palette.navigationText,\n        fontWeight: theme.typography.fontWeightBold,\n      },\n    }),\n);\n\nexport const useTooltipStyles = makeStyles<CostInsightsTheme>(\n  (theme: CostInsightsTheme) =>\n    createStyles({\n      tooltip: {\n        backgroundColor: theme.palette.tooltip.background,\n        borderRadius: theme.shape.borderRadius,\n        boxShadow: theme.shadows[1],\n        color: theme.palette.tooltip.color,\n        fontSize: theme.typography.fontSize,\n        minWidth: 300,\n      },\n      maxWidth: {\n        maxWidth: 300,\n      },\n      actions: {\n        padding: theme.spacing(2),\n      },\n      header: {\n        padding: theme.spacing(2),\n      },\n      content: {\n        padding: theme.spacing(2),\n      },\n      lensIcon: {\n        fontSize: `.75rem`,\n      },\n      divider: {\n        backgroundColor: emphasize(theme.palette.divider, 1),\n      },\n      truncate: {\n        maxWidth: 200,\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n      },\n      subtitle: {\n        fontStyle: 'italic',\n      },\n    }),\n);\n\nexport const useAlertInsightsSectionStyles = makeStyles<BackstageTheme>(\n  (theme: BackstageTheme) =>\n    createStyles({\n      button: {\n        backgroundColor: theme.palette.textVerySubtle,\n        color: theme.palette.text.primary,\n      },\n    }),\n);\n\nexport const useSelectStyles = makeStyles<BackstageTheme>(\n  (theme: BackstageTheme) =>\n    createStyles({\n      select: {\n        minWidth: 200,\n        textAlign: 'start',\n        backgroundColor: theme.palette.background.paper,\n      },\n      menuItem: {\n        minWidth: 200,\n        padding: theme.spacing(2),\n        '&.compact': {\n          padding: theme.spacing(1, 2),\n        },\n      },\n    }),\n);\n\nexport const useActionItemCardStyles = makeStyles<CostInsightsTheme>(\n  (theme: CostInsightsTheme) =>\n    createStyles({\n      card: {\n        boxShadow: 'none',\n      },\n      avatar: {\n        backgroundColor: theme.palette.textVerySubtle,\n        color: theme.palette.text.primary,\n      },\n      root: {\n        minHeight: 80,\n        paddingBottom: theme.spacing(2),\n        borderRadius: theme.shape.borderRadius,\n      },\n      activeRoot: {\n        cursor: 'pointer',\n        transition: theme.transitions.create('background', {\n          duration: theme.transitions.duration.short,\n        }),\n        '&:hover': {\n          background: theme.palette.alertBackground,\n        },\n      },\n      action: {\n        margin: 0,\n      },\n      title: {\n        fontSize: theme.typography.fontSize,\n        fontWeight: theme.typography.fontWeightBold,\n      },\n    }),\n);\n\nexport const useProductInsightsCardStyles = makeStyles<BackstageTheme>(\n  (theme: BackstageTheme) =>\n    createStyles({\n      root: {\n        padding: theme.spacing(2, 2, 2, 2.5), // restore backstage default padding\n      },\n      action: {\n        margin: 0, // unset negative margins\n      },\n    }),\n);\n\nexport const useProductInsightsChartStyles = makeStyles<BackstageTheme>(\n  (theme: BackstageTheme) =>\n    createStyles({\n      indicator: {\n        fontWeight: theme.typography.fontWeightBold,\n        fontSize: '1.25rem',\n      },\n      actions: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n      },\n    }),\n);\n\nexport const useBackdropStyles = makeStyles<BackstageTheme>(\n  (theme: BackstageTheme) =>\n    createStyles({\n      root: {\n        zIndex: theme.zIndex.modal,\n      },\n    }),\n);\n\nexport const useSubtleTypographyStyles = makeStyles<BackstageTheme>(\n  (theme: BackstageTheme) =>\n    createStyles({\n      root: {\n        color: theme.palette.textSubtle,\n      },\n    }),\n);\n\nexport const useEntityDialogStyles = makeStyles<BackstageTheme>(theme =>\n  createStyles({\n    dialogContent: {\n      padding: 0,\n    },\n    dialogTitle: {\n      padding: 0,\n    },\n    closeButton: {\n      position: 'absolute',\n      right: theme.spacing(1),\n      top: theme.spacing(1),\n      color: theme.palette.grey[500],\n      zIndex: 100,\n    },\n    row: {\n      fontSize: theme.typography.fontSize * 1.25,\n    },\n    rowTotal: {\n      fontWeight: theme.typography.fontWeightBold,\n    },\n    colFirst: {\n      paddingLeft: theme.spacing(2),\n    },\n    colLast: {\n      paddingRight: theme.spacing(2),\n    },\n    column: {\n      fontWeight: theme.typography.fontWeightBold,\n    },\n    growth: {\n      display: 'flex',\n      flexDirection: 'row',\n      alignContent: 'center',\n      justifyContent: 'flex-end',\n    },\n  }),\n);\n\nexport const useAlertDialogStyles = makeStyles((theme: BackstageTheme) =>\n  createStyles({\n    content: {\n      padding: theme.spacing(0, 5, 2, 5),\n    },\n    actions: {\n      padding: theme.spacing(2, 5),\n    },\n    radio: {\n      margin: theme.spacing(-0.5, 0, -0.5, 0),\n    },\n    icon: {\n      color: theme.palette.primary.dark,\n      margin: theme.spacing(2.5, 2.5, 0, 0),\n      padding: 0,\n    },\n  }),\n);\n\nexport const useAlertStatusSummaryButtonStyles = makeStyles(() => ({\n  icon: {\n    transform: 'transform 5s',\n  },\n  clicked: {\n    transform: 'rotate(180deg)',\n  },\n}));\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  createContext,\n  Dispatch,\n  PropsWithChildren,\n  SetStateAction,\n  useContext,\n  useEffect,\n  useReducer,\n  useState,\n} from 'react';\nimport { Backdrop, CircularProgress } from '@material-ui/core';\nimport { Loading } from '../types';\nimport {\n  DefaultLoadingAction,\n  getDefaultState,\n  INITIAL_LOADING_ACTIONS,\n} from '../utils/loading';\nimport { useBackdropStyles as useStyles } from '../utils/styles';\n\nexport type LoadingContextProps = {\n  state: Loading;\n  dispatch: Dispatch<Partial<SetStateAction<Loading>>>;\n  actions: Array<string>;\n};\n\nexport type MapLoadingToProps<T> = (props: LoadingContextProps) => T;\n\nexport const LoadingContext = createContext<LoadingContextProps | undefined>(\n  undefined,\n);\n\nfunction reducer(prevState: Loading, action: Partial<Loading>): Loading {\n  return {\n    ...prevState,\n    ...action,\n  } as Record<string, boolean>;\n}\n\nexport const LoadingProvider = ({ children }: PropsWithChildren<{}>) => {\n  const classes = useStyles();\n  const actions = INITIAL_LOADING_ACTIONS;\n  const [state, dispatch] = useReducer(reducer, getDefaultState(actions));\n  const [isBackdropVisible, setBackdropVisible] = useState(false);\n\n  useEffect(() => {\n    function displayLoadingBackdrop() {\n      // Initial page loading is handled by progress bar\n      setBackdropVisible(\n        !state[DefaultLoadingAction.CostInsightsInitial] &&\n          Object.values(state).some(l => l),\n      );\n    }\n    displayLoadingBackdrop();\n  }, [state, setBackdropVisible]);\n\n  return (\n    <LoadingContext.Provider value={{ state, actions, dispatch }}>\n      {children}\n      <Backdrop open={isBackdropVisible} classes={classes}>\n        <CircularProgress />\n      </Backdrop>\n    </LoadingContext.Provider>\n  );\n};\n\nexport function useLoading<T>(mapLoadingToProps: MapLoadingToProps<T>): T {\n  const context = useContext(LoadingContext);\n\n  if (!context) {\n    assertNever();\n  }\n\n  return mapLoadingToProps({\n    state: context.state,\n    actions: context.actions,\n    dispatch: context.dispatch,\n  });\n}\n\nfunction assertNever(): never {\n  throw Error('useLoading cannot be used outside of LoadingProvider');\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  PropsWithChildren,\n  useContext,\n  useEffect,\n  useState,\n} from 'react';\nimport { Alert } from '@material-ui/lab';\nimport { costInsightsApiRef } from '../api';\nimport { MapLoadingToProps, useLoading } from './useLoading';\nimport { Group, Maybe } from '../types';\nimport { DefaultLoadingAction } from '../utils/loading';\nimport { useApi, identityApiRef } from '@backstage/core-plugin-api';\n\ntype GroupsProviderLoadingProps = {\n  dispatchLoadingGroups: (isLoading: boolean) => void;\n};\n\nconst mapLoadingToProps: MapLoadingToProps<GroupsProviderLoadingProps> = ({\n  dispatch,\n}) => ({\n  dispatchLoadingGroups: (isLoading: boolean) =>\n    dispatch({ [DefaultLoadingAction.UserGroups]: isLoading }),\n});\n\nexport type GroupsContextProps = {\n  groups: Group[];\n};\n\nexport const GroupsContext = React.createContext<\n  GroupsContextProps | undefined\n>(undefined);\n\nexport const GroupsProvider = ({ children }: PropsWithChildren<{}>) => {\n  const userId = useApi(identityApiRef).getUserId();\n  const client = useApi(costInsightsApiRef);\n  const [error, setError] = useState<Maybe<Error>>(null);\n  const { dispatchLoadingGroups } = useLoading(mapLoadingToProps);\n\n  const [groups, setGroups] = useState<Maybe<Group[]>>(null);\n\n  useEffect(() => {\n    dispatchLoadingGroups(true);\n\n    async function getUserGroups() {\n      try {\n        const g = await client.getUserGroups(userId);\n        setGroups(g);\n      } catch (e) {\n        setError(e);\n      } finally {\n        dispatchLoadingGroups(false);\n      }\n    }\n\n    getUserGroups();\n  }, [userId, client]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  if (error) {\n    return <Alert severity=\"error\">{error.message}</Alert>;\n  }\n\n  if (!groups) return null;\n\n  return (\n    <GroupsContext.Provider value={{ groups: groups }}>\n      {children}\n    </GroupsContext.Provider>\n  );\n};\n\nexport function useGroups(): Group[] {\n  const context = useContext(GroupsContext);\n  return context ? context.groups : assertNever();\n}\n\nfunction assertNever(): never {\n  throw Error('Cannot use useGroups outside of GroupsProvider');\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  Dispatch,\n  PropsWithChildren,\n  SetStateAction,\n  useContext,\n  useEffect,\n  useState,\n} from 'react';\nimport { Alert } from '@material-ui/lab';\nimport { Maybe, PageFilters, ProductFilters } from '../types';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport {\n  stringify,\n  validate,\n  getInitialPageState,\n  getInitialProductState,\n} from '../utils/history';\nimport { useGroups } from './useGroups';\nimport { useConfig } from './useConfig';\n\nexport type FilterContextProps = {\n  pageFilters: PageFilters;\n  productFilters: ProductFilters;\n  setPageFilters: Dispatch<SetStateAction<Maybe<PageFilters>>>;\n  setProductFilters: Dispatch<SetStateAction<Maybe<ProductFilters>>>;\n};\n\nexport type MapFiltersToProps<T> = (props: FilterContextProps) => T;\n\nexport const FilterContext = React.createContext<\n  FilterContextProps | undefined\n>(undefined);\n\nexport const FilterProvider = ({ children }: PropsWithChildren<{}>) => {\n  const config = useConfig();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const groups = useGroups();\n  const [error, setError] = useState<Maybe<Error>>(null);\n  const [pageFilters, setPageFilters] = useState<Maybe<PageFilters>>(null);\n  const [productFilters, setProductFilters] =\n    useState<Maybe<ProductFilters>>(null);\n\n  useEffect(() => {\n    async function setPageFiltersFromLocation() {\n      try {\n        // strip extraneous parameters, validate and transform\n        const queryParams = await validate(location.search);\n        const defaultMetric = config.metrics.find(m => m.default)?.kind ?? null;\n\n        // Group or project parameters should override defaults\n        const initialPageState = getInitialPageState(groups, queryParams);\n        const initialProductState = getInitialProductState(config);\n\n        setProductFilters(initialProductState);\n        setPageFilters({ ...initialPageState, metric: defaultMetric });\n      } catch (e) {\n        setError(e);\n      }\n    }\n\n    setPageFiltersFromLocation();\n  }, [groups]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(() => {\n    function setLocationFromPageFilters(filters: PageFilters) {\n      const queryString = stringify({\n        group: filters.group,\n        ...(filters.project ? { project: filters.project } : {}),\n      });\n      // TODO Remove workaround once issue is resolved in react-router\n      // (https://github.com/ReactTraining/react-router/issues/7496)\n      // navigate({ ...location, search: queryString });\n      navigate({ ...location, search: `?${queryString}` });\n    }\n\n    if (pageFilters) {\n      setLocationFromPageFilters(pageFilters);\n    }\n  }, [pageFilters]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  if (error) {\n    return <Alert severity=\"error\">{error.message}</Alert>;\n  }\n\n  // Wait for filters to load\n  if (!pageFilters || !productFilters) {\n    return null;\n  }\n\n  return (\n    <FilterContext.Provider\n      value={{ pageFilters, productFilters, setPageFilters, setProductFilters }}\n    >\n      {children}\n    </FilterContext.Provider>\n  );\n};\n\nexport function useFilters<T>(mapFiltersToProps: MapFiltersToProps<T>): T {\n  const context = useContext(FilterContext);\n  return context ? mapFiltersToProps(context) : assertNever();\n}\n\nfunction assertNever(): never {\n  throw Error('Cannot use useFilters outside of FilterProvider');\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, {\n  Dispatch,\n  SetStateAction,\n  useState,\n  useContext,\n  PropsWithChildren,\n} from 'react';\nimport { Maybe } from '../types';\n\nexport type ScrollTo = Maybe<string>;\n\nexport type ScrollContextProps = {\n  scroll: ScrollTo;\n  setScroll: Dispatch<SetStateAction<ScrollTo>>;\n};\n\nexport const ScrollContext = React.createContext<\n  ScrollContextProps | undefined\n>(undefined);\n\nexport const ScrollProvider = ({ children }: PropsWithChildren<{}>) => {\n  const [scroll, setScroll] = useState<ScrollTo>(null);\n  return (\n    <ScrollContext.Provider value={{ scroll, setScroll }}>\n      {children}\n    </ScrollContext.Provider>\n  );\n};\n\nexport enum ScrollType {\n  AlertSummary = 'alert-status-summary',\n}\n\nexport function useScroll() {\n  const context = useContext(ScrollContext);\n\n  if (!context) {\n    assertNever();\n  }\n\n  return [context.scroll, context.setScroll] as const;\n}\n\nfunction assertNever(): never {\n  throw new Error(`Cannot use useScroll outside ScrollProvider`);\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  PropsWithChildren,\n  useContext,\n  useEffect,\n  useState,\n} from 'react';\nimport * as yup from 'yup';\nimport { Alert } from '@material-ui/lab';\nimport { costInsightsApiRef } from '../api';\nimport { MapLoadingToProps, useLoading } from './useLoading';\nimport { DefaultLoadingAction } from '../utils/loading';\nimport { Maybe } from '../types';\nimport { useApi } from '@backstage/core-plugin-api';\n\ntype BillingDateProviderLoadingProps = {\n  dispatchLoadingBillingDate: (isLoading: boolean) => void;\n};\n\nconst mapLoadingToProps: MapLoadingToProps<BillingDateProviderLoadingProps> = ({\n  dispatch,\n}) => ({\n  dispatchLoadingBillingDate: (isLoading: boolean) =>\n    dispatch({ [DefaultLoadingAction.LastCompleteBillingDate]: isLoading }),\n});\n\nexport type BillingDateContextProps = {\n  lastCompleteBillingDate: string; // YYYY-MM-DD\n};\n\nexport const BillingDateContext = React.createContext<\n  BillingDateContextProps | undefined\n>(undefined);\n\nexport const dateRegex: RegExp = /^\\d{4}-\\d{2}-\\d{2}$/;\nconst dateFormatSchema = yup.string().matches(dateRegex, {\n  message:\n    'Unsupported billing date format: ${value}. Date should be in YYYY-MM-DD format.',\n  excludeEmptyString: true,\n});\n\nexport const BillingDateProvider = ({ children }: PropsWithChildren<{}>) => {\n  const client = useApi(costInsightsApiRef);\n  const [error, setError] = useState<Maybe<Error>>(null);\n  const { dispatchLoadingBillingDate } = useLoading(mapLoadingToProps);\n\n  const [lastCompleteBillingDate, setLastCompeteBillingDate] =\n    useState<Maybe<string>>(null);\n\n  useEffect(() => {\n    dispatchLoadingBillingDate(true);\n\n    async function getLastCompleteBillingDate() {\n      try {\n        const d = await client.getLastCompleteBillingDate();\n        const validDate = await dateFormatSchema.validate(d);\n        if (validDate) setLastCompeteBillingDate(validDate);\n      } catch (e) {\n        setError(e);\n      } finally {\n        dispatchLoadingBillingDate(false);\n      }\n    }\n\n    getLastCompleteBillingDate();\n  }, [client]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  if (error) {\n    return <Alert severity=\"error\">{error.message}</Alert>;\n  }\n\n  if (!lastCompleteBillingDate) return null;\n\n  return (\n    <BillingDateContext.Provider\n      value={\n        {\n          lastCompleteBillingDate: lastCompleteBillingDate,\n        } as BillingDateContextProps\n      }\n    >\n      {children}\n    </BillingDateContext.Provider>\n  );\n};\n\nexport function useLastCompleteBillingDate(): string {\n  const context = useContext(BillingDateContext);\n  return context ? context.lastCompleteBillingDate : assertNever();\n}\n\nfunction assertNever(): never {\n  throw Error(\n    'Cannot use useLastCompleteBillingDate outside of BillingDateProvider',\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  useState,\n  forwardRef,\n  ChangeEvent,\n  FormEventHandler,\n} from 'react';\nimport { Checkbox, FormControl, FormControlLabel } from '@material-ui/core';\nimport { Alert, AlertFormProps } from '../types';\n\nexport type AlertAcceptFormProps = AlertFormProps<Alert, null>;\n\nexport const AlertAcceptForm = forwardRef<\n  HTMLFormElement,\n  AlertAcceptFormProps\n>(({ onSubmit, disableSubmit }, ref) => {\n  const [checked, setChecked] = useState(false);\n\n  const onFormSubmit: FormEventHandler = e => {\n    e.preventDefault();\n    onSubmit(null);\n  };\n\n  const onChecked = (_: ChangeEvent<HTMLInputElement>, isChecked: boolean) => {\n    setChecked(isChecked);\n    disableSubmit(!isChecked);\n  };\n\n  return (\n    <form ref={ref} onSubmit={onFormSubmit}>\n      <FormControl component=\"fieldset\" fullWidth>\n        <FormControlLabel\n          label=\"My team can commit to making this change soon, or has already.\"\n          value={checked}\n          control={\n            <Checkbox color=\"primary\" checked={checked} onChange={onChecked} />\n          }\n        />\n      </FormControl>\n    </form>\n  );\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  ChangeEvent,\n  useEffect,\n  useState,\n  forwardRef,\n  FormEventHandler,\n} from 'react';\nimport { DateTime } from 'luxon';\nimport {\n  Box,\n  FormControl,\n  FormControlLabel,\n  RadioGroup,\n  Radio,\n  Typography,\n} from '@material-ui/core';\nimport {\n  Alert,\n  AlertFormProps,\n  Duration,\n  DEFAULT_DATE_FORMAT,\n  Maybe,\n  AlertSnoozeFormData,\n  AlertSnoozeOptions,\n} from '../types';\nimport { useAlertDialogStyles as useStyles } from '../utils/styles';\nimport { intervalsOf } from '../utils/duration';\n\nexport type AlertSnoozeFormProps = AlertFormProps<Alert, AlertSnoozeFormData>;\n\nexport const AlertSnoozeForm = forwardRef<\n  HTMLFormElement,\n  AlertSnoozeFormProps\n>(({ onSubmit, disableSubmit }, ref) => {\n  const classes = useStyles();\n  const [duration, setDuration] = useState<Maybe<Duration>>(Duration.P7D);\n\n  useEffect(() => disableSubmit(false), [disableSubmit]);\n\n  const onFormSubmit: FormEventHandler = e => {\n    e.preventDefault();\n    if (duration) {\n      const repeatInterval = 1;\n      const today = DateTime.now().toFormat(DEFAULT_DATE_FORMAT);\n      onSubmit({\n        intervals: intervalsOf(duration, today, repeatInterval),\n      });\n    }\n  };\n\n  const onSnoozeDurationChange = (\n    _: ChangeEvent<HTMLInputElement>,\n    value: string,\n  ) => {\n    setDuration(value as Duration);\n  };\n\n  return (\n    <form ref={ref} onSubmit={onFormSubmit}>\n      <FormControl component=\"fieldset\" fullWidth>\n        <Typography color=\"textPrimary\">\n          <b>For how long?</b>\n        </Typography>\n        <Box mb={1}>\n          <RadioGroup\n            name=\"snooze-alert-options\"\n            value={duration}\n            onChange={onSnoozeDurationChange}\n          >\n            {AlertSnoozeOptions.map(option => (\n              <FormControlLabel\n                key={`snooze-alert-option-${option.duration}`}\n                label={option.label}\n                value={option.duration}\n                control={<Radio className={classes.radio} />}\n              />\n            ))}\n          </RadioGroup>\n        </Box>\n      </FormControl>\n    </form>\n  );\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  ChangeEvent,\n  useEffect,\n  useState,\n  forwardRef,\n  FormEventHandler,\n} from 'react';\nimport {\n  Box,\n  Collapse,\n  FormControl,\n  FormControlLabel,\n  TextField,\n  Typography,\n  Radio,\n  RadioGroup,\n} from '@material-ui/core';\nimport {\n  Alert,\n  AlertFormProps,\n  AlertDismissReason,\n  AlertDismissOptions,\n  AlertDismissFormData,\n  Maybe,\n} from '../types';\nimport { useAlertDialogStyles as useStyles } from '../utils/styles';\n\nexport type AlertDismissFormProps = AlertFormProps<Alert, AlertDismissFormData>;\n\nexport const AlertDismissForm = forwardRef<\n  HTMLFormElement,\n  AlertDismissFormProps\n>(({ onSubmit, disableSubmit }, ref) => {\n  const classes = useStyles();\n  const [other, setOther] = useState<Maybe<string>>(null);\n  const [feedback, setFeedback] = useState<Maybe<string>>(null);\n  const [reason, setReason] = useState<AlertDismissReason>(\n    AlertDismissReason.Resolved,\n  );\n\n  const onFormSubmit: FormEventHandler = e => {\n    e.preventDefault();\n    if (reason) {\n      onSubmit({\n        other: other,\n        reason: reason,\n        feedback: feedback,\n      });\n    }\n  };\n\n  const onReasonChange = (_: ChangeEvent<HTMLInputElement>, value: string) => {\n    if (other) {\n      setOther(null);\n    }\n    setReason(value as AlertDismissReason);\n  };\n\n  const onOtherChange = (e: ChangeEvent<HTMLInputElement>) => {\n    return e.target.value\n      ? setOther(e.target.value as AlertDismissReason)\n      : setOther(null);\n  };\n\n  const onFeedbackChange = (e: ChangeEvent<HTMLInputElement>) => {\n    return e.target.value\n      ? setFeedback(e.target.value as AlertDismissReason)\n      : setFeedback(null);\n  };\n\n  useEffect(() => {\n    function validateDismissForm() {\n      if (reason === AlertDismissReason.Other) {\n        if (other) {\n          disableSubmit(false);\n        } else {\n          disableSubmit(true);\n        }\n      } else if (reason) {\n        disableSubmit(false);\n      } else {\n        disableSubmit(true);\n      }\n    }\n\n    validateDismissForm();\n  }, [reason, other, disableSubmit]);\n\n  return (\n    <form ref={ref} onSubmit={onFormSubmit}>\n      <FormControl component=\"fieldset\" fullWidth>\n        <Typography color=\"textPrimary\">\n          <b>Reason for dismissing?</b>\n        </Typography>\n        <Box mb={1}>\n          <RadioGroup\n            name=\"dismiss-alert-reasons\"\n            value={reason}\n            onChange={onReasonChange}\n          >\n            {AlertDismissOptions.map(option => (\n              <FormControlLabel\n                key={`dismiss-alert-option-${option.reason}`}\n                label={option.label}\n                value={option.reason}\n                control={<Radio className={classes.radio} />}\n              />\n            ))}\n          </RadioGroup>\n          <Collapse in={reason === AlertDismissReason.Other}>\n            <Box ml={4}>\n              <TextField\n                id=\"dismiss-alert-option-other\"\n                variant=\"outlined\"\n                multiline\n                fullWidth\n                rows={4}\n                value={other ?? ''}\n                onChange={onOtherChange}\n              />\n            </Box>\n          </Collapse>\n        </Box>\n        <Typography gutterBottom>\n          <b>Any other feedback you can provide?</b>\n        </Typography>\n        <TextField\n          id=\"dismiss-alert-feedback\"\n          variant=\"outlined\"\n          multiline\n          rows={4}\n          fullWidth\n          value={feedback ?? ''}\n          onChange={onFeedbackChange}\n        />\n      </FormControl>\n    </form>\n  );\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Alert, AlertForm, AlertStatus, Maybe } from '../types';\nimport { AlertAcceptForm, AlertDismissForm, AlertSnoozeForm } from '../forms';\n\nconst createAlertHandler = (status?: AlertStatus) => (alert: Alert) =>\n  alert.status === status;\nexport const isAlertActive = (alert: Alert) => !hasProperty(alert, 'status');\nexport const isAlertSnoozed = createAlertHandler(AlertStatus.Snoozed);\nexport const isAlertAccepted = createAlertHandler(AlertStatus.Accepted);\nexport const isAlertDismissed = createAlertHandler(AlertStatus.Dismissed);\n\nconst createStatusHandler = (status: AlertStatus) => (s: Maybe<AlertStatus>) =>\n  s === status;\nexport const isStatusSnoozed = createStatusHandler(AlertStatus.Snoozed);\nexport const isStatusAccepted = createStatusHandler(AlertStatus.Accepted);\nexport const isStatusDismissed = createStatusHandler(AlertStatus.Dismissed);\n\nconst createAlertEventHandler =\n  (onEvent: 'onSnoozed' | 'onAccepted' | 'onDismissed') =>\n  (alert: Maybe<Alert>): boolean =>\n    hasProperty(alert, onEvent);\nexport const isSnoozeEnabled = createAlertEventHandler('onSnoozed');\nexport const isAcceptEnabled = createAlertEventHandler('onAccepted');\nexport const isDismissEnabled = createAlertEventHandler('onDismissed');\n\nconst createFormEnabledHandler =\n  (Form: 'SnoozeForm' | 'AcceptForm' | 'DismissForm') =>\n  (alert: Maybe<Alert>): boolean => {\n    if (!alert) return false;\n    if (alert[Form] === null) return false;\n    switch (Form) {\n      case 'SnoozeForm':\n        return isSnoozeEnabled(alert);\n      case 'AcceptForm':\n        return isAcceptEnabled(alert);\n      case 'DismissForm':\n        return isDismissEnabled(alert);\n      default:\n        return false;\n    }\n  };\nexport const isSnoozeFormEnabled = createFormEnabledHandler('SnoozeForm');\nexport const isAcceptFormEnabled = createFormEnabledHandler('AcceptForm');\nexport const isDismissFormEnabled = createFormEnabledHandler('DismissForm');\n\n/**\n * Utility for determining if a form is disabled.\n * When a form is disabled, the dialog button's type should convert from submit to button.\n * @param alert\n * @param status\n */\nexport const isFormDisabled = (\n  alert: Maybe<Alert>,\n  status: Maybe<AlertStatus>,\n): boolean => {\n  switch (status) {\n    case AlertStatus.Snoozed:\n      return alert?.SnoozeForm === null;\n    case AlertStatus.Accepted:\n      return alert?.AcceptForm === null;\n    case AlertStatus.Dismissed:\n      return alert?.DismissForm === null;\n    default:\n      return false;\n  }\n};\n\nexport function formOf(\n  alert: Maybe<Alert>,\n  status: Maybe<AlertStatus>,\n): Maybe<AlertForm> {\n  switch (status) {\n    case AlertStatus.Snoozed: {\n      const SnoozeForm = alert?.SnoozeForm ?? AlertSnoozeForm;\n      return isSnoozeFormEnabled(alert) ? SnoozeForm : null;\n    }\n    case AlertStatus.Accepted: {\n      const AcceptForm = alert?.AcceptForm ?? AlertAcceptForm;\n      return isAcceptFormEnabled(alert) ? AcceptForm : null;\n    }\n    case AlertStatus.Dismissed: {\n      const DismissForm = alert?.DismissForm ?? AlertDismissForm;\n      return isDismissFormEnabled(alert) ? DismissForm : null;\n    }\n    default:\n      return null;\n  }\n}\n\n/**\n * Utility for choosing from a fixed set of values for a given alert status.\n * @param status\n * @param values\n */\nexport function choose<T>(\n  status: Maybe<AlertStatus>,\n  values: [T, T, T],\n  none: T,\n): T {\n  switch (status) {\n    case AlertStatus.Snoozed:\n      return values[0];\n    case AlertStatus.Accepted:\n      return values[1];\n    case AlertStatus.Dismissed:\n      return values[2];\n    default:\n      return none;\n  }\n}\n\nexport function hasProperty(alert: Maybe<Alert>, prop: keyof Alert): boolean {\n  return prop in (alert ?? {});\n}\n\nexport const sumOfAllAlerts = (sum: number, alerts: Alert[]) =>\n  sum + alerts.length;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { PropsWithChildren } from 'react';\nimport {\n  createTheme as createMuiTheme,\n  ThemeProvider,\n} from '@material-ui/core';\nimport { BackstageTheme } from '@backstage/theme';\nimport {\n  costInsightsDarkTheme,\n  costInsightsLightTheme,\n} from '../../utils/styles';\nimport { CostInsightsTheme } from '../../types';\n\nexport const CostInsightsThemeProvider = ({\n  children,\n}: PropsWithChildren<{}>) => {\n  return (\n    <ThemeProvider\n      theme={(theme: BackstageTheme) =>\n        createMuiTheme({\n          ...theme,\n          palette: {\n            ...theme.palette,\n            ...(theme.palette.type === 'dark'\n              ? costInsightsDarkTheme.palette\n              : costInsightsLightTheme.palette),\n          },\n        }) as CostInsightsTheme\n      }\n    >\n      {children}\n    </ThemeProvider>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { PropsWithChildren } from 'react';\nimport { Box, Button, Container, makeStyles } from '@material-ui/core';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport { CostInsightsThemeProvider } from '../CostInsightsPage/CostInsightsThemeProvider';\nimport { ConfigProvider, CurrencyProvider } from '../../hooks';\nimport { Header, Page } from '@backstage/core-components';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    gridArea: 'pageContent',\n    padding: theme.spacing(4),\n  },\n}));\n\ntype AlertInstructionsLayoutProps = {\n  title: string;\n};\n\nexport const AlertInstructionsLayout = ({\n  title,\n  children,\n}: PropsWithChildren<AlertInstructionsLayoutProps>) => {\n  const classes = useStyles();\n  return (\n    <CostInsightsThemeProvider>\n      <ConfigProvider>\n        <CurrencyProvider>\n          <Page themeId=\"tool\">\n            <Header\n              title=\"Cost Insights\"\n              pageTitleOverride={title}\n              type=\"Tool\"\n            />\n            <Container maxWidth=\"md\" disableGutters className={classes.root}>\n              <Box mb={3}>\n                <Button\n                  variant=\"outlined\"\n                  startIcon={<ChevronLeftIcon />}\n                  href=\"/cost-insights\"\n                >\n                  Back to Cost Insights\n                </Button>\n              </Box>\n              {children}\n            </Container>\n          </Page>\n        </CurrencyProvider>\n      </ConfigProvider>\n    </CostInsightsThemeProvider>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { PropsWithChildren } from 'react';\nimport { Box, Typography } from '@material-ui/core';\nimport { useBarChartLabelStyles } from '../../utils/styles';\n\ntype BarChartLabelProps = {\n  x: number;\n  y: number;\n  height: number;\n  width: number;\n  details?: JSX.Element;\n};\n\nexport const BarChartLabel = ({\n  x,\n  y,\n  height,\n  width,\n  details,\n  children,\n}: PropsWithChildren<BarChartLabelProps>) => {\n  const classes = useBarChartLabelStyles();\n  const translateX = width * -0.5;\n\n  return (\n    <foreignObject\n      className={classes.foreignObject}\n      style={{ transform: `translateX(${translateX}px)` }}\n      x={x}\n      y={y}\n      height={height}\n      width={width}\n    >\n      <Box display=\"flex\" flexDirection=\"column\" justifyContent=\"center\">\n        <Typography className={classes.label} gutterBottom>\n          {children}\n        </Typography>\n        {details}\n      </Box>\n    </foreignObject>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { BarChartLabel } from './BarChartLabel';\n\ntype BarChartTickProps = {\n  x: number;\n  y: number;\n  height: number;\n  width: number;\n  payload: {\n    value: any;\n  };\n  visibleTicksCount: number;\n  details?: JSX.Element;\n};\n\nexport const BarChartTick = ({\n  x,\n  y,\n  height,\n  width,\n  payload,\n  visibleTicksCount,\n  details,\n}: BarChartTickProps) => {\n  const gutterWidth = 5;\n  const labelWidth = width / visibleTicksCount - gutterWidth * 2;\n  return (\n    <BarChartLabel\n      x={x}\n      y={y}\n      height={height}\n      width={labelWidth}\n      details={details}\n    >\n      {!payload.value ? 'Unlabeled' : payload.value}\n    </BarChartLabel>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { forwardRef, PropsWithChildren, Ref } from 'react';\nimport { ButtonBase, ButtonBaseProps } from '@material-ui/core';\nimport { useBarChartStepperButtonStyles as useStyles } from '../../utils/styles';\n\ninterface BarChartStepperButtonProps extends ButtonBaseProps {\n  name: string;\n}\n\nexport const BarChartStepperButton = forwardRef(\n  (\n    {\n      name,\n      children,\n      ...buttonBaseProps\n    }: PropsWithChildren<BarChartStepperButtonProps>,\n    ref: Ref<HTMLButtonElement>,\n  ) => {\n    const classes = useStyles();\n    return (\n      <ButtonBase\n        ref={ref}\n        classes={classes}\n        disableRipple\n        data-testid={`bar-chart-stepper-button-${name}`}\n        {...buttonBaseProps}\n      >\n        {children}\n      </ButtonBase>\n    );\n  },\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { ButtonBase } from '@material-ui/core';\nimport { useBarChartStepperStyles as useStyles } from '../../utils/styles';\n\nexport type BarChartStepsProps = {\n  steps: number;\n  activeStep: number;\n  onClick: (index: number) => void;\n};\n\nexport const BarChartSteps = ({\n  steps,\n  activeStep,\n  onClick,\n}: BarChartStepsProps) => {\n  const classes = useStyles();\n  const handleOnClick =\n    (index: number) =>\n    (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n      event.preventDefault();\n      onClick(index);\n    };\n\n  return (\n    <div className={classes.steps}>\n      {[...new Array(steps)].map((_, index) => (\n        <ButtonBase key={index} centerRipple onClick={handleOnClick(index)}>\n          <div\n            data-testid=\"bar-chart-step\"\n            className={`${classes.step} ${\n              index === activeStep ? classes.stepActive : ''\n            }`}\n          />\n        </ButtonBase>\n      ))}\n    </div>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport { Paper, Slide } from '@material-ui/core';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport { BarChartStepperButton } from './BarChartStepperButton';\nimport { BarChartSteps } from './BarChartSteps';\nimport { useBarChartStepperStyles } from '../../utils/styles';\n\ntype BarChartStepperProps = {\n  disableScroll: boolean;\n  steps: number;\n  onChange: (activeStep: number) => void;\n};\n\nexport const BarChartStepper = ({\n  steps,\n  disableScroll,\n  onChange,\n}: BarChartStepperProps) => {\n  const classes = useBarChartStepperStyles();\n  const [activeStep, setActiveStep] = useState(0);\n\n  /*\n   * This calc determines how many active steps to display in the stepper.\n   * If the chart is displaying a large amount of resources,\n   * the total dots are truncated to 10. As the user clicks forward,\n   * eventually, there might be resources \"left over\" in excess of the ten dot limit.\n   * Once the user has reached that threshold, the difference should appear constant\n   * as the user clicks through the remaining resources and no extra dots should be displayed.\n   */\n\n  const diff = steps % 10;\n  const stepsRemaining = steps - activeStep <= diff ? diff : steps;\n  const displayedStep = activeStep % 10;\n\n  useEffect(() => {\n    onChange(activeStep);\n  }, [activeStep, onChange]);\n\n  const handleNext = () => {\n    setActiveStep(prevStep => prevStep + 1);\n  };\n\n  const handleBack = () => {\n    setActiveStep(prevStep => prevStep - 1);\n  };\n\n  const handleClick = (index: number) => {\n    setActiveStep(prevStep => {\n      const offset = index - (prevStep % 10);\n      return prevStep + offset;\n    });\n  };\n\n  return (\n    <Paper\n      data-testid=\"bar-chart-stepper\"\n      square\n      elevation={0}\n      className={classes.paper}\n    >\n      <Slide\n        direction=\"right\"\n        in={!disableScroll && activeStep !== 0}\n        mountOnEnter\n        unmountOnExit\n      >\n        <BarChartStepperButton\n          name=\"back\"\n          className={classes.backButton}\n          onClick={handleBack}\n        >\n          <ChevronLeftIcon />\n        </BarChartStepperButton>\n      </Slide>\n      <BarChartSteps\n        steps={Math.min(10, stepsRemaining)}\n        activeStep={displayedStep}\n        onClick={handleClick}\n      />\n      <Slide\n        direction=\"left\"\n        in={!disableScroll && activeStep < steps - 1}\n        mountOnEnter\n        unmountOnExit\n      >\n        <BarChartStepperButton\n          name=\"next\"\n          className={classes.nextButton}\n          onClick={handleNext}\n        >\n          <ChevronRightIcon />\n        </BarChartStepperButton>\n      </Slide>\n    </Paper>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ReactNode, PropsWithChildren } from 'react';\nimport classnames from 'classnames';\nimport { Box, Divider, Typography } from '@material-ui/core';\nimport { useTooltipStyles as useStyles } from '../../utils/styles';\n\nexport type BarChartTooltipProps = {\n  title: string;\n  content?: ReactNode | string;\n  subtitle?: ReactNode;\n  topRight?: ReactNode;\n  actions?: ReactNode;\n};\n\nexport const BarChartTooltip = ({\n  title,\n  content,\n  subtitle,\n  topRight,\n  actions,\n  children,\n}: PropsWithChildren<BarChartTooltipProps>) => {\n  const classes = useStyles();\n  const titleClassName = classnames(classes.truncate, {\n    [classes.maxWidth]: topRight === undefined,\n  });\n\n  return (\n    <Box className={classes.tooltip} display=\"flex\" flexDirection=\"column\">\n      <Box\n        display=\"flex\"\n        flexDirection=\"row\"\n        justifyContent=\"space-between\"\n        alignItems=\"baseline\"\n        px={2}\n        pt={2}\n      >\n        <Box display=\"flex\" flexDirection=\"column\">\n          <Typography className={titleClassName} variant=\"h6\">\n            {title}\n          </Typography>\n          {subtitle && (\n            <Typography className={classes.subtitle} variant=\"subtitle1\">\n              {subtitle}\n            </Typography>\n          )}\n        </Box>\n        {topRight && <Box ml={2}>{topRight}</Box>}\n      </Box>\n      {content && (\n        <Box px={2} pt={2} className={classes.maxWidth}>\n          <Typography variant=\"body1\" paragraph>\n            {content}\n          </Typography>\n        </Box>\n      )}\n      <Box display=\"flex\" flexDirection=\"column\" p={2}>\n        {children}\n      </Box>\n      {actions && (\n        <>\n          <Divider className={classes.divider} variant=\"fullWidth\" />\n          <Box display=\"flex\" flexDirection=\"column\" p={2}>\n            {actions}\n          </Box>\n        </>\n      )}\n    </Box>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Box, Typography } from '@material-ui/core';\nimport LensIcon from '@material-ui/icons/Lens';\nimport { useTooltipStyles as useStyles } from '../../utils/styles';\n\nexport type TooltipItem = {\n  fill: string;\n  label: string;\n  value: string;\n};\n\nexport type BarChartTooltipItemProps = {\n  item: TooltipItem;\n};\n\nexport const BarChartTooltipItem = ({ item }: BarChartTooltipItemProps) => {\n  const classes = useStyles();\n  return (\n    <Box\n      display=\"flex\"\n      alignItems=\"center\"\n      justifyContent=\"space-between\"\n      minHeight={25}\n    >\n      <Box display=\"flex\" alignContent=\"center\" marginRight=\".5em\">\n        <Box display=\"flex\" alignItems=\"center\" marginRight=\".5em\">\n          <LensIcon className={classes.lensIcon} style={{ fill: item.fill }} />\n        </Box>\n        <Typography>{item.label}</Typography>\n      </Box>\n      <Typography display=\"block\">{item.value}</Typography>\n    </Box>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DateTime, Duration as LuxonDuration } from 'luxon';\nimport pluralize from 'pluralize';\nimport { ChangeStatistic, Duration } from '../types';\nimport { inclusiveEndDateOf, inclusiveStartDateOf } from '../utils/duration';\nimport { notEmpty } from './assert';\n\nexport type Period = {\n  periodStart: string;\n  periodEnd: string;\n};\n\nexport const costFormatter = new Intl.NumberFormat('en-US', {\n  style: 'currency',\n  currency: 'USD',\n});\n\nexport const currencyFormatter = new Intl.NumberFormat('en-US', {\n  style: 'currency',\n  currency: 'USD',\n  minimumFractionDigits: 0,\n  maximumFractionDigits: 0,\n});\n\nexport const lengthyCurrencyFormatter = new Intl.NumberFormat('en-US', {\n  style: 'currency',\n  currency: 'USD',\n  minimumFractionDigits: 0,\n  minimumSignificantDigits: 2,\n  maximumSignificantDigits: 2,\n});\n\nexport const numberFormatter = new Intl.NumberFormat('en-US', {\n  minimumFractionDigits: 0,\n  maximumFractionDigits: 0,\n});\n\nexport const monthFormatter = new Intl.DateTimeFormat('en-US', {\n  timeZone: 'UTC',\n  month: 'long',\n  year: 'numeric',\n});\n\nexport const dateFormatter = new Intl.DateTimeFormat('en-US', {\n  timeZone: 'UTC',\n  day: 'numeric',\n  month: 'short',\n});\n\nexport const monthOf = (date: string): string => {\n  return monthFormatter.format(Date.parse(date));\n};\n\nexport const quarterOf = (date: string): string => {\n  // Supports formatting yyyy-LL-dd and yyyy-'Q'q returned in alerts\n  const d = DateTime.fromISO(date).isValid\n    ? DateTime.fromISO(date)\n    : DateTime.fromFormat(date, \"yyyy-'Q'q\");\n  return d.toFormat(\"'Q'q yyyy\");\n};\n\nexport function formatCurrency(amount: number, currency?: string): string {\n  const n = Math.round(amount);\n  const numString = numberFormatter.format(n);\n\n  return currency ? `${numString} ${pluralize(currency, n)}` : numString;\n}\n\nexport function formatChange(change: ChangeStatistic): string {\n  if (notEmpty(change.ratio)) {\n    return formatPercent(Math.abs(change.ratio));\n  }\n  return change.amount >= 0 ? '∞' : '-∞';\n}\n\nexport function formatPercent(n: number): string {\n  // Number.toFixed shows scientific notation for extreme numbers\n  if (isNaN(n) || Math.abs(n) < 0.01) {\n    return '0%';\n  }\n\n  if (Math.abs(n) > 10) {\n    return `>1000%`;\n  }\n\n  return `${(n * 100).toFixed(0)}%`;\n}\n\nexport function formatLastTwoLookaheadQuarters(inclusiveEndDate: string) {\n  const start = DateTime.fromISO(\n    inclusiveStartDateOf(Duration.P3M, inclusiveEndDate),\n  ).toFormat(\"'Q'q yyyy\");\n  const end = DateTime.fromISO(\n    inclusiveEndDateOf(Duration.P3M, inclusiveEndDate),\n  ).toFormat(\"'Q'q yyyy\");\n  return `${start} vs ${end}`;\n}\n\nconst formatRelativePeriod = (\n  duration: Duration,\n  date: string,\n  isEndDate: boolean,\n): string => {\n  const periodStart = isEndDate ? inclusiveStartDateOf(duration, date) : date;\n  const periodEnd = isEndDate ? date : inclusiveEndDateOf(duration, date);\n  const days = LuxonDuration.fromISO(duration).days;\n  if (![periodStart, periodEnd].includes(date)) {\n    throw new Error(`Invalid relative date ${date} for duration ${duration}`);\n  }\n  return date === periodStart ? `First ${days} Days` : `Last ${days} Days`;\n};\n\nexport function formatPeriod(\n  duration: Duration,\n  date: string,\n  isEndDate: boolean,\n) {\n  switch (duration) {\n    case Duration.P3M:\n      return quarterOf(\n        isEndDate\n          ? inclusiveEndDateOf(duration, date)\n          : inclusiveStartDateOf(duration, date),\n      );\n    default:\n      return formatRelativePeriod(duration, date, isEndDate);\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { DateAggregation, ResourceData } from '../types';\nimport { ProductState } from './loading';\n\nexport const aggregationSort = (\n  a: DateAggregation,\n  b: DateAggregation,\n): number => a.date.localeCompare(b.date);\n\nexport const resourceSort = (a: ResourceData, b: ResourceData) =>\n  b.previous + b.current - (a.previous + a.current);\n\nexport function totalAggregationSort(a: ProductState, b: ProductState): number {\n  const [prevA, currA] = a.entity?.aggregation ?? [0, 0];\n  const [prevB, currB] = b.entity?.aggregation ?? [0, 0];\n  return prevB + currB - (prevA + currA);\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { TooltipPayload, TooltipProps } from 'recharts';\nimport { AlertCost, DataKey, Entity, ResourceData } from '../types';\nimport {\n  currencyFormatter,\n  dateFormatter,\n  lengthyCurrencyFormatter,\n} from './formatters';\n\nexport function formatGraphValue(value: number, format?: string) {\n  if (format === 'number') {\n    return value.toLocaleString();\n  }\n\n  if (value < 1) {\n    return lengthyCurrencyFormatter.format(value);\n  }\n\n  return currencyFormatter.format(value);\n}\n\nexport const overviewGraphTickFormatter = (millis: string | number) =>\n  typeof millis === 'number' ? dateFormatter.format(millis) : millis;\n\nexport const tooltipItemOf = (payload: TooltipPayload) => {\n  const value =\n    typeof payload.value === 'number'\n      ? currencyFormatter.format(payload.value)\n      : (payload.value as string);\n  const fill = payload.fill as string;\n\n  switch (payload.dataKey) {\n    case DataKey.Current:\n    case DataKey.Previous:\n      return {\n        label: payload.name,\n        value: value,\n        fill: fill,\n      };\n    default:\n      return null;\n  }\n};\n\nexport const resourceOf = (entity: Entity | AlertCost): ResourceData => ({\n  name: entity.id,\n  previous: entity.aggregation[0],\n  current: entity.aggregation[1],\n});\n\nexport const titleOf = (label?: string | number) => {\n  return label ? String(label) : 'Unlabeled';\n};\n\nexport const isInvalid = ({ label, payload }: TooltipProps) => {\n  // null labels are empty strings, which are valid\n  return label === undefined || !payload || !payload.length;\n};\n\nexport const isLabeled = (data?: Record<'activeLabel', string | undefined>) => {\n  return data?.activeLabel && data?.activeLabel !== '';\n};\n\nexport const isUnlabeled = (\n  data?: Record<'activeLabel', string | undefined>,\n) => {\n  return data?.activeLabel === '';\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState, useCallback } from 'react';\nimport {\n  Bar,\n  BarChart as RechartsBarChart,\n  CartesianGrid,\n  ContentRenderer,\n  TooltipProps as RechartsTooltipProps,\n  RechartsFunction,\n  ResponsiveContainer,\n  Tooltip as RechartsTooltip,\n  XAxis,\n  YAxis,\n} from 'recharts';\nimport { Box, useTheme } from '@material-ui/core';\nimport { BarChartTick } from './BarChartTick';\nimport { BarChartStepper } from './BarChartStepper';\nimport { BarChartTooltip } from './BarChartTooltip';\nimport { BarChartTooltipItem } from './BarChartTooltipItem';\nimport { currencyFormatter } from '../../utils/formatters';\nimport {\n  BarChartData,\n  ResourceData,\n  DataKey,\n  CostInsightsTheme,\n} from '../../types';\nimport { notEmpty } from '../../utils/assert';\nimport { useBarChartStyles } from '../../utils/styles';\nimport { resourceSort } from '../../utils/sort';\nimport { isInvalid, titleOf, tooltipItemOf } from '../../utils/graphs';\n\nexport const defaultTooltip: ContentRenderer<RechartsTooltipProps> = ({\n  label,\n  payload = [],\n}) => {\n  if (isInvalid({ label, payload })) return null;\n\n  const title = titleOf(label);\n  const items = payload.map(tooltipItemOf).filter(notEmpty);\n  return (\n    <BarChartTooltip title={title}>\n      {items.map((item, index) => (\n        <BarChartTooltipItem key={`${item.label}-${index}`} item={item} />\n      ))}\n    </BarChartTooltip>\n  );\n};\n\nexport type BarChartProps = {\n  resources: ResourceData[];\n  responsive?: boolean;\n  displayAmount?: number;\n  options?: Partial<BarChartData>;\n  tooltip?: ContentRenderer<RechartsTooltipProps>;\n  onClick?: RechartsFunction;\n  onMouseMove?: RechartsFunction;\n};\n\nexport const BarChart = ({\n  resources,\n  responsive = true,\n  displayAmount = 6,\n  options = {},\n  tooltip = defaultTooltip,\n  onClick,\n  onMouseMove,\n}: BarChartProps) => {\n  const theme = useTheme<CostInsightsTheme>();\n  const styles = useBarChartStyles(theme);\n  const [activeChart, setActiveChart] = useState(false);\n  const [stepWindow, setStepWindow] = useState(() => [0, displayAmount]);\n\n  const data = Object.assign(\n    {\n      previousFill: theme.palette.lightBlue,\n      currentFill: theme.palette.darkBlue,\n      previousName: 'Previous',\n      currentName: 'Current',\n    },\n    options,\n  );\n\n  const [stepStart, stepEnd] = stepWindow;\n  const steps = Math.ceil(resources.length / displayAmount);\n  const disableStepper = resources.length <= displayAmount;\n\n  const sortedResources = resources\n    .sort(resourceSort)\n    .slice(stepStart, stepEnd);\n\n  // Pin the domain to the largest value in the series.\n  // Intentially redundant - This could simply be derived from the first element in the already sorted list,\n  // but that may not be the case in the future when custom sorting is implemented.\n  const globalResourcesMax = resources.reduce(\n    (max, r: ResourceData) => Math.max(max, r.current, r.previous),\n    0,\n  );\n\n  const onStepChange = useCallback(\n    (activeStep: number) => {\n      const start = activeStep * displayAmount;\n      const end = start + displayAmount;\n      if (end > resources.length) {\n        setStepWindow([start, resources.length]);\n      } else {\n        setStepWindow([start, end]);\n      }\n    },\n    [setStepWindow, resources, displayAmount],\n  );\n\n  return (\n    <Box\n      position=\"relative\"\n      onMouseLeave={() => setActiveChart(false)}\n      onMouseEnter={() => setActiveChart(true)}\n      data-testid=\"bar-chart-wrapper\"\n    >\n      {/* Setting fixed values for height and width generates a console warning in testing but enables ResponsiveContainer to render its children. */}\n      <ResponsiveContainer\n        height={styles.container.height}\n        width={responsive ? '100%' : styles.container.width}\n      >\n        <RechartsBarChart\n          style={{ cursor: onClick ? 'pointer' : null }}\n          onClick={onClick}\n          onMouseMove={onMouseMove}\n          data={sortedResources}\n          margin={styles.barChart.margin}\n          barSize={45}\n          data-testid=\"bar-chart\"\n        >\n          {tooltip && (\n            <RechartsTooltip\n              filterNull\n              cursor={styles.cursor}\n              animationDuration={100}\n              content={tooltip}\n            />\n          )}\n          <CartesianGrid\n            vertical={false}\n            stroke={styles.cartesianGrid.stroke}\n          />\n          <XAxis\n            dataKey={DataKey.Name}\n            tickLine={false}\n            interval={0}\n            height={styles.xAxis.height}\n            tick={BarChartTick}\n          />\n          <YAxis\n            tickFormatter={currencyFormatter.format}\n            domain={[() => 0, globalResourcesMax]}\n            tick={styles.axis}\n          />\n          <Bar\n            dataKey={DataKey.Previous}\n            name={data.previousName}\n            fill={data.previousFill}\n            isAnimationActive={false}\n          />\n          <Bar\n            dataKey={DataKey.Current}\n            name={data.currentName}\n            fill={data.currentFill}\n            isAnimationActive={false}\n          />\n        </RechartsBarChart>\n      </ResponsiveContainer>\n      {!disableStepper && (\n        <BarChartStepper\n          steps={steps}\n          disableScroll={!activeChart}\n          onChange={onStepChange}\n        />\n      )}\n    </Box>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { PropsWithChildren } from 'react';\nimport { Box, Typography, Tooltip } from '@material-ui/core';\nimport LensIcon from '@material-ui/icons/Lens';\nimport HelpOutlineOutlinedIcon from '@material-ui/icons/HelpOutlineOutlined';\nimport { useCostGrowthLegendStyles } from '../../utils/styles';\n\nexport type LegendItemProps = {\n  title: string;\n  tooltipText?: string;\n  markerColor?: string;\n};\n\nexport const LegendItem = ({\n  title,\n  tooltipText,\n  markerColor,\n  children,\n}: PropsWithChildren<LegendItemProps>) => {\n  const classes = useCostGrowthLegendStyles();\n  return (\n    <Box display=\"flex\" flexDirection=\"column\">\n      <Box\n        minHeight={25}\n        display=\"flex\"\n        flexDirection=\"row\"\n        alignItems=\"center\"\n      >\n        {markerColor && (\n          <div className={classes.marker}>\n            <LensIcon style={{ fontSize: '1em', fill: markerColor }} />\n          </div>\n        )}\n        <Typography className={classes.title} variant=\"overline\">\n          {title}\n        </Typography>\n        {tooltipText && (\n          <Tooltip\n            classes={{ tooltip: classes.tooltip }}\n            title={\n              <Typography className={classes.tooltipText}>\n                {tooltipText}\n              </Typography>\n            }\n            placement=\"top-start\"\n          >\n            <span role=\"img\" aria-label=\"help\" className={classes.helpIcon}>\n              <HelpOutlineOutlinedIcon fontSize=\"small\" />\n            </span>\n          </Tooltip>\n        )}\n      </Box>\n      <Box marginLeft={markerColor ? '1.5em' : 0}>\n        <Typography className={classes.h5} variant=\"h5\">\n          {children}\n        </Typography>\n      </Box>\n    </Box>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { PropsWithChildren } from 'react';\nimport { Box, useTheme } from '@material-ui/core';\nimport { LegendItem } from '../LegendItem';\nimport { currencyFormatter } from '../../utils/formatters';\nimport { CostInsightsTheme } from '../../types';\nimport { useBarChartLayoutStyles as useStyles } from '../../utils/styles';\n\nexport type BarChartLegendOptions = {\n  previousName: string;\n  previousFill: string;\n  currentName: string;\n  currentFill: string;\n  hideMarker?: boolean;\n};\n\nexport type BarChartLegendProps = {\n  costStart: number;\n  costEnd: number;\n  options?: Partial<BarChartLegendOptions>;\n};\n\nexport const BarChartLegend = ({\n  costStart,\n  costEnd,\n  options = {},\n  children,\n}: PropsWithChildren<BarChartLegendProps>) => {\n  const theme = useTheme<CostInsightsTheme>();\n  const classes = useStyles();\n\n  const data = Object.assign(\n    {\n      previousName: 'Previous',\n      previousFill: theme.palette.lightBlue,\n      currentName: 'Current',\n      currentFill: theme.palette.darkBlue,\n    },\n    options,\n  );\n\n  return (\n    <Box className={classes.legend} display=\"flex\" flexDirection=\"row\">\n      <Box marginRight={2}>\n        <LegendItem\n          title={data.previousName}\n          markerColor={options.hideMarker ? undefined : data.previousFill}\n        >\n          {currencyFormatter.format(costStart)}\n        </LegendItem>\n      </Box>\n      <Box marginRight={2}>\n        <LegendItem\n          title={data.currentName}\n          markerColor={options.hideMarker ? undefined : data.currentFill}\n        >\n          {currencyFormatter.format(costEnd)}\n        </LegendItem>\n      </Box>\n      {children}\n    </Box>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Cost,\n  ChangeStatistic,\n  ChangeThreshold,\n  EngineerThreshold,\n  GrowthType,\n  MetricData,\n  Duration,\n  DateAggregation,\n} from '../types';\nimport { DateTime, Duration as LuxonDuration } from 'luxon';\nimport { inclusiveStartDateOf } from './duration';\nimport { notEmpty } from './assert';\n\n// Used for displaying status colors\nexport function growthOf(change: ChangeStatistic): GrowthType {\n  const exceedsEngineerThreshold = Math.abs(change.amount) >= EngineerThreshold;\n\n  if (notEmpty(change.ratio)) {\n    if (exceedsEngineerThreshold && change.ratio >= ChangeThreshold.upper) {\n      return GrowthType.Excess;\n    }\n\n    if (exceedsEngineerThreshold && change.ratio <= ChangeThreshold.lower) {\n      return GrowthType.Savings;\n    }\n  } else {\n    if (exceedsEngineerThreshold && change.amount > 0) return GrowthType.Excess;\n    if (exceedsEngineerThreshold && change.amount < 0)\n      return GrowthType.Savings;\n  }\n\n  return GrowthType.Negligible;\n}\n\n// Used by <CostOverviewCard /> for displaying engineer totals\nexport function getComparedChange(\n  dailyCost: Cost,\n  metricData: MetricData,\n  duration: Duration,\n  lastCompleteBillingDate: string, // YYYY-MM-DD,\n): ChangeStatistic {\n  const dailyCostRatio = dailyCost.change?.ratio;\n  const metricDataRatio = metricData.change?.ratio;\n  const previousPeriodTotal = getPreviousPeriodTotalCost(\n    dailyCost.aggregation,\n    duration,\n    lastCompleteBillingDate,\n  );\n\n  // if either ratio cannot be calculated, no compared ratio can be calculated\n  if (!notEmpty(dailyCostRatio) || !notEmpty(metricDataRatio)) {\n    return {\n      amount: previousPeriodTotal,\n    };\n  }\n\n  return {\n    ratio: dailyCostRatio - metricDataRatio,\n    amount: previousPeriodTotal * (dailyCostRatio - metricDataRatio),\n  };\n}\n\nexport function getPreviousPeriodTotalCost(\n  aggregation: DateAggregation[],\n  duration: Duration,\n  inclusiveEndDate: string,\n): number {\n  const luxonDuration = LuxonDuration.fromISO(duration);\n  const startDate = inclusiveStartDateOf(duration, inclusiveEndDate);\n  const nextPeriodStart = DateTime.fromISO(startDate).plus(luxonDuration);\n  // Add up costs that incurred before the start of the next period.\n  return aggregation.reduce((acc, costByDate) => {\n    return DateTime.fromISO(costByDate.date) < nextPeriodStart\n      ? acc + costByDate.amount\n      : acc;\n  }, 0);\n}\n\nexport function choose<T>(\n  [savings, excess]: [T, T],\n  change: ChangeStatistic,\n): T {\n  const isSavings = (change.ratio ?? change.amount) <= 0;\n  return isSavings ? savings : excess;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst vowels = {\n  a: 'A',\n  e: 'E',\n  i: 'I',\n  o: 'O',\n  u: 'U',\n};\n\nexport const indefiniteArticleOf = (\n  articles: [string, string],\n  word: string,\n) => {\n  const firstChar = word.charAt(0).toLowerCase();\n  return firstChar in vowels\n    ? `${articles[1]} ${word}`\n    : `${articles[0]} ${word}`;\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport classnames from 'classnames';\nimport {\n  ChangeStatistic,\n  CurrencyType,\n  Duration,\n  EngineerThreshold,\n  GrowthType,\n} from '../../types';\nimport { rateOf } from '../../utils/currency';\nimport { growthOf } from '../../utils/change';\nimport { useCostGrowthStyles as useStyles } from '../../utils/styles';\nimport { formatPercent, formatCurrency } from '../../utils/formatters';\nimport { indefiniteArticleOf } from '../../utils/grammar';\nimport { useConfig, useCurrency } from '../../hooks';\nimport { notEmpty } from '../../utils/assert';\n\nexport type CostGrowthProps = {\n  change: ChangeStatistic;\n  duration: Duration;\n};\n\nexport const CostGrowth = ({ change, duration }: CostGrowthProps) => {\n  const styles = useStyles();\n  const { engineerCost } = useConfig();\n  const [currency] = useCurrency();\n\n  // Only display costs in absolute values\n  const amount = Math.abs(change.amount);\n  const ratio = Math.abs(change.ratio ?? NaN);\n\n  const rate = rateOf(engineerCost, duration);\n  const engineers = amount / rate;\n  const converted = amount / (currency.rate ?? rate);\n\n  // If a ratio cannot be calculated, don't format.\n  const growth = notEmpty(change.ratio)\n    ? growthOf({ ratio: change.ratio, amount: engineers })\n    : null;\n  // Determine if growth is significant enough to highlight\n  const classes = classnames({\n    [styles.excess]: growth === GrowthType.Excess,\n    [styles.savings]: growth === GrowthType.Savings,\n  });\n\n  if (engineers < EngineerThreshold) {\n    return <span className={classes}>Negligible</span>;\n  }\n\n  if (currency.kind === CurrencyType.USD) {\n    // Do not display percentage if ratio cannot be calculated\n    if (isNaN(ratio)) {\n      return (\n        <span className={classes}>\n          ~{currency.prefix}\n          {formatCurrency(converted)}\n        </span>\n      );\n    }\n\n    return (\n      <span className={classes}>\n        {formatPercent(ratio)} or ~{currency.prefix}\n        {formatCurrency(converted)}\n      </span>\n    );\n  }\n\n  if (amount < 1) {\n    return (\n      <span className={classes}>\n        less than {indefiniteArticleOf(['a', 'an'], currency.unit)}\n      </span>\n    );\n  }\n\n  // Do not display percentage if ratio cannot be calculated\n  if (isNaN(ratio)) {\n    return (\n      <span className={classes}>\n        ~{formatCurrency(converted, currency.unit)}\n      </span>\n    );\n  }\n\n  return (\n    <span className={classes}>\n      {formatPercent(ratio)} or ~{formatCurrency(converted, currency.unit)}\n    </span>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport classnames from 'classnames';\nimport { Typography, TypographyProps } from '@material-ui/core';\nimport { default as ArrowDropUp } from '@material-ui/icons/ArrowDropUp';\nimport { default as ArrowDropDown } from '@material-ui/icons/ArrowDropDown';\nimport { growthOf } from '../../utils/change';\nimport { ChangeStatistic, GrowthType, Maybe } from '../../types';\nimport { useCostGrowthStyles as useStyles } from '../../utils/styles';\n\nexport type CostGrowthIndicatorProps = TypographyProps & {\n  change: ChangeStatistic;\n  formatter?: (change: ChangeStatistic) => Maybe<string>;\n};\n\nexport const CostGrowthIndicator = ({\n  change,\n  formatter,\n  className,\n  ...props\n}: CostGrowthIndicatorProps) => {\n  const classes = useStyles();\n  const growth = growthOf(change);\n\n  const classNames = classnames(classes.indicator, className, {\n    [classes.excess]: growth === GrowthType.Excess,\n    [classes.savings]: growth === GrowthType.Savings,\n  });\n\n  return (\n    <Typography className={classNames} component=\"span\" {...props}>\n      {formatter ? formatter(change) : change.ratio}\n      {growth === GrowthType.Excess && <ArrowDropUp aria-label=\"excess\" />}\n      {growth === GrowthType.Savings && <ArrowDropDown aria-label=\"savings\" />}\n    </Typography>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { MapFiltersToProps } from '../../hooks/useFilters';\nimport { MapLoadingToProps } from '../../hooks/useLoading';\nimport { Group, PageFilters } from '../../types';\nimport { getResetStateWithoutInitial } from '../../utils/loading';\n\ntype CostInsightsTabsFilterProps = PageFilters & {\n  setGroup: (group: Group) => void;\n};\n\ntype CostInsightsTabsLoadingProps = {\n  loadingActions: Array<string>;\n  dispatchReset: (loadingActions: string[]) => void;\n};\n\nexport const mapFiltersToProps: MapFiltersToProps<CostInsightsTabsFilterProps> =\n  ({ pageFilters, setPageFilters }) => ({\n    ...pageFilters,\n    setGroup: (group: Group) =>\n      setPageFilters({\n        ...pageFilters,\n        group: group.id,\n        project: null,\n      }),\n  });\n\nexport const mapLoadingToProps: MapLoadingToProps<CostInsightsTabsLoadingProps> =\n  ({ actions, dispatch }) => ({\n    loadingActions: actions,\n    dispatchReset: (loadingActions: string[]) =>\n      dispatch(getResetStateWithoutInitial(loadingActions)),\n  });\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState } from 'react';\nimport { Menu, MenuItem, Tab, Tabs, Typography } from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { mapLoadingToProps, mapFiltersToProps } from './selector';\nimport { Group } from '../../types';\nimport { useFilters, useLoading } from '../../hooks';\nimport { useCostInsightsTabsStyles as useStyles } from '../../utils/styles';\n\nexport type CostInsightsTabsProps = {\n  groups: Group[];\n};\n\nexport const CostInsightsTabs = ({ groups }: CostInsightsTabsProps) => {\n  const classes = useStyles();\n  const [index] = useState(0); // index is fixed for now until other tabs are added\n  const [groupMenuEl, setGroupMenuEl] = useState<Element | null>(null);\n  const { group, setGroup } = useFilters(mapFiltersToProps);\n  const { loadingActions, dispatchReset } = useLoading(mapLoadingToProps);\n\n  const openGroupMenu = (e: any) => setGroupMenuEl(e.currentTarget as Element);\n\n  const closeGroupMenu = () => setGroupMenuEl(null);\n\n  const updateGroupFilterAndCloseMenu = (g: Group) => () => {\n    dispatchReset(loadingActions);\n    closeGroupMenu();\n    setGroup(g);\n  };\n\n  const renderTabLabel = () => (\n    <div className={classes.tabLabel}>\n      <Typography className={classes.tabLabelText} variant=\"overline\">\n        {`${groups.length} teams`}\n      </Typography>\n      <ExpandMoreIcon fontSize=\"small\" />\n    </div>\n  );\n\n  const hasAtLeastTwoGroups = groups.length >= 2;\n\n  if (!hasAtLeastTwoGroups) return null;\n\n  return (\n    <>\n      <Tabs\n        className={`cost-insights-tabs ${classes.tabs}`}\n        data-testid=\"cost-insights-tabs\"\n        classes={{ indicator: classes.indicator }}\n        value={index}\n      >\n        <Tab\n          className={classes.tab}\n          data-testid=\"cost-insights-groups-tab\"\n          key=\"cost-insights-groups-tab\"\n          label={renderTabLabel()}\n          onClick={openGroupMenu}\n          component=\"button\"\n        />\n      </Tabs>\n      <Menu\n        id=\"group-menu\"\n        data-testid=\"group-menu\"\n        className={classes.menu}\n        getContentAnchorEl={null}\n        anchorEl={groupMenuEl}\n        keepMounted\n        open={Boolean(groupMenuEl)}\n        onClose={closeGroupMenu}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'left',\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'left',\n        }}\n      >\n        {groups.map((g: Group) => (\n          <MenuItem\n            className={classes.menuItem}\n            classes={{ selected: classes.menuItemSelected }}\n            selected={g.id === group}\n            key={g.id}\n            data-testid={g.id}\n            onClick={updateGroupFilterAndCloseMenu(g)}\n          >\n            {g.id}\n          </MenuItem>\n        ))}\n      </Menu>\n    </>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { PropsWithChildren } from 'react';\nimport { makeStyles } from '@material-ui/core';\nimport { Group } from '../../types';\nimport { CostInsightsTabs } from '../CostInsightsTabs';\nimport { Header, Page } from '@backstage/core-components';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    gridArea: 'pageContent',\n  },\n  header: {\n    boxShadow: 'none',\n  },\n  content: {\n    padding: theme.spacing(4),\n  },\n}));\n\ntype CostInsightsLayoutProps = {\n  title?: string;\n  groups: Group[];\n};\n\nexport const CostInsightsLayout = ({\n  groups,\n  children,\n}: PropsWithChildren<CostInsightsLayoutProps>) => {\n  const classes = useStyles();\n  return (\n    <Page themeId=\"tool\">\n      <Header\n        style={{ boxShadow: 'none' }}\n        title=\"Cost Insights\"\n        pageTitleOverride=\"Cost Insights\"\n        type=\"Tool\"\n      />\n      <div className={classes.root}>\n        <CostInsightsTabs groups={groups} />\n        <div className={classes.content}>{children}</div>\n      </div>\n    </Page>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport {\n  Collapse,\n  MenuList,\n  MenuItem,\n  ListItemIcon,\n  ListItemText,\n  Typography,\n  Badge,\n} from '@material-ui/core';\nimport { useNavigationStyles as useStyles } from '../../utils/styles';\nimport { useConfig, useScroll } from '../../hooks';\nimport { findAlways } from '../../utils/assert';\nimport {\n  DefaultNavigation,\n  NavigationItem,\n  getDefaultNavigationItems,\n} from '../../utils/navigation';\nimport { Maybe, Product } from '../../types';\n\ntype CostInsightsNavigationProps = {\n  alerts: number;\n  products: Maybe<Product[]>;\n};\n\nconst NavigationMenuItem = ({ navigation, icon, title }: NavigationItem) => {\n  const classes = useStyles();\n  const [, setScroll] = useScroll();\n  return (\n    <MenuItem\n      button\n      data-testid={`menu-item-${navigation}`}\n      className={classes.menuItem}\n      onClick={() => setScroll(navigation)}\n    >\n      <ListItemIcon className={classes.listItemIcon}>{icon}</ListItemIcon>\n      <ListItemText\n        primary={<Typography className={classes.title}>{title}</Typography>}\n      />\n    </MenuItem>\n  );\n};\n\nexport const CostInsightsNavigation = React.memo(\n  ({ alerts, products }: CostInsightsNavigationProps) => {\n    const classes = useStyles();\n    const { icons } = useConfig();\n    const [isOpen, setOpen] = useState(false);\n\n    const defaultNavigationItems = getDefaultNavigationItems(alerts);\n    const productNavigationItems: NavigationItem[] =\n      products?.map(product => ({\n        title: product.name,\n        navigation: product.kind,\n        icon: findAlways(icons, i => i.kind === product.kind).component,\n      })) ?? [];\n\n    useEffect(\n      function toggleProductMenuItems() {\n        if (products?.length) {\n          setOpen(true);\n        } else {\n          setOpen(false);\n        }\n      },\n      [products],\n    );\n\n    return (\n      <MenuList className={classes.menuList}>\n        {defaultNavigationItems.map(item => (\n          <NavigationMenuItem\n            key={`navigation-menu-item-${item.navigation}`}\n            navigation={item.navigation}\n            title={item.title}\n            icon={\n              item.navigation === DefaultNavigation.AlertInsightsHeader ? (\n                <Badge badgeContent={alerts} color=\"secondary\">\n                  {React.cloneElement(item.icon, {\n                    className: classes.navigationIcon,\n                  })}\n                </Badge>\n              ) : (\n                React.cloneElement(item.icon, {\n                  className: classes.navigationIcon,\n                })\n              )\n            }\n          />\n        ))}\n        <Collapse in={isOpen} timeout={850}>\n          {productNavigationItems.map((item: NavigationItem) => (\n            <NavigationMenuItem\n              key={`navigation-menu-item-${item.navigation}`}\n              navigation={item.navigation}\n              icon={React.cloneElement(item.icon, {\n                className: classes.navigationIcon,\n              })}\n              title={item.title}\n            />\n          ))}\n        </Collapse>\n      </MenuList>\n    );\n  },\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport classnames from 'classnames';\nimport { Typography } from '@material-ui/core';\nimport { costFormatter, formatChange } from '../../utils/formatters';\nimport { useEntityDialogStyles as useStyles } from '../../utils/styles';\nimport { CostGrowthIndicator } from '../CostGrowth';\nimport { BarChartOptions, ChangeStatistic, Entity } from '../../types';\nimport { Table, TableColumn } from '@backstage/core-components';\n\nexport type ProductEntityTableOptions = Partial<\n  Pick<BarChartOptions, 'previousName' | 'currentName'>\n>;\n\ntype RowData = {\n  id: string;\n  label: string;\n  previous: number;\n  current: number;\n  change: ChangeStatistic;\n};\n\nfunction createRenderer(col: keyof RowData, classes: Record<string, string>) {\n  return function render(rowData: {}): JSX.Element {\n    const row = rowData as RowData;\n    const rowStyles = classnames(classes.row, {\n      [classes.rowTotal]: row.id === 'total',\n      [classes.colFirst]: col === 'label',\n      [classes.colLast]: col === 'change',\n    });\n\n    switch (col) {\n      case 'previous':\n      case 'current':\n        return (\n          <Typography className={rowStyles}>\n            {costFormatter.format(row[col])}\n          </Typography>\n        );\n      case 'change':\n        return (\n          <CostGrowthIndicator\n            className={rowStyles}\n            change={row.change}\n            formatter={formatChange}\n          />\n        );\n      default:\n        return <Typography className={rowStyles}>{row.label}</Typography>;\n    }\n  };\n}\n\n// material-table does not support fixed rows. Override the sorting algorithm\n// to force Total row to bottom by default or when a user sort toggles a column.\nfunction createSorter(field?: keyof Omit<RowData, 'id'>) {\n  return function rowSort(data1: {}, data2: {}): number {\n    const a = data1 as RowData;\n    const b = data2 as RowData;\n    if (a.id === 'total') return 1;\n    if (b.id === 'total') return 1;\n    if (field === 'label') return a.label.localeCompare(b.label);\n    if (field === 'change') {\n      if (formatChange(a[field]) === '∞' || formatChange(b[field]) === '-∞')\n        return 1;\n      if (formatChange(a[field]) === '-∞' || formatChange(b[field]) === '∞')\n        return -1;\n      return a[field].ratio! - b[field].ratio!;\n    }\n\n    return b.previous + b.current - (a.previous + a.current);\n  };\n}\n\ntype ProductEntityTableProps = {\n  entityLabel: string;\n  entity: Entity;\n  options: ProductEntityTableOptions;\n};\n\nexport const ProductEntityTable = ({\n  entityLabel,\n  entity,\n  options,\n}: ProductEntityTableProps) => {\n  const classes = useStyles();\n  const entities = entity.entities[entityLabel];\n\n  const data = Object.assign(\n    {\n      previousName: 'Previous',\n      currentName: 'Current',\n    },\n    options,\n  );\n\n  const firstColClasses = classnames(classes.column, classes.colFirst);\n  const lastColClasses = classnames(classes.column, classes.colLast);\n\n  const columns: TableColumn[] = [\n    {\n      field: 'label',\n      title: <Typography className={firstColClasses}>{entityLabel}</Typography>,\n      render: createRenderer('label', classes),\n      customSort: createSorter('label'),\n      width: '33.33%',\n    },\n    {\n      field: 'previous',\n      title: (\n        <Typography className={classes.column}>{data.previousName}</Typography>\n      ),\n      align: 'right',\n      render: createRenderer('previous', classes),\n      customSort: createSorter('previous'),\n    },\n    {\n      field: 'current',\n      title: (\n        <Typography className={classes.column}>{data.currentName}</Typography>\n      ),\n      align: 'right',\n      render: createRenderer('current', classes),\n      customSort: createSorter('current'),\n    },\n    {\n      field: 'change',\n      title: <Typography className={lastColClasses}>Change</Typography>,\n      align: 'right',\n      render: createRenderer('change', classes),\n      customSort: createSorter('change'),\n    },\n  ];\n\n  const rowData: RowData[] = entities\n    .map(e => ({\n      id: e.id || 'Unknown',\n      label: e.id || 'Unknown',\n      previous: e.aggregation[0],\n      current: e.aggregation[1],\n      change: e.change,\n    }))\n    .concat({\n      id: 'total',\n      label: 'Total',\n      previous: entity.aggregation[0],\n      current: entity.aggregation[1],\n      change: entity.change,\n    })\n    .sort(createSorter());\n\n  return (\n    <Table\n      columns={columns}\n      data={rowData}\n      title={entity.id || 'Unlabeled'}\n      options={{\n        paging: false,\n        search: false,\n        hideFilterIcons: true,\n      }}\n    />\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState } from 'react';\nimport { Dialog, IconButton } from '@material-ui/core';\nimport { default as CloseButton } from '@material-ui/icons/Close';\nimport { useEntityDialogStyles as useStyles } from '../../utils/styles';\nimport { Entity } from '../../types';\nimport {\n  ProductEntityTable,\n  ProductEntityTableOptions,\n} from './ProductEntityTable';\nimport { findAlways } from '../../utils/assert';\nimport { HeaderTabs } from '@backstage/core-components';\n\ntype ProductEntityDialogProps = {\n  open: boolean;\n  entity: Entity;\n  options?: ProductEntityTableOptions;\n  onClose: () => void;\n};\n\nexport const ProductEntityDialog = ({\n  open,\n  entity,\n  options = {},\n  onClose,\n}: ProductEntityDialogProps) => {\n  const classes = useStyles();\n  const labels = Object.keys(entity.entities);\n  const [selectedLabel, setSelectedLabel] = useState(\n    findAlways(labels, _ => true),\n  );\n\n  const tabs = labels.map((label, index) => ({\n    id: index.toString(),\n    label: `Breakdown by ${label}`,\n  }));\n\n  return (\n    <Dialog open={open} onClose={onClose} scroll=\"body\" fullWidth maxWidth=\"lg\">\n      <IconButton className={classes.closeButton} onClick={onClose}>\n        <CloseButton />\n      </IconButton>\n      <HeaderTabs\n        tabs={tabs}\n        onChange={index => setSelectedLabel(labels[index])}\n      />\n      <ProductEntityTable\n        entityLabel={selectedLabel}\n        entity={entity}\n        options={options}\n      />\n    </Dialog>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useMemo, useState } from 'react';\nimport {\n  ContentRenderer,\n  TooltipProps as RechartsTooltipProps,\n  RechartsFunction,\n} from 'recharts';\nimport pluralize from 'pluralize';\nimport { Box, Typography } from '@material-ui/core';\nimport { default as FullScreenIcon } from '@material-ui/icons/Fullscreen';\nimport { LegendItem } from '../LegendItem';\nimport { ProductEntityDialog } from './ProductEntityDialog';\nimport { CostGrowth, CostGrowthIndicator } from '../CostGrowth';\nimport {\n  BarChart,\n  BarChartLegend,\n  BarChartTooltip,\n  BarChartTooltipItem,\n  BarChartLegendOptions,\n} from '../BarChart';\nimport {\n  findAlways,\n  notEmpty,\n  isUndefined,\n  findAnyKey,\n  assertAlways,\n} from '../../utils/assert';\nimport { formatPeriod, formatChange } from '../../utils/formatters';\nimport {\n  titleOf,\n  tooltipItemOf,\n  resourceOf,\n  isInvalid,\n  isLabeled,\n  isUnlabeled,\n} from '../../utils/graphs';\nimport {\n  useProductInsightsChartStyles as useStyles,\n  useBarChartLayoutStyles as useLayoutStyles,\n} from '../../utils/styles';\nimport { Duration, Entity, Maybe } from '../../types';\nimport { choose } from '../../utils/change';\n\nexport type ProductInsightsChartProps = {\n  billingDate: string;\n  entity: Entity;\n  duration: Duration;\n};\n\nexport const ProductInsightsChart = ({\n  billingDate,\n  entity,\n  duration,\n}: ProductInsightsChartProps) => {\n  const classes = useStyles();\n  const layoutClasses = useLayoutStyles();\n\n  // Only a single entities Record for the root product entity is supported\n  const entities = useMemo(() => {\n    const entityLabel = assertAlways(findAnyKey(entity.entities));\n    return entity.entities[entityLabel] ?? [];\n  }, [entity]);\n\n  const [activeLabel, setActive] = useState<Maybe<string>>();\n  const [selectLabel, setSelected] = useState<Maybe<string>>();\n  const isSelected = useMemo(() => !isUndefined(selectLabel), [selectLabel]);\n\n  const isClickable = useMemo(() => {\n    const breakdowns = Object.keys(\n      entities.find(e => e.id === activeLabel)?.entities ?? {},\n    );\n    return breakdowns.length > 0;\n  }, [entities, activeLabel]);\n\n  const costStart = entity.aggregation[0];\n  const costEnd = entity.aggregation[1];\n  const resources = entities.map(resourceOf);\n\n  const options: Partial<BarChartLegendOptions> = {\n    previousName: formatPeriod(duration, billingDate, false),\n    currentName: formatPeriod(duration, billingDate, true),\n  };\n\n  const onMouseMove: RechartsFunction = (\n    data: Record<'activeLabel', string | undefined>,\n  ) => {\n    if (isLabeled(data)) {\n      setActive(data.activeLabel!);\n    } else if (isUnlabeled(data)) {\n      setActive(null);\n    } else {\n      setActive(undefined);\n    }\n  };\n\n  const onClick: RechartsFunction = (data: Record<'activeLabel', string>) => {\n    if (isLabeled(data)) {\n      setSelected(data.activeLabel);\n    } else if (isUnlabeled(data)) {\n      setSelected(null);\n    } else {\n      setSelected(undefined);\n    }\n  };\n\n  const renderProductInsightsTooltip: ContentRenderer<RechartsTooltipProps> = ({\n    label,\n    payload = [],\n  }) => {\n    /* Labels and payloads may be undefined or empty */\n    if (isInvalid({ label, payload })) return null;\n\n    /*\n     *  recharts coerces null values to strings\n     *  entity       -> resource       -> payload\n     *  { id: null } -> { name: null } -> { label: '' }\n     */\n    const id = label === '' ? null : label;\n\n    const title = titleOf(label);\n    const items = payload.map(tooltipItemOf).filter(notEmpty);\n\n    const activeEntity = findAlways(entities, e => e.id === id);\n    const breakdowns = Object.keys(activeEntity.entities);\n\n    if (breakdowns.length) {\n      const subtitle = breakdowns\n        .map(b => pluralize(b, activeEntity.entities[b].length, true))\n        .join(', ');\n      return (\n        <BarChartTooltip\n          title={title}\n          subtitle={subtitle}\n          topRight={\n            !!activeEntity.change.ratio && (\n              <CostGrowthIndicator\n                formatter={formatChange}\n                change={activeEntity.change}\n                className={classes.indicator}\n              />\n            )\n          }\n          actions={\n            <Box className={classes.actions}>\n              <FullScreenIcon />\n              <Typography>Click for breakdown</Typography>\n            </Box>\n          }\n        >\n          {items.map((item, index) => (\n            <BarChartTooltipItem key={`${item.label}-${index}`} item={item} />\n          ))}\n        </BarChartTooltip>\n      );\n    }\n\n    // If an entity doesn't have any sub-entities, there aren't any costs to break down.\n    return (\n      <BarChartTooltip\n        title={title}\n        topRight={\n          !!activeEntity.change.ratio && (\n            <CostGrowthIndicator\n              formatter={formatChange}\n              change={activeEntity.change}\n              className={classes.indicator}\n            />\n          )\n        }\n        content={\n          id\n            ? null\n            : \"This product has costs that are not labeled and therefore can't be attributed to a specific entity.\"\n        }\n      >\n        {items.map((item, index) => (\n          <BarChartTooltipItem key={`${item.label}-${index}`} item={item} />\n        ))}\n      </BarChartTooltip>\n    );\n  };\n\n  const barChartProps = isClickable ? { onClick } : {};\n\n  return (\n    <Box className={layoutClasses.wrapper}>\n      <BarChartLegend costStart={costStart} costEnd={costEnd} options={options}>\n        <LegendItem\n          title={choose(['Cost Savings', 'Cost Excess'], entity.change)}\n        >\n          <CostGrowth change={entity.change} duration={duration} />\n        </LegendItem>\n      </BarChartLegend>\n      <BarChart\n        resources={resources}\n        tooltip={renderProductInsightsTooltip}\n        onMouseMove={onMouseMove}\n        options={options}\n        {...barChartProps}\n      />\n      {isSelected && entities.length && (\n        <ProductEntityDialog\n          open={isSelected}\n          onClose={() => setSelected(undefined)}\n          entity={findAlways(entities, e => e.id === selectLabel)}\n          options={options}\n        />\n      )}\n    </Box>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { DateTime } from 'luxon';\nimport { Box } from '@material-ui/core';\nimport { BarChart, BarChartLegend, BarChartLegendOptions } from '../BarChart';\nimport { LegendItem } from '../LegendItem';\nimport { CostGrowth } from '../CostGrowth';\nimport { Duration, ProjectGrowthData } from '../../types';\nimport { useBarChartLayoutStyles as useStyles } from '../../utils/styles';\nimport { resourceOf } from '../../utils/graphs';\n\ntype ProjectGrowthAlertChartProps = {\n  alert: ProjectGrowthData;\n};\n\nexport const ProjectGrowthAlertChart = ({\n  alert,\n}: ProjectGrowthAlertChartProps) => {\n  const classes = useStyles();\n\n  const costStart = alert.aggregation[0];\n  const costEnd = alert.aggregation[1];\n  const resourceData = alert.products.map(resourceOf);\n\n  const options: Partial<BarChartLegendOptions> = {\n    previousName: DateTime.fromFormat(alert.periodStart, \"yyyy-'Q'q\").toFormat(\n      \"'Q'q yyyy\",\n    ),\n    currentName: DateTime.fromFormat(alert.periodEnd, \"yyyy-'Q'q\").toFormat(\n      \"'Q'q yyyy\",\n    ),\n  };\n\n  return (\n    <Box className={classes.wrapper}>\n      <BarChartLegend costStart={costStart} costEnd={costEnd} options={options}>\n        <LegendItem title=\"Cost Growth\">\n          <CostGrowth change={alert.change} duration={Duration.P3M} />\n        </LegendItem>\n      </BarChartLegend>\n      <BarChart resources={resourceData} options={options} />\n    </Box>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport pluralize from 'pluralize';\nimport { ProjectGrowthAlertChart } from './ProjectGrowthAlertChart';\nimport { ProjectGrowthData } from '../../types';\nimport { InfoCard } from '@backstage/core-components';\n\ntype ProjectGrowthAlertProps = {\n  alert: ProjectGrowthData;\n};\n\nexport const ProjectGrowthAlertCard = ({ alert }: ProjectGrowthAlertProps) => {\n  const subheader = `\n    ${pluralize('product', alert.products.length, true)}${\n    alert.products.length > 1 ? ', sorted by cost' : ''\n  }`;\n\n  return (\n    <InfoCard\n      title={`Project growth for ${alert.project}`}\n      subheader={subheader}\n    >\n      <ProjectGrowthAlertChart alert={alert} />\n    </InfoCard>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { ProjectGrowthAlertCard } from '../components/ProjectGrowthAlertCard';\nimport { Alert, ProjectGrowthData } from '../types';\n\n/**\n * The alert below is an example of an Alert implementation; the CostInsightsApi permits returning\n * any implementation of the Alert type, so adopters can create their own. The CostInsightsApi\n * fetches alert data from the backend, then creates Alert classes with the data.\n */\n\nexport class ProjectGrowthAlert implements Alert {\n  data: ProjectGrowthData;\n\n  constructor(data: ProjectGrowthData) {\n    this.data = data;\n  }\n\n  get url() {\n    return '/cost-insights/investigating-growth';\n  }\n\n  get title() {\n    return `Investigate cost growth in project ${this.data.project}`;\n  }\n\n  get subtitle() {\n    return 'Cost growth outpacing business growth is unsustainable long-term.';\n  }\n\n  get element() {\n    return <ProjectGrowthAlertCard alert={this.data} />;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport pluralize from 'pluralize';\nimport { Box } from '@material-ui/core';\nimport { BarChart, BarChartLegend } from '../BarChart';\nimport { UnlabeledDataflowData, ResourceData } from '../../types';\nimport { useBarChartLayoutStyles as useStyles } from '../../utils/styles';\nimport { InfoCard } from '@backstage/core-components';\n\ntype UnlabeledDataflowAlertProps = {\n  alert: UnlabeledDataflowData;\n};\n\nexport const UnlabeledDataflowAlertCard = ({\n  alert,\n}: UnlabeledDataflowAlertProps) => {\n  const classes = useStyles();\n  const projects = pluralize('project', alert.projects.length, true);\n  const subheader = `\n    Showing costs from ${projects} with unlabeled Dataflow jobs in the last 30 days.\n  `;\n  const options = {\n    previousName: 'Unlabeled Cost',\n    currentName: 'Labeled Cost',\n  };\n\n  const resources: ResourceData[] = alert.projects.map(project => ({\n    name: project.id,\n    previous: project.unlabeledCost,\n    current: project.labeledCost,\n  }));\n\n  return (\n    <InfoCard title=\"Label Dataflow\" subheader={subheader}>\n      <Box className={classes.wrapper}>\n        <BarChartLegend\n          costStart={alert.unlabeledCost}\n          costEnd={alert.labeledCost}\n          options={options}\n        />\n        <BarChart resources={resources} options={options} />\n      </Box>\n    </InfoCard>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { UnlabeledDataflowAlertCard } from '../components/UnlabeledDataflowAlertCard';\nimport { Alert, AlertStatus, UnlabeledDataflowData } from '../types';\n\n/**\n * The alert below is an example of an Alert implementation; the CostInsightsApi permits returning\n * any implementation of the Alert type, so adopters can create their own. The CostInsightsApi\n * fetches alert data from the backend, then creates Alert classes with the data.\n */\n\nexport class UnlabeledDataflowAlert implements Alert {\n  data: UnlabeledDataflowData;\n  status?: AlertStatus;\n\n  constructor(data: UnlabeledDataflowData) {\n    this.data = data;\n  }\n\n  get url() {\n    return '/cost-insights/labeling-jobs';\n  }\n\n  get title() {\n    return 'Add labels to workflows';\n  }\n\n  get subtitle() {\n    return 'Labels show in billing data, enabling cost insights for each workflow.';\n  }\n\n  get element() {\n    return <UnlabeledDataflowAlertCard alert={this.data} />;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { DateTime } from 'luxon';\nimport { Box, Typography } from '@material-ui/core';\nimport { AlertInstructionsLayout } from '../AlertInstructionsLayout';\nimport { ProductInsightsChart } from '../ProductInsightsCard';\nimport {\n  Alert,\n  DEFAULT_DATE_FORMAT,\n  Duration,\n  Entity,\n  Product,\n  ProjectGrowthData,\n} from '../../types';\nimport { ProjectGrowthAlert } from '../../alerts';\nimport { InfoCard } from '@backstage/core-components';\n\nconst today = DateTime.now().toFormat(DEFAULT_DATE_FORMAT);\n\nexport const ProjectGrowthInstructionsPage = () => {\n  const alertData: ProjectGrowthData = {\n    project: 'example-project',\n    periodStart: 'Q1 2020',\n    periodEnd: 'Q2 2020',\n    aggregation: [60000, 120000],\n    change: {\n      ratio: 1,\n      amount: 60000,\n    },\n    products: [\n      {\n        id: 'Compute Engine',\n        aggregation: [58000, 118000],\n      },\n      {\n        id: 'Cloud Dataflow',\n        aggregation: [1200, 1500],\n      },\n      {\n        id: 'Cloud Storage',\n        aggregation: [800, 500],\n      },\n    ],\n  };\n\n  const projectGrowthAlert: Alert = new ProjectGrowthAlert(alertData);\n\n  const product: Product = {\n    kind: 'ComputeEngine',\n    name: 'Compute Engine',\n  };\n\n  const entity: Entity = {\n    id: 'example-id',\n    aggregation: [20_000, 60_000],\n    change: {\n      ratio: 3,\n      amount: 40_000,\n    },\n    entities: {\n      service: [\n        {\n          id: 'service-one',\n          aggregation: [18_200, 58_500],\n          entities: {},\n          change: { ratio: 2.21, amount: 40_300 },\n        },\n        {\n          id: 'service-two',\n          aggregation: [1200, 1300],\n          entities: {},\n          change: { ratio: 0.083, amount: 100 },\n        },\n        {\n          id: 'service-three',\n          aggregation: [600, 200],\n          entities: {},\n          change: { ratio: -0.666, amount: -400 },\n        },\n      ],\n    },\n  };\n\n  return (\n    <AlertInstructionsLayout title=\"Investigating Growth\">\n      <Typography variant=\"h1\">Investigating cloud cost growth</Typography>\n      <Typography paragraph>\n        Cost Insights shows an alert when costs for a particular billing entity,\n        such as a GCP project, have grown at a rate faster than our alerting\n        threshold. The responsible team should follow this guide to decide\n        whether this warrants further investigation.\n      </Typography>\n\n      <Box mt={4}>\n        <Typography variant=\"h3\">Is the growth expected?</Typography>\n        <Typography paragraph>\n          The first question to ask is whether growth is expected. Perhaps a new\n          product has been deployed, or additional regions added for\n          reliability.\n        </Typography>\n        <Typography paragraph>\n          Many services increase cost linearly with load. Has the demand\n          increased? This may happen as you open new markets, or run marketing\n          offers. Costs should be compared against a business metric, such as\n          daily users, to normalize natural increases from business growth.\n        </Typography>\n        <Typography paragraph>\n          Seasonal variance may also cause cost growth; yearly campaigns, an\n          increase in demand during certain times of year.\n        </Typography>\n        <Typography paragraph>\n          Cloud costs will often go up before they go down, in the case of\n          migrations. Teams moving to new infrastructure may run in both the old\n          and new environment during the migration.\n        </Typography>\n      </Box>\n\n      <Box mt={4}>\n        <Typography variant=\"h3\">Is the growth significant?</Typography>\n        <Typography paragraph>\n          Next, evaluate whether the growth is significant. This helps avoid\n          premature optimization, where cost in engineering time is more than\n          would be saved from the optimization over a reasonable time frame.\n        </Typography>\n        <Typography paragraph>\n          We recommend reframing the cost growth itself in terms of engineering\n          time. How much engineering time, for an <i>average</i> fully-loaded\n          engineer cost at the company, is being overspent each month? Compare\n          this to expected engineering time for optimization to decide whether\n          the optimization is worthwhile.\n        </Typography>\n      </Box>\n\n      <Box mt={4}>\n        <Typography variant=\"h3\">\n          Identifying which cloud product contributed most\n        </Typography>\n        <Typography paragraph>\n          For projects meeting the alert threshold, Cost Insights shows a cost\n          comparison of cloud products over the examined time period:\n        </Typography>\n        <Box mt={2} mb={2}>\n          {projectGrowthAlert.element}\n        </Box>\n        <Typography paragraph>\n          This allows you to quickly see which cloud products contributed to the\n          growth in cloud costs.\n        </Typography>\n      </Box>\n\n      <Box mt={4}>\n        <Typography variant=\"h3\">\n          Identifying the responsible workload\n        </Typography>\n        <Typography paragraph>\n          After identifying the cloud product, use the corresponding product\n          panel in Cost Insights to find a particular workload (or <i>entity</i>\n          ) that has grown in cost:\n        </Typography>\n        <Box mt={2} mb={2}>\n          <InfoCard title={product.name} subheader=\"3 entities, sorted by cost\">\n            <ProductInsightsChart\n              billingDate={today}\n              duration={Duration.P3M}\n              entity={entity}\n            />\n          </InfoCard>\n        </Box>\n        <Typography paragraph>\n          From here, you can dig into commit history or deployment logs to find\n          probable causes of an unexpected spike in cost.\n        </Typography>\n      </Box>\n\n      <Box mt={4}>\n        <Typography variant=\"h3\">Optimizing the workload</Typography>\n        <Typography paragraph>\n          Workload optimization varies between cloud products, but there are a\n          few general optimization areas to consider:\n        </Typography>\n        <Typography variant=\"h5\">Retention</Typography>\n        <Typography paragraph>\n          Is the workload or storage necessary? Truly idle or unused resources\n          can be cleaned up for immediate cost savings. For storage, how long do\n          we need the data? Many cloud products support retention policies to\n          automatically delete data after a certain time period.\n        </Typography>\n        <Typography variant=\"h5\">Efficiency</Typography>\n        <Typography paragraph>\n          Is the workload using cloud resources efficiently? For compute\n          resources, do the utilization metrics look reasonable? Autoscaling\n          infrastructure, such as Kubernetes, can run workloads more efficiently\n          without compromising reliability.\n        </Typography>\n        <Typography variant=\"h5\">Lifecycle</Typography>\n        <Typography paragraph>\n          Is the workload using an optimal pricing model? Some cloud products\n          offer better pricing for data that is accessed less frequently.\n        </Typography>\n      </Box>\n    </AlertInstructionsLayout>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Box, useTheme } from '@material-ui/core';\nimport { CostGrowth, LegendItem } from '../../../components';\nimport { ChangeStatistic, CostInsightsTheme, Duration } from '../../../types';\nimport { monthOf } from '../../../utils/formatters';\n\nexport type MigrationBarChartLegendProps = {\n  change: ChangeStatistic;\n  startDate: string;\n  currentProduct: string;\n  comparedProduct: string;\n};\n\nexport const KubernetesMigrationBarChartLegend = ({\n  currentProduct,\n  comparedProduct,\n  change,\n  startDate,\n}: MigrationBarChartLegendProps) => {\n  const theme = useTheme<CostInsightsTheme>();\n  return (\n    <Box display=\"flex\" flexDirection=\"row\">\n      <Box marginRight={2}>\n        <LegendItem\n          title={monthOf(startDate)}\n          markerColor={theme.palette.magenta}\n        >\n          {currentProduct}\n        </LegendItem>\n      </Box>\n      <Box marginRight={2}>\n        <LegendItem title=\"Estimated Cost\" markerColor={theme.palette.yellow}>\n          {comparedProduct}\n        </LegendItem>\n      </Box>\n      <LegendItem title=\"Total Savings\">\n        <CostGrowth change={change} duration={Duration.P30D} />\n      </LegendItem>\n    </Box>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { BarChart } from '../../../components';\nimport {\n  BarChartOptions,\n  CostInsightsTheme,\n  Entity,\n  ResourceData,\n} from '../../../types';\nimport { useTheme } from '@material-ui/core';\n\ntype MigrationBarChartProps = {\n  currentProduct: string;\n  comparedProduct: string;\n  services: Array<Entity>;\n};\n\nexport const KubernetesMigrationBarChart = ({\n  currentProduct,\n  comparedProduct,\n  services,\n}: MigrationBarChartProps) => {\n  const theme = useTheme<CostInsightsTheme>();\n\n  const options: BarChartOptions = {\n    previousFill: theme.palette.magenta,\n    currentFill: theme.palette.yellow,\n    previousName: comparedProduct,\n    currentName: currentProduct,\n  };\n\n  const resources: ResourceData[] = services.map(service => ({\n    name: service.id,\n    previous: service.aggregation[0],\n    current: service.aggregation[1],\n  }));\n\n  return <BarChart resources={resources} options={options} />;\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Box } from '@material-ui/core';\nimport { KubernetesMigrationBarChartLegend } from './KubernetesMigrationBarChartLegend';\nimport { KubernetesMigrationBarChart } from './KubernetesMigrationBarChart';\nimport { KubernetesMigrationData } from '../../alerts';\nimport { InfoCard } from '@backstage/core-components';\n\ntype KubernetesMigrationAlertProps = {\n  data: KubernetesMigrationData;\n  title: string;\n  subheader: string;\n  currentProduct: string;\n  comparedProduct: string;\n};\n\nexport const KubernetesMigrationAlertCard = ({\n  data,\n  title,\n  subheader,\n  currentProduct,\n  comparedProduct,\n}: KubernetesMigrationAlertProps) => {\n  return (\n    <InfoCard title={title} subheader={subheader}>\n      <Box display=\"flex\" flexDirection=\"column\">\n        <Box paddingY={1}>\n          <KubernetesMigrationBarChartLegend\n            startDate={data.startDate}\n            change={data.change}\n            currentProduct={currentProduct}\n            comparedProduct={comparedProduct}\n          />\n        </Box>\n        <Box paddingY={1}>\n          <KubernetesMigrationBarChart\n            services={data.services}\n            currentProduct={currentProduct}\n            comparedProduct={comparedProduct}\n          />\n        </Box>\n      </Box>\n    </InfoCard>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  useEffect,\n  useState,\n  forwardRef,\n  FormEventHandler,\n  ChangeEvent,\n} from 'react';\nimport {\n  Checkbox,\n  FormControl,\n  FormControlLabel,\n  FormGroup,\n  Typography,\n} from '@material-ui/core';\nimport { AlertFormProps, Entity } from '../../types';\nimport { KubernetesMigrationAlert } from '../alerts';\nimport { findAlways } from '../../utils/assert';\n\nexport type KubernetesMigrationDismissFormData = {\n  services: Entity[];\n};\n\nexport type KubernetesMigrationDismissFormProps = AlertFormProps<\n  KubernetesMigrationAlert,\n  KubernetesMigrationDismissFormData\n>;\n\nexport const KubernetesMigrationDismissForm = forwardRef<\n  HTMLFormElement,\n  KubernetesMigrationDismissFormProps\n>(({ onSubmit, disableSubmit, alert }, ref) => {\n  const [services, setServices] = useState<Entity[]>(alert.data.services);\n\n  const onFormSubmit: FormEventHandler = e => {\n    /* Remember to prevent default form behavior */\n    e.preventDefault();\n    onSubmit({ services: services });\n  };\n\n  const onCheckboxChange = (\n    e: ChangeEvent<HTMLInputElement>,\n    checked: boolean,\n  ) => {\n    if (checked) {\n      const service = findAlways(\n        alert.data.services,\n        s => s.id === e.target.value,\n      );\n      setServices(prevServices => prevServices.concat(service));\n    } else {\n      setServices(prevServices =>\n        prevServices.filter(p => p.id !== e.target.value),\n      );\n    }\n  };\n\n  /* Submit button is disabled by default. Use props.disableSubmit to toggle disabled state. */\n  useEffect(() => {\n    if (services.length) {\n      disableSubmit(false);\n    } else {\n      disableSubmit(true);\n    }\n  }, [services, disableSubmit]);\n\n  return (\n    /* All custom forms must accept a ref and implement an onSubmit handler. */\n    <form ref={ref} onSubmit={onFormSubmit}>\n      <FormControl component=\"fieldset\" fullWidth>\n        <Typography color=\"textPrimary\">\n          <b>Or choose which services to dismiss this alert for.</b>\n        </Typography>\n        <FormGroup>\n          {alert.data.services.map((service, index) => (\n            <FormControlLabel\n              key={`example-option-${index}`}\n              label={service.id}\n              value={service.id}\n              control={\n                <Checkbox\n                  color=\"primary\"\n                  checked={services.some(p => p.id === service.id)}\n                  onChange={onCheckboxChange}\n                />\n              }\n            />\n          ))}\n        </FormGroup>\n      </FormControl>\n    </form>\n  );\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport pluralize from 'pluralize';\nimport { KubernetesMigrationAlertCard } from '../components';\nimport { CostInsightsApi } from '../../api';\nimport {\n  Alert,\n  AlertForm,\n  AlertOptions,\n  AlertStatus,\n  AlertSnoozeFormData,\n  ChangeStatistic,\n  Entity,\n} from '../../types';\nimport {\n  KubernetesMigrationDismissForm,\n  KubernetesMigrationDismissFormData,\n} from '../forms';\nimport { Lifecycle } from '@backstage/core-components';\n\nexport interface KubernetesMigrationData {\n  startDate: string;\n  endDate: string;\n  change: ChangeStatistic;\n  services: Array<Entity>;\n}\n\nexport interface KubernetesMigrationApi extends Alert {\n  api: CostInsightsApi;\n  data: KubernetesMigrationData;\n}\n\n/**\n * This is an example of an Alert implementation using optional event hooks.\n *\n * Event hooks can be used to enable users to dismiss, snooze, or accept an action item\n * - or any combination thereof. Defining a hook will generate default UI - button, dialog and\n * form. Cost Insights does not preserve client side alert state - each hook is expected to return a new set of alerts.\n *\n * Snoozed, accepted, etc. alerts should define a corresponding status property. Alerts will be aggregated\n * by status in a collapsed view below Alert Insights section and a badge will appear in Action Items\n * showing the total alerts of that status.\n *\n * Customizing Alerts\n * Default forms can be overridden in two ways - by setting a form property to null or defining a custom component.\n *\n * If a form property is set to null, the Dialog will not render a form. This can be useful in scenarios\n * where data isn't needed from the user such as when a user accepts an action item's recommendation.\n *\n * If a form property is set to a React component, the Dialog will render the form component in place of the default form.\n * Form components must return valid form elements, and accept a ref and onSubmit event handler.\n * Custom forms must implement the corresponding event hook. See /forms for example implementations.\n */\n\nexport class KubernetesMigrationAlert implements KubernetesMigrationApi {\n  api: CostInsightsApi;\n  data: KubernetesMigrationData;\n\n  subtitle =\n    'Services running on Kubernetes are estimated to save 50% or more compared to Compute Engine.';\n\n  // Dialog will not render a form if form property set to null.\n  AcceptForm = null;\n  // Overrides default Dismiss form with a custom form component.\n  DismissForm: AlertForm<\n    KubernetesMigrationAlert,\n    KubernetesMigrationDismissFormData\n  > = KubernetesMigrationDismissForm;\n\n  constructor(api: CostInsightsApi, data: KubernetesMigrationData) {\n    this.api = api;\n    this.data = data;\n  }\n\n  get title() {\n    return (\n      <span>\n        Consider migrating{' '}\n        {pluralize('service', this.data.services.length, true)} to Kubernetes{' '}\n        <Lifecycle shorthand />\n      </span>\n    );\n  }\n\n  get element() {\n    const subheader = `${pluralize(\n      'Service',\n      this.data.services.length,\n      true,\n    )}, sorted by cost`;\n    return (\n      <KubernetesMigrationAlertCard\n        data={this.data}\n        title=\"Migrate to Kubernetes\"\n        subheader={subheader}\n        currentProduct=\"Compute Engine\"\n        comparedProduct=\"Kubernetes\"\n      />\n    );\n  }\n\n  /* Fires when the onSubmit event is raised on a Dismiss form. Displays custom dismiss form. */\n  async onDismissed(\n    options: AlertOptions<KubernetesMigrationDismissFormData>,\n  ): Promise<Alert[]> {\n    const alerts = await this.api.getAlerts(options.group);\n    return new Promise(resolve =>\n      setTimeout(resolve, 750, [\n        ...alerts.filter(a => a.title !== this.title),\n        {\n          title: this.title,\n          subtitle: this.subtitle,\n          status: AlertStatus.Dismissed,\n        },\n      ]),\n    );\n  }\n\n  /* Fires when the onSubmit event is raised on a Snooze form. Displays default snooze form. */\n  async onSnoozed(\n    options: AlertOptions<AlertSnoozeFormData>,\n  ): Promise<Alert[]> {\n    const alerts = await this.api.getAlerts(options.group);\n    return new Promise(resolve =>\n      setTimeout(resolve, 750, [\n        ...alerts.filter(a => a.title !== this.title),\n        {\n          title: this.title,\n          subtitle: this.subtitle,\n          status: AlertStatus.Snoozed,\n        },\n      ]),\n    );\n  }\n\n  /* Fires when the Accept button is clicked. Dialog does not render a form. See KubernetesMigrationAlert.AcceptForm */\n  async onAccepted(options: AlertOptions<null>): Promise<Alert[]> {\n    const alerts = await this.api.getAlerts(options.group);\n    return new Promise(resolve =>\n      setTimeout(resolve, 750, [\n        ...alerts.filter(a => a.title !== this.title),\n        {\n          title: this.title,\n          subtitle: this.subtitle,\n          status: AlertStatus.Accepted,\n        },\n      ]),\n    );\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Entity, Product } from '../types';\nimport { findAlways } from '../utils/assert';\n\ntype mockEntityRenderer<T> = (entity: T) => T;\n\nexport const createMockEntity = (\n  callback?: mockEntityRenderer<Entity>,\n): Entity => {\n  const defaultEntity: Entity = {\n    id: 'test-entity',\n    aggregation: [100, 200],\n    entities: {},\n    change: {\n      ratio: 0,\n      amount: 0,\n    },\n  };\n\n  if (typeof callback === 'function') {\n    return callback({ ...defaultEntity });\n  }\n  return { ...defaultEntity };\n};\n\nexport const createMockProduct = (\n  callback?: mockEntityRenderer<Product>,\n): Product => {\n  const defaultProduct: Product = {\n    kind: 'compute-engine',\n    name: 'Compute Engine',\n  };\n  if (typeof callback === 'function') {\n    return callback({ ...defaultProduct });\n  }\n  return { ...defaultProduct };\n};\n\nexport const MockProductTypes: Record<string, string> = {\n  'compute-engine': 'Compute Engine',\n  'cloud-dataflow': 'Cloud Dataflow',\n  'cloud-storage': 'Cloud Storage',\n  'big-query': 'Big Query',\n  'big-table': 'BigTable',\n  'cloud-pub-sub': 'Cloud Pub/Sub',\n};\n\nexport const MockProducts: Product[] = Object.keys(MockProductTypes).map(\n  productType =>\n    createMockProduct(() => ({\n      kind: productType,\n      name: MockProductTypes[productType],\n    })),\n);\n\nexport const MockComputeEngine = findAlways(\n  MockProducts,\n  p => p.kind === 'compute-engine',\n);\nexport const MockCloudDataflow = findAlways(\n  MockProducts,\n  p => p.kind === 'cloud-dataflow',\n);\nexport const MockCloudStorage = findAlways(\n  MockProducts,\n  p => p.kind === 'cloud-storage',\n);\nexport const MockBigQuery = findAlways(\n  MockProducts,\n  p => p.kind === 'big-query',\n);\nexport const MockBigtable = findAlways(\n  MockProducts,\n  p => p.kind === 'big-table',\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Duration, ProductFilters } from '../types';\nimport { MockProductTypes } from './products';\n\nexport const MockProductFilters: ProductFilters = Object.keys(\n  MockProductTypes,\n).map(productType => ({ duration: Duration.P30D, productType }));\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { MockProducts } from './products';\nimport {\n  DefaultLoadingAction,\n  getDefaultState as getDefaultLoadingState,\n} from '../utils/loading';\n\nexport const MockDefaultLoadingActions = (\n  [\n    DefaultLoadingAction.UserGroups,\n    DefaultLoadingAction.CostInsightsInitial,\n    DefaultLoadingAction.CostInsightsPage,\n  ] as string[]\n).concat(MockProducts.map(product => product.kind));\n\nexport const mockDefaultLoadingState = getDefaultLoadingState(\n  MockDefaultLoadingActions,\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DateAggregation, Entity } from '../types';\n\nexport const MockAggregatedDailyCosts: DateAggregation[] = [\n  {\n    date: '2020-08-07',\n    amount: 3500,\n  },\n  {\n    date: '2020-08-06',\n    amount: 2500,\n  },\n  {\n    date: '2020-08-05',\n    amount: 1400,\n  },\n  {\n    date: '2020-08-04',\n    amount: 3800,\n  },\n  {\n    date: '2020-08-09',\n    amount: 1900,\n  },\n  {\n    date: '2020-08-08',\n    amount: 2400,\n  },\n  {\n    date: '2020-08-03',\n    amount: 4000,\n  },\n  {\n    date: '2020-08-02',\n    amount: 3700,\n  },\n  {\n    date: '2020-08-01',\n    amount: 2500,\n  },\n  {\n    date: '2020-08-18',\n    amount: 4300,\n  },\n  {\n    date: '2020-08-17',\n    amount: 1500,\n  },\n  {\n    date: '2020-08-16',\n    amount: 3600,\n  },\n  {\n    date: '2020-08-15',\n    amount: 2200,\n  },\n  {\n    date: '2020-08-19',\n    amount: 3900,\n  },\n  {\n    date: '2020-08-10',\n    amount: 4100,\n  },\n  {\n    date: '2020-08-14',\n    amount: 3600,\n  },\n  {\n    date: '2020-08-13',\n    amount: 2900,\n  },\n  {\n    date: '2020-08-12',\n    amount: 2700,\n  },\n  {\n    date: '2020-08-11',\n    amount: 5100,\n  },\n  {\n    date: '2020-09-19',\n    amount: 1200,\n  },\n  {\n    date: '2020-09-18',\n    amount: 6500,\n  },\n  {\n    date: '2020-09-17',\n    amount: 2500,\n  },\n  {\n    date: '2020-09-16',\n    amount: 1400,\n  },\n  {\n    date: '2020-09-11',\n    amount: 2300,\n  },\n  {\n    date: '2020-09-10',\n    amount: 1900,\n  },\n  {\n    date: '2020-09-15',\n    amount: 3100,\n  },\n  {\n    date: '2020-09-14',\n    amount: 4500,\n  },\n  {\n    date: '2020-09-13',\n    amount: 3300,\n  },\n  {\n    date: '2020-09-12',\n    amount: 2800,\n  },\n  {\n    date: '2020-09-29',\n    amount: 2600,\n  },\n  {\n    date: '2020-09-28',\n    amount: 4100,\n  },\n  {\n    date: '2020-09-27',\n    amount: 3800,\n  },\n  {\n    date: '2020-09-22',\n    amount: 3700,\n  },\n  {\n    date: '2020-09-21',\n    amount: 2700,\n  },\n  {\n    date: '2020-09-20',\n    amount: 2200,\n  },\n  {\n    date: '2020-09-26',\n    amount: 3300,\n  },\n  {\n    date: '2020-09-25',\n    amount: 4000,\n  },\n  {\n    date: '2020-09-24',\n    amount: 3800,\n  },\n  {\n    date: '2020-09-23',\n    amount: 4100,\n  },\n  {\n    date: '2020-08-29',\n    amount: 4400,\n  },\n  {\n    date: '2020-08-28',\n    amount: 5000,\n  },\n  {\n    date: '2020-08-27',\n    amount: 4900,\n  },\n  {\n    date: '2020-08-26',\n    amount: 4100,\n  },\n  {\n    date: '2020-08-21',\n    amount: 3700,\n  },\n  {\n    date: '2020-08-20',\n    amount: 2200,\n  },\n  {\n    date: '2020-08-25',\n    amount: 1700,\n  },\n  {\n    date: '2020-08-24',\n    amount: 2100,\n  },\n  {\n    date: '2020-08-23',\n    amount: 3100,\n  },\n  {\n    date: '2020-08-22',\n    amount: 1500,\n  },\n  {\n    date: '2020-09-08',\n    amount: 2900,\n  },\n  {\n    date: '2020-09-07',\n    amount: 4100,\n  },\n  {\n    date: '2020-09-06',\n    amount: 3600,\n  },\n  {\n    date: '2020-09-05',\n    amount: 3300,\n  },\n  {\n    date: '2020-09-09',\n    amount: 2800,\n  },\n  {\n    date: '2020-08-31',\n    amount: 3400,\n  },\n  {\n    date: '2020-08-30',\n    amount: 4300,\n  },\n  {\n    date: '2020-09-04',\n    amount: 6100,\n  },\n  {\n    date: '2020-09-03',\n    amount: 2500,\n  },\n  {\n    date: '2020-09-02',\n    amount: 4900,\n  },\n  {\n    date: '2020-09-01',\n    amount: 6100,\n  },\n  {\n    date: '2020-09-30',\n    amount: 5500,\n  },\n];\n\nexport const MockBigQueryInsights: Entity = {\n  id: 'bigQuery',\n  aggregation: [10_000, 30_000],\n  change: {\n    ratio: 3,\n    amount: 20_000,\n  },\n  entities: {\n    dataset: [\n      {\n        id: 'dataset-a',\n        aggregation: [5_000, 10_000],\n        change: {\n          ratio: 1,\n          amount: 5_000,\n        },\n        entities: {},\n      },\n      {\n        id: 'dataset-b',\n        aggregation: [5_000, 10_000],\n        change: {\n          ratio: 1,\n          amount: 5_000,\n        },\n        entities: {},\n      },\n      {\n        id: 'dataset-c',\n        aggregation: [0, 10_000],\n        change: {\n          amount: 10_000,\n        },\n        entities: {},\n      },\n    ],\n  },\n};\n\nexport const MockCloudDataflowInsights: Entity = {\n  id: 'cloudDataflow',\n  aggregation: [100_000, 158_000],\n  change: {\n    ratio: 0.58,\n    amount: 58_000,\n  },\n  entities: {\n    pipeline: [\n      {\n        id: null,\n        aggregation: [10_000, 12_000],\n        change: {\n          ratio: 0.2,\n          amount: 2_000,\n        },\n        entities: {\n          SKU: [\n            {\n              id: 'Mock SKU A',\n              aggregation: [3_000, 4_000],\n              change: {\n                ratio: 0.333333,\n                amount: 1_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU B',\n              aggregation: [7_000, 8_000],\n              change: {\n                ratio: 0.14285714,\n                amount: 1_000,\n              },\n              entities: {},\n            },\n          ],\n        },\n      },\n      {\n        id: 'pipeline-a',\n        aggregation: [60_000, 70_000],\n        change: {\n          ratio: 0.16666666666666666,\n          amount: 10_000,\n        },\n        entities: {\n          SKU: [\n            {\n              id: 'Mock SKU A',\n              aggregation: [20_000, 15_000],\n              change: {\n                ratio: -0.25,\n                amount: -5_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU B',\n              aggregation: [30_000, 35_000],\n              change: {\n                ratio: -0.16666666666666666,\n                amount: -5_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU C',\n              aggregation: [10_000, 20_000],\n              change: {\n                ratio: 1,\n                amount: 10_000,\n              },\n              entities: {},\n            },\n          ],\n        },\n      },\n      {\n        id: 'pipeline-b',\n        aggregation: [12_000, 8_000],\n        change: {\n          ratio: -0.33333,\n          amount: -4_000,\n        },\n        entities: {\n          SKU: [\n            {\n              id: 'Mock SKU A',\n              aggregation: [4_000, 4_000],\n              change: {\n                ratio: 0,\n                amount: 0,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU B',\n              aggregation: [8_000, 4_000],\n              change: {\n                ratio: -0.5,\n                amount: -4_000,\n              },\n              entities: {},\n            },\n          ],\n        },\n      },\n      {\n        id: 'pipeline-c',\n        aggregation: [0, 10_000],\n        change: {\n          amount: 10_000,\n        },\n        entities: {},\n      },\n    ],\n  },\n};\n\nexport const MockCloudStorageInsights: Entity = {\n  id: 'cloudStorage',\n  aggregation: [45_000, 45_000],\n  change: {\n    ratio: 0,\n    amount: 0,\n  },\n  entities: {\n    bucket: [\n      {\n        id: 'bucket-a',\n        aggregation: [15_000, 20_000],\n        change: {\n          ratio: 0.333,\n          amount: 5_000,\n        },\n        entities: {\n          SKU: [\n            {\n              id: 'Mock SKU A',\n              aggregation: [10_000, 11_000],\n              change: {\n                ratio: 0.1,\n                amount: 1_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU B',\n              aggregation: [2_000, 5_000],\n              change: {\n                ratio: 1.5,\n                amount: 3_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU C',\n              aggregation: [3_000, 4_000],\n              change: {\n                ratio: 0.3333,\n                amount: 1_000,\n              },\n              entities: {},\n            },\n          ],\n        },\n      },\n      {\n        id: 'bucket-b',\n        aggregation: [30_000, 25_000],\n        change: {\n          ratio: -0.16666,\n          amount: -5_000,\n        },\n        entities: {\n          SKU: [\n            {\n              id: 'Mock SKU A',\n              aggregation: [12_000, 13_000],\n              change: {\n                ratio: 0.08333333333333333,\n                amount: 1_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU B',\n              aggregation: [16_000, 12_000],\n              change: {\n                ratio: -0.25,\n                amount: -4_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU C',\n              aggregation: [2_000, 0],\n              change: {\n                amount: -2000,\n              },\n              entities: {},\n            },\n          ],\n        },\n      },\n      {\n        id: 'bucket-c',\n        aggregation: [0, 0],\n        change: {\n          amount: 0,\n        },\n        entities: {},\n      },\n    ],\n  },\n};\n\nexport const MockComputeEngineInsights: Entity = {\n  id: 'computeEngine',\n  aggregation: [80_000, 90_000],\n  change: {\n    ratio: 0.125,\n    amount: 10_000,\n  },\n  entities: {\n    service: [\n      {\n        id: 'service-a',\n        aggregation: [20_000, 10_000],\n        change: {\n          ratio: -0.5,\n          amount: -10_000,\n        },\n        entities: {\n          SKU: [\n            {\n              id: 'Mock SKU A',\n              aggregation: [4_000, 2_000],\n              change: {\n                ratio: -0.5,\n                amount: -2_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU B',\n              aggregation: [7_000, 6_000],\n              change: {\n                ratio: -0.14285714285714285,\n                amount: -1_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU C',\n              aggregation: [9_000, 2_000],\n              change: {\n                ratio: -0.7777777777777778,\n                amount: -7000,\n              },\n              entities: {},\n            },\n          ],\n          deployment: [\n            {\n              id: 'Compute Engine',\n              aggregation: [7_000, 6_000],\n              change: {\n                ratio: -0.5,\n                amount: -2_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Kubernetes',\n              aggregation: [4_000, 2_000],\n              change: {\n                ratio: -0.14285714285714285,\n                amount: -1_000,\n              },\n              entities: {},\n            },\n          ],\n        },\n      },\n      {\n        id: 'service-b',\n        aggregation: [10_000, 20_000],\n        change: {\n          ratio: 1,\n          amount: 10_000,\n        },\n        entities: {\n          SKU: [\n            {\n              id: 'Mock SKU A',\n              aggregation: [1_000, 2_000],\n              change: {\n                ratio: 1,\n                amount: 1_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU B',\n              aggregation: [4_000, 8_000],\n              change: {\n                ratio: 1,\n                amount: 4_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock SKU C',\n              aggregation: [5_000, 10_000],\n              change: {\n                ratio: 1,\n                amount: 5_000,\n              },\n              entities: {},\n            },\n          ],\n          deployment: [\n            {\n              id: 'Compute Engine',\n              aggregation: [7_000, 6_000],\n              change: {\n                ratio: -0.5,\n                amount: -2_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Kubernetes',\n              aggregation: [4_000, 2_000],\n              change: {\n                ratio: -0.14285714285714285,\n                amount: -1_000,\n              },\n              entities: {},\n            },\n          ],\n        },\n      },\n      {\n        id: 'service-c',\n        aggregation: [0, 10_000],\n        change: {\n          amount: 10_000,\n        },\n        entities: {},\n      },\n    ],\n  },\n};\n\nexport const MockEventsInsights: Entity = {\n  id: 'events',\n  aggregation: [20_000, 10_000],\n  change: {\n    ratio: -0.5,\n    amount: -10_000,\n  },\n  entities: {\n    event: [\n      {\n        id: 'event-a',\n        aggregation: [15_000, 7_000],\n        change: {\n          ratio: -0.53333333333,\n          amount: -8_000,\n        },\n        entities: {\n          product: [\n            {\n              id: 'Mock Product A',\n              aggregation: [5_000, 2_000],\n              change: {\n                ratio: -0.6,\n                amount: -3_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock Product B',\n              aggregation: [7_000, 2_500],\n              change: {\n                ratio: -0.64285714285,\n                amount: -4_500,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock Product C',\n              aggregation: [3_000, 2_500],\n              change: {\n                ratio: -0.16666666666,\n                amount: -500,\n              },\n              entities: {},\n            },\n          ],\n        },\n      },\n      {\n        id: 'event-b',\n        aggregation: [5_000, 3_000],\n        change: {\n          ratio: -0.4,\n          amount: -2_000,\n        },\n        entities: {\n          product: [\n            {\n              id: 'Mock Product A',\n              aggregation: [2_000, 1_000],\n              change: {\n                ratio: -0.5,\n                amount: -1_000,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock Product B',\n              aggregation: [1_000, 1_500],\n              change: {\n                ratio: 0.5,\n                amount: 500,\n              },\n              entities: {},\n            },\n            {\n              id: 'Mock Product C',\n              aggregation: [2_000, 500],\n              change: {\n                ratio: -0.75,\n                amount: -1_500,\n              },\n              entities: {},\n            },\n          ],\n        },\n      },\n    ],\n  },\n};\n","/** @license React v16.13.1\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var b=\"function\"===typeof Symbol&&Symbol.for,c=b?Symbol.for(\"react.element\"):60103,d=b?Symbol.for(\"react.portal\"):60106,e=b?Symbol.for(\"react.fragment\"):60107,f=b?Symbol.for(\"react.strict_mode\"):60108,g=b?Symbol.for(\"react.profiler\"):60114,h=b?Symbol.for(\"react.provider\"):60109,k=b?Symbol.for(\"react.context\"):60110,l=b?Symbol.for(\"react.async_mode\"):60111,m=b?Symbol.for(\"react.concurrent_mode\"):60111,n=b?Symbol.for(\"react.forward_ref\"):60112,p=b?Symbol.for(\"react.suspense\"):60113,q=b?\nSymbol.for(\"react.suspense_list\"):60120,r=b?Symbol.for(\"react.memo\"):60115,t=b?Symbol.for(\"react.lazy\"):60116,v=b?Symbol.for(\"react.block\"):60121,w=b?Symbol.for(\"react.fundamental\"):60117,x=b?Symbol.for(\"react.responder\"):60118,y=b?Symbol.for(\"react.scope\"):60119;\nfunction z(a){if(\"object\"===typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type,a){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof,a){case k:case n:case t:case r:case h:return a;default:return u}}case d:return u}}}function A(a){return z(a)===m}exports.AsyncMode=l;exports.ConcurrentMode=m;exports.ContextConsumer=k;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=n;exports.Fragment=e;exports.Lazy=t;exports.Memo=r;exports.Portal=d;\nexports.Profiler=g;exports.StrictMode=f;exports.Suspense=p;exports.isAsyncMode=function(a){return A(a)||z(a)===l};exports.isConcurrentMode=A;exports.isContextConsumer=function(a){return z(a)===k};exports.isContextProvider=function(a){return z(a)===h};exports.isElement=function(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===c};exports.isForwardRef=function(a){return z(a)===n};exports.isFragment=function(a){return z(a)===e};exports.isLazy=function(a){return z(a)===t};\nexports.isMemo=function(a){return z(a)===r};exports.isPortal=function(a){return z(a)===d};exports.isProfiler=function(a){return z(a)===g};exports.isStrictMode=function(a){return z(a)===f};exports.isSuspense=function(a){return z(a)===p};\nexports.isValidElementType=function(a){return\"string\"===typeof a||\"function\"===typeof a||a===e||a===m||a===g||a===f||a===p||a===q||\"object\"===typeof a&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===w||a.$$typeof===x||a.$$typeof===y||a.$$typeof===v)};exports.typeOf=z;\n","/** @license React v16.13.1\n * react-is.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function() {\n'use strict';\n\n// The Symbol used to tag the ReactElement-like types. If there is no native Symbol\n// nor polyfill, then a plain number is used for performance.\nvar hasSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = hasSymbol ? Symbol.for('react.element') : 0xeac7;\nvar REACT_PORTAL_TYPE = hasSymbol ? Symbol.for('react.portal') : 0xeaca;\nvar REACT_FRAGMENT_TYPE = hasSymbol ? Symbol.for('react.fragment') : 0xeacb;\nvar REACT_STRICT_MODE_TYPE = hasSymbol ? Symbol.for('react.strict_mode') : 0xeacc;\nvar REACT_PROFILER_TYPE = hasSymbol ? Symbol.for('react.profiler') : 0xead2;\nvar REACT_PROVIDER_TYPE = hasSymbol ? Symbol.for('react.provider') : 0xeacd;\nvar REACT_CONTEXT_TYPE = hasSymbol ? Symbol.for('react.context') : 0xeace; // TODO: We don't use AsyncMode or ConcurrentMode anymore. They were temporary\n// (unstable) APIs that have been removed. Can we remove the symbols?\n\nvar REACT_ASYNC_MODE_TYPE = hasSymbol ? Symbol.for('react.async_mode') : 0xeacf;\nvar REACT_CONCURRENT_MODE_TYPE = hasSymbol ? Symbol.for('react.concurrent_mode') : 0xeacf;\nvar REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;\nvar REACT_SUSPENSE_TYPE = hasSymbol ? Symbol.for('react.suspense') : 0xead1;\nvar REACT_SUSPENSE_LIST_TYPE = hasSymbol ? Symbol.for('react.suspense_list') : 0xead8;\nvar REACT_MEMO_TYPE = hasSymbol ? Symbol.for('react.memo') : 0xead3;\nvar REACT_LAZY_TYPE = hasSymbol ? Symbol.for('react.lazy') : 0xead4;\nvar REACT_BLOCK_TYPE = hasSymbol ? Symbol.for('react.block') : 0xead9;\nvar REACT_FUNDAMENTAL_TYPE = hasSymbol ? Symbol.for('react.fundamental') : 0xead5;\nvar REACT_RESPONDER_TYPE = hasSymbol ? Symbol.for('react.responder') : 0xead6;\nvar REACT_SCOPE_TYPE = hasSymbol ? Symbol.for('react.scope') : 0xead7;\n\nfunction isValidElementType(type) {\n  return typeof type === 'string' || typeof type === 'function' || // Note: its typeof might be other than 'symbol' or 'number' if it's a polyfill.\n  type === REACT_FRAGMENT_TYPE || type === REACT_CONCURRENT_MODE_TYPE || type === REACT_PROFILER_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || typeof type === 'object' && type !== null && (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_RESPONDER_TYPE || type.$$typeof === REACT_SCOPE_TYPE || type.$$typeof === REACT_BLOCK_TYPE);\n}\n\nfunction typeOf(object) {\n  if (typeof object === 'object' && object !== null) {\n    var $$typeof = object.$$typeof;\n\n    switch ($$typeof) {\n      case REACT_ELEMENT_TYPE:\n        var type = object.type;\n\n        switch (type) {\n          case REACT_ASYNC_MODE_TYPE:\n          case REACT_CONCURRENT_MODE_TYPE:\n          case REACT_FRAGMENT_TYPE:\n          case REACT_PROFILER_TYPE:\n          case REACT_STRICT_MODE_TYPE:\n          case REACT_SUSPENSE_TYPE:\n            return type;\n\n          default:\n            var $$typeofType = type && type.$$typeof;\n\n            switch ($$typeofType) {\n              case REACT_CONTEXT_TYPE:\n              case REACT_FORWARD_REF_TYPE:\n              case REACT_LAZY_TYPE:\n              case REACT_MEMO_TYPE:\n              case REACT_PROVIDER_TYPE:\n                return $$typeofType;\n\n              default:\n                return $$typeof;\n            }\n\n        }\n\n      case REACT_PORTAL_TYPE:\n        return $$typeof;\n    }\n  }\n\n  return undefined;\n} // AsyncMode is deprecated along with isAsyncMode\n\nvar AsyncMode = REACT_ASYNC_MODE_TYPE;\nvar ConcurrentMode = REACT_CONCURRENT_MODE_TYPE;\nvar ContextConsumer = REACT_CONTEXT_TYPE;\nvar ContextProvider = REACT_PROVIDER_TYPE;\nvar Element = REACT_ELEMENT_TYPE;\nvar ForwardRef = REACT_FORWARD_REF_TYPE;\nvar Fragment = REACT_FRAGMENT_TYPE;\nvar Lazy = REACT_LAZY_TYPE;\nvar Memo = REACT_MEMO_TYPE;\nvar Portal = REACT_PORTAL_TYPE;\nvar Profiler = REACT_PROFILER_TYPE;\nvar StrictMode = REACT_STRICT_MODE_TYPE;\nvar Suspense = REACT_SUSPENSE_TYPE;\nvar hasWarnedAboutDeprecatedIsAsyncMode = false; // AsyncMode should be deprecated\n\nfunction isAsyncMode(object) {\n  {\n    if (!hasWarnedAboutDeprecatedIsAsyncMode) {\n      hasWarnedAboutDeprecatedIsAsyncMode = true; // Using console['warn'] to evade Babel and ESLint\n\n      console['warn']('The ReactIs.isAsyncMode() alias has been deprecated, ' + 'and will be removed in React 17+. Update your code to use ' + 'ReactIs.isConcurrentMode() instead. It has the exact same API.');\n    }\n  }\n\n  return isConcurrentMode(object) || typeOf(object) === REACT_ASYNC_MODE_TYPE;\n}\nfunction isConcurrentMode(object) {\n  return typeOf(object) === REACT_CONCURRENT_MODE_TYPE;\n}\nfunction isContextConsumer(object) {\n  return typeOf(object) === REACT_CONTEXT_TYPE;\n}\nfunction isContextProvider(object) {\n  return typeOf(object) === REACT_PROVIDER_TYPE;\n}\nfunction isElement(object) {\n  return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n}\nfunction isForwardRef(object) {\n  return typeOf(object) === REACT_FORWARD_REF_TYPE;\n}\nfunction isFragment(object) {\n  return typeOf(object) === REACT_FRAGMENT_TYPE;\n}\nfunction isLazy(object) {\n  return typeOf(object) === REACT_LAZY_TYPE;\n}\nfunction isMemo(object) {\n  return typeOf(object) === REACT_MEMO_TYPE;\n}\nfunction isPortal(object) {\n  return typeOf(object) === REACT_PORTAL_TYPE;\n}\nfunction isProfiler(object) {\n  return typeOf(object) === REACT_PROFILER_TYPE;\n}\nfunction isStrictMode(object) {\n  return typeOf(object) === REACT_STRICT_MODE_TYPE;\n}\nfunction isSuspense(object) {\n  return typeOf(object) === REACT_SUSPENSE_TYPE;\n}\n\nexports.AsyncMode = AsyncMode;\nexports.ConcurrentMode = ConcurrentMode;\nexports.ContextConsumer = ContextConsumer;\nexports.ContextProvider = ContextProvider;\nexports.Element = Element;\nexports.ForwardRef = ForwardRef;\nexports.Fragment = Fragment;\nexports.Lazy = Lazy;\nexports.Memo = Memo;\nexports.Portal = Portal;\nexports.Profiler = Profiler;\nexports.StrictMode = StrictMode;\nexports.Suspense = Suspense;\nexports.isAsyncMode = isAsyncMode;\nexports.isConcurrentMode = isConcurrentMode;\nexports.isContextConsumer = isContextConsumer;\nexports.isContextProvider = isContextProvider;\nexports.isElement = isElement;\nexports.isForwardRef = isForwardRef;\nexports.isFragment = isFragment;\nexports.isLazy = isLazy;\nexports.isMemo = isMemo;\nexports.isPortal = isPortal;\nexports.isProfiler = isProfiler;\nexports.isStrictMode = isStrictMode;\nexports.isSuspense = isSuspense;\nexports.isValidElementType = isValidElementType;\nexports.typeOf = typeOf;\n  })();\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-is.production.min.js');\n} else {\n  module.exports = require('./cjs/react-is.development.js');\n}\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n  var loggedTypeFailures = {};\n  var has = Function.call.bind(Object.prototype.hasOwnProperty);\n\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\n/**\n * Assert that the values match with the type specs.\n * Error messages are memorized and will only be shown once.\n *\n * @param {object} typeSpecs Map of name to a ReactPropType\n * @param {object} values Runtime values that need to be type-checked\n * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n * @param {string} componentName Name of the component for error messages.\n * @param {?Function} getStack Returns the component stack.\n * @private\n */\nfunction checkPropTypes(typeSpecs, values, location, componentName, getStack) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var typeSpecName in typeSpecs) {\n      if (has(typeSpecs, typeSpecName)) {\n        var error;\n        // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            var err = Error(\n              (componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' +\n              'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.'\n            );\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n          error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret);\n        } catch (ex) {\n          error = ex;\n        }\n        if (error && !(error instanceof Error)) {\n          printWarning(\n            (componentName || 'React class') + ': type specification of ' +\n            location + ' `' + typeSpecName + '` is invalid; the type checker ' +\n            'function must return `null` or an `Error` but returned a ' + typeof error + '. ' +\n            'You may have forgotten to pass an argument to the type checker ' +\n            'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' +\n            'shape all require an argument).'\n          );\n        }\n        if (error instanceof Error && !(error.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error.message] = true;\n\n          var stack = getStack ? getStack() : '';\n\n          printWarning(\n            'Failed ' + location + ' type: ' + error.message + (stack != null ? stack : '')\n          );\n        }\n      }\n    }\n  }\n}\n\n/**\n * Resets warning cache when testing.\n *\n * @private\n */\ncheckPropTypes.resetWarningCache = function() {\n  if (process.env.NODE_ENV !== 'production') {\n    loggedTypeFailures = {};\n  }\n}\n\nmodule.exports = checkPropTypes;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactIs = require('react-is');\nvar assign = require('object-assign');\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\nvar checkPropTypes = require('./checkPropTypes');\n\nvar has = Function.call.bind(Object.prototype.hasOwnProperty);\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\nfunction emptyFunctionThatReturnsNull() {\n  return null;\n}\n\nmodule.exports = function(isValidElement, throwOnDirectAccess) {\n  /* global Symbol */\n  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator'; // Before Symbol spec.\n\n  /**\n   * Returns the iterator method function contained on the iterable object.\n   *\n   * Be sure to invoke the function with the iterable as context:\n   *\n   *     var iteratorFn = getIteratorFn(myIterable);\n   *     if (iteratorFn) {\n   *       var iterator = iteratorFn.call(myIterable);\n   *       ...\n   *     }\n   *\n   * @param {?object} maybeIterable\n   * @return {?function}\n   */\n  function getIteratorFn(maybeIterable) {\n    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n\n  /**\n   * Collection of methods that allow declaration and validation of props that are\n   * supplied to React components. Example usage:\n   *\n   *   var Props = require('ReactPropTypes');\n   *   var MyArticle = React.createClass({\n   *     propTypes: {\n   *       // An optional string prop named \"description\".\n   *       description: Props.string,\n   *\n   *       // A required enum prop named \"category\".\n   *       category: Props.oneOf(['News','Photos']).isRequired,\n   *\n   *       // A prop named \"dialog\" that requires an instance of Dialog.\n   *       dialog: Props.instanceOf(Dialog).isRequired\n   *     },\n   *     render: function() { ... }\n   *   });\n   *\n   * A more formal specification of how these methods are used:\n   *\n   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)\n   *   decl := ReactPropTypes.{type}(.isRequired)?\n   *\n   * Each and every declaration produces a function with the same signature. This\n   * allows the creation of custom validation functions. For example:\n   *\n   *  var MyLink = React.createClass({\n   *    propTypes: {\n   *      // An optional string or URI prop named \"href\".\n   *      href: function(props, propName, componentName) {\n   *        var propValue = props[propName];\n   *        if (propValue != null && typeof propValue !== 'string' &&\n   *            !(propValue instanceof URI)) {\n   *          return new Error(\n   *            'Expected a string or an URI for ' + propName + ' in ' +\n   *            componentName\n   *          );\n   *        }\n   *      }\n   *    },\n   *    render: function() {...}\n   *  });\n   *\n   * @internal\n   */\n\n  var ANONYMOUS = '<<anonymous>>';\n\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithThrowingShims.js`.\n  var ReactPropTypes = {\n    array: createPrimitiveTypeChecker('array'),\n    bool: createPrimitiveTypeChecker('boolean'),\n    func: createPrimitiveTypeChecker('function'),\n    number: createPrimitiveTypeChecker('number'),\n    object: createPrimitiveTypeChecker('object'),\n    string: createPrimitiveTypeChecker('string'),\n    symbol: createPrimitiveTypeChecker('symbol'),\n\n    any: createAnyTypeChecker(),\n    arrayOf: createArrayOfTypeChecker,\n    element: createElementTypeChecker(),\n    elementType: createElementTypeTypeChecker(),\n    instanceOf: createInstanceTypeChecker,\n    node: createNodeChecker(),\n    objectOf: createObjectOfTypeChecker,\n    oneOf: createEnumTypeChecker,\n    oneOfType: createUnionTypeChecker,\n    shape: createShapeTypeChecker,\n    exact: createStrictShapeTypeChecker,\n  };\n\n  /**\n   * inlined Object.is polyfill to avoid requiring consumers ship their own\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n   */\n  /*eslint-disable no-self-compare*/\n  function is(x, y) {\n    // SameValue algorithm\n    if (x === y) {\n      // Steps 1-5, 7-10\n      // Steps 6.b-6.e: +0 != -0\n      return x !== 0 || 1 / x === 1 / y;\n    } else {\n      // Step 6.a: NaN == NaN\n      return x !== x && y !== y;\n    }\n  }\n  /*eslint-enable no-self-compare*/\n\n  /**\n   * We use an Error-like object for backward compatibility as people may call\n   * PropTypes directly and inspect their output. However, we don't use real\n   * Errors anymore. We don't inspect their stack anyway, and creating them\n   * is prohibitively expensive if they are created too often, such as what\n   * happens in oneOfType() for any type before the one that matched.\n   */\n  function PropTypeError(message) {\n    this.message = message;\n    this.stack = '';\n  }\n  // Make `instanceof Error` still work for returned errors.\n  PropTypeError.prototype = Error.prototype;\n\n  function createChainableTypeChecker(validate) {\n    if (process.env.NODE_ENV !== 'production') {\n      var manualPropTypeCallCache = {};\n      var manualPropTypeWarningCount = 0;\n    }\n    function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {\n      componentName = componentName || ANONYMOUS;\n      propFullName = propFullName || propName;\n\n      if (secret !== ReactPropTypesSecret) {\n        if (throwOnDirectAccess) {\n          // New behavior only for users of `prop-types` package\n          var err = new Error(\n            'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n            'Use `PropTypes.checkPropTypes()` to call them. ' +\n            'Read more at http://fb.me/use-check-prop-types'\n          );\n          err.name = 'Invariant Violation';\n          throw err;\n        } else if (process.env.NODE_ENV !== 'production' && typeof console !== 'undefined') {\n          // Old behavior for people using React.PropTypes\n          var cacheKey = componentName + ':' + propName;\n          if (\n            !manualPropTypeCallCache[cacheKey] &&\n            // Avoid spamming the console because they are often not actionable except for lib authors\n            manualPropTypeWarningCount < 3\n          ) {\n            printWarning(\n              'You are manually calling a React.PropTypes validation ' +\n              'function for the `' + propFullName + '` prop on `' + componentName  + '`. This is deprecated ' +\n              'and will throw in the standalone `prop-types` package. ' +\n              'You may be seeing this warning due to a third-party PropTypes ' +\n              'library. See https://fb.me/react-warning-dont-call-proptypes ' + 'for details.'\n            );\n            manualPropTypeCallCache[cacheKey] = true;\n            manualPropTypeWarningCount++;\n          }\n        }\n      }\n      if (props[propName] == null) {\n        if (isRequired) {\n          if (props[propName] === null) {\n            return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required ' + ('in `' + componentName + '`, but its value is `null`.'));\n          }\n          return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required in ' + ('`' + componentName + '`, but its value is `undefined`.'));\n        }\n        return null;\n      } else {\n        return validate(props, propName, componentName, location, propFullName);\n      }\n    }\n\n    var chainedCheckType = checkType.bind(null, false);\n    chainedCheckType.isRequired = checkType.bind(null, true);\n\n    return chainedCheckType;\n  }\n\n  function createPrimitiveTypeChecker(expectedType) {\n    function validate(props, propName, componentName, location, propFullName, secret) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== expectedType) {\n        // `propValue` being instance of, say, date/regexp, pass the 'object'\n        // check, but we can offer a more precise error message here rather than\n        // 'of type `object`'.\n        var preciseType = getPreciseType(propValue);\n\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createAnyTypeChecker() {\n    return createChainableTypeChecker(emptyFunctionThatReturnsNull);\n  }\n\n  function createArrayOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside arrayOf.');\n      }\n      var propValue = props[propName];\n      if (!Array.isArray(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));\n      }\n      for (var i = 0; i < propValue.length; i++) {\n        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']', ReactPropTypesSecret);\n        if (error instanceof Error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!isValidElement(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!ReactIs.isValidElementType(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement type.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createInstanceTypeChecker(expectedClass) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!(props[propName] instanceof expectedClass)) {\n        var expectedClassName = expectedClass.name || ANONYMOUS;\n        var actualClassName = getClassName(props[propName]);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createEnumTypeChecker(expectedValues) {\n    if (!Array.isArray(expectedValues)) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (arguments.length > 1) {\n          printWarning(\n            'Invalid arguments supplied to oneOf, expected an array, got ' + arguments.length + ' arguments. ' +\n            'A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).'\n          );\n        } else {\n          printWarning('Invalid argument supplied to oneOf, expected an array.');\n        }\n      }\n      return emptyFunctionThatReturnsNull;\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      for (var i = 0; i < expectedValues.length; i++) {\n        if (is(propValue, expectedValues[i])) {\n          return null;\n        }\n      }\n\n      var valuesString = JSON.stringify(expectedValues, function replacer(key, value) {\n        var type = getPreciseType(value);\n        if (type === 'symbol') {\n          return String(value);\n        }\n        return value;\n      });\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of value `' + String(propValue) + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createObjectOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside objectOf.');\n      }\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));\n      }\n      for (var key in propValue) {\n        if (has(propValue, key)) {\n          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n          if (error instanceof Error) {\n            return error;\n          }\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createUnionTypeChecker(arrayOfTypeCheckers) {\n    if (!Array.isArray(arrayOfTypeCheckers)) {\n      process.env.NODE_ENV !== 'production' ? printWarning('Invalid argument supplied to oneOfType, expected an instance of array.') : void 0;\n      return emptyFunctionThatReturnsNull;\n    }\n\n    for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n      var checker = arrayOfTypeCheckers[i];\n      if (typeof checker !== 'function') {\n        printWarning(\n          'Invalid argument supplied to oneOfType. Expected an array of check functions, but ' +\n          'received ' + getPostfixForTypeWarning(checker) + ' at index ' + i + '.'\n        );\n        return emptyFunctionThatReturnsNull;\n      }\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n        var checker = arrayOfTypeCheckers[i];\n        if (checker(props, propName, componentName, location, propFullName, ReactPropTypesSecret) == null) {\n          return null;\n        }\n      }\n\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createNodeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!isNode(props[propName])) {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      for (var key in shapeTypes) {\n        var checker = shapeTypes[key];\n        if (!checker) {\n          continue;\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createStrictShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      // We need to check all keys in case some are required but missing from\n      // props.\n      var allKeys = assign({}, props[propName], shapeTypes);\n      for (var key in allKeys) {\n        var checker = shapeTypes[key];\n        if (!checker) {\n          return new PropTypeError(\n            'Invalid ' + location + ' `' + propFullName + '` key `' + key + '` supplied to `' + componentName + '`.' +\n            '\\nBad object: ' + JSON.stringify(props[propName], null, '  ') +\n            '\\nValid keys: ' +  JSON.stringify(Object.keys(shapeTypes), null, '  ')\n          );\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function isNode(propValue) {\n    switch (typeof propValue) {\n      case 'number':\n      case 'string':\n      case 'undefined':\n        return true;\n      case 'boolean':\n        return !propValue;\n      case 'object':\n        if (Array.isArray(propValue)) {\n          return propValue.every(isNode);\n        }\n        if (propValue === null || isValidElement(propValue)) {\n          return true;\n        }\n\n        var iteratorFn = getIteratorFn(propValue);\n        if (iteratorFn) {\n          var iterator = iteratorFn.call(propValue);\n          var step;\n          if (iteratorFn !== propValue.entries) {\n            while (!(step = iterator.next()).done) {\n              if (!isNode(step.value)) {\n                return false;\n              }\n            }\n          } else {\n            // Iterator will provide entry [k,v] tuples rather than values.\n            while (!(step = iterator.next()).done) {\n              var entry = step.value;\n              if (entry) {\n                if (!isNode(entry[1])) {\n                  return false;\n                }\n              }\n            }\n          }\n        } else {\n          return false;\n        }\n\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  function isSymbol(propType, propValue) {\n    // Native Symbol.\n    if (propType === 'symbol') {\n      return true;\n    }\n\n    // falsy value can't be a Symbol\n    if (!propValue) {\n      return false;\n    }\n\n    // 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'\n    if (propValue['@@toStringTag'] === 'Symbol') {\n      return true;\n    }\n\n    // Fallback for non-spec compliant Symbols which are polyfilled.\n    if (typeof Symbol === 'function' && propValue instanceof Symbol) {\n      return true;\n    }\n\n    return false;\n  }\n\n  // Equivalent of `typeof` but with special handling for array and regexp.\n  function getPropType(propValue) {\n    var propType = typeof propValue;\n    if (Array.isArray(propValue)) {\n      return 'array';\n    }\n    if (propValue instanceof RegExp) {\n      // Old webkits (at least until Android 4.0) return 'function' rather than\n      // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n      // passes PropTypes.object.\n      return 'object';\n    }\n    if (isSymbol(propType, propValue)) {\n      return 'symbol';\n    }\n    return propType;\n  }\n\n  // This handles more types than `getPropType`. Only used for error messages.\n  // See `createPrimitiveTypeChecker`.\n  function getPreciseType(propValue) {\n    if (typeof propValue === 'undefined' || propValue === null) {\n      return '' + propValue;\n    }\n    var propType = getPropType(propValue);\n    if (propType === 'object') {\n      if (propValue instanceof Date) {\n        return 'date';\n      } else if (propValue instanceof RegExp) {\n        return 'regexp';\n      }\n    }\n    return propType;\n  }\n\n  // Returns a string that is postfixed to a warning about an invalid type.\n  // For example, \"undefined\" or \"of type array\"\n  function getPostfixForTypeWarning(value) {\n    var type = getPreciseType(value);\n    switch (type) {\n      case 'array':\n      case 'object':\n        return 'an ' + type;\n      case 'boolean':\n      case 'date':\n      case 'regexp':\n        return 'a ' + type;\n      default:\n        return type;\n    }\n  }\n\n  // Returns class name of the object, if any.\n  function getClassName(propValue) {\n    if (!propValue.constructor || !propValue.constructor.name) {\n      return ANONYMOUS;\n    }\n    return propValue.constructor.name;\n  }\n\n  ReactPropTypes.checkPropTypes = checkPropTypes;\n  ReactPropTypes.resetWarningCache = checkPropTypes.resetWarningCache;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nfunction getGlobalObject() {\n  if (typeof window !== 'undefined' && window.Math === Math) {\n    return window;\n  }\n  if (typeof self !== 'undefined' && self.Math === Math) {\n    return self;\n  }\n  // eslint-disable-next-line no-new-func\n  return Function('return this')();\n}\n\nconst globalObject = getGlobalObject();\n\nconst makeKey = (id: string) => `__@backstage/${id}__`;\n\n/**\n * Used to provide a global singleton value, failing if it is already set.\n */\nexport function setGlobalSingleton(id: string, value: unknown): void {\n  const key = makeKey(id);\n  if (key in globalObject) {\n    throw new Error(`Global ${id} is already set`); // TODO some sort of special build err\n  }\n  globalObject[key] = value;\n}\n\n/**\n * Used to access a global singleton value, failing if it is not already set.\n */\nexport function getGlobalSingleton<T>(id: string): T {\n  const key = makeKey(id);\n  if (!(key in globalObject)) {\n    throw new Error(`Global ${id} is not set`); // TODO some sort of special build err\n  }\n\n  return globalObject[key];\n}\n\n/**\n * Serializes access to a global singleton value, with the first caller creating the value.\n */\nexport function getOrCreateGlobalSingleton<T>(\n  id: string,\n  supplier: () => T,\n): T {\n  const key = makeKey(id);\n\n  let value = globalObject[key];\n  if (value) {\n    return value;\n  }\n\n  value = supplier();\n  globalObject[key] = value;\n  return value;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  createContext,\n  useContext,\n  ReactNode,\n  PropsWithChildren,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { ApiHolder } from '@backstage/core-plugin-api';\nimport { ApiAggregator } from './ApiAggregator';\nimport { getOrCreateGlobalSingleton } from '../../lib/globalObject';\nimport {\n  VersionedValue,\n  createVersionedValueMap,\n} from '../../lib/versionedValues';\n\ntype ApiProviderProps = {\n  apis: ApiHolder;\n  children: ReactNode;\n};\n\ntype ApiContextType = VersionedValue<{ 1: ApiHolder }> | undefined;\nconst ApiContext = getOrCreateGlobalSingleton('api-context', () =>\n  createContext<ApiContextType>(undefined),\n);\n\nexport const ApiProvider = ({\n  apis,\n  children,\n}: PropsWithChildren<ApiProviderProps>) => {\n  const parentHolder = useContext(ApiContext)?.atVersion(1);\n  const holder = parentHolder ? new ApiAggregator(apis, parentHolder) : apis;\n\n  return (\n    <ApiContext.Provider\n      value={createVersionedValueMap({ 1: holder })}\n      children={children}\n    />\n  );\n};\n\nApiProvider.propTypes = {\n  apis: PropTypes.shape({ get: PropTypes.func.isRequired }).isRequired,\n  children: PropTypes.node,\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ApiFactoryHolder } from './types';\nimport {\n  ApiRef,\n  ApiFactory,\n  AnyApiRef,\n  AnyApiFactory,\n} from '@backstage/core-plugin-api';\n\ntype ApiFactoryScope =\n  | 'default' // Default factories registered by core and plugins\n  | 'app' // Factories registered in the app, overriding default ones\n  | 'static'; // APIs that can't be overridden, e.g. config\n\nenum ScopePriority {\n  default = 10,\n  app = 50,\n  static = 100,\n}\n\ntype FactoryTuple = {\n  priority: number;\n  factory: AnyApiFactory;\n};\n\n/**\n * ApiFactoryRegistry is an ApiFactoryHolder implementation that enables\n * registration of API Factories with different scope.\n *\n * Each scope has an assigned priority, where factories registered with\n * higher priority scopes override ones with lower priority.\n */\nexport class ApiFactoryRegistry implements ApiFactoryHolder {\n  private readonly factories = new Map<string, FactoryTuple>();\n\n  /**\n   * Register a new API factory. Returns true if the factory was added\n   * to the registry.\n   *\n   * A factory will not be added to the registry if there is already\n   * an existing factory with the same or higher priority.\n   */\n  register<Api, Impl extends Api, Deps extends { [name in string]: unknown }>(\n    scope: ApiFactoryScope,\n    factory: ApiFactory<Api, Impl, Deps>,\n  ) {\n    const priority = ScopePriority[scope];\n    const existing = this.factories.get(factory.api.id);\n    if (existing && existing.priority >= priority) {\n      return false;\n    }\n\n    this.factories.set(factory.api.id, { priority, factory });\n    return true;\n  }\n\n  get<T>(\n    api: ApiRef<T>,\n  ): ApiFactory<T, T, { [x: string]: unknown }> | undefined {\n    const tuple = this.factories.get(api.id);\n    if (!tuple) {\n      return undefined;\n    }\n    return tuple.factory as ApiFactory<T, T, { [x: string]: unknown }>;\n  }\n\n  getAllApis(): Set<AnyApiRef> {\n    const refs = new Set<AnyApiRef>();\n    for (const { factory } of this.factories.values()) {\n      refs.add(factory.api);\n    }\n    return refs;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Options used to open a login popup.\n */\nexport type LoginPopupOptions = {\n  /**\n   * The URL that the auth popup should point to\n   */\n  url: string;\n\n  /**\n   * The name of the popup, as in second argument to window.open\n   */\n  name: string;\n\n  /**\n   * The origin of the final popup page that will post a message to this window.\n   */\n  origin: string;\n\n  /**\n   * The width of the popup in pixels, defaults to 500\n   */\n  width?: number;\n\n  /**\n   * The height of the popup in pixels, defaults to 700\n   */\n  height?: number;\n};\n\ntype AuthResult =\n  | {\n      type: 'authorization_response';\n      response: unknown;\n    }\n  | {\n      type: 'authorization_response';\n      error: {\n        name: string;\n        message: string;\n      };\n    };\n\n/**\n * Show a popup pointing to a URL that starts an auth flow. Implementing the receiving\n * end of the postMessage mechanism outlined in https://tools.ietf.org/html/draft-sakimura-oauth-wmrm-00\n *\n * The redirect handler of the flow should use postMessage to communicate back\n * to the app window. The message posted to the app must match the AuthResult type.\n *\n * The returned promise resolves to the response of the message that was posted from the auth popup.\n */\nexport function showLoginPopup(options: LoginPopupOptions): Promise<any> {\n  return new Promise((resolve, reject) => {\n    const width = options.width || 500;\n    const height = options.height || 700;\n    const left = window.screen.width / 2 - width / 2;\n    const top = window.screen.height / 2 - height / 2;\n\n    const popup = window.open(\n      options.url,\n      options.name,\n      `menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${width},height=${height},top=${top},left=${left}`,\n    );\n\n    let targetOrigin = '';\n\n    if (!popup || typeof popup.closed === 'undefined' || popup.closed) {\n      const error = new Error('Failed to open auth popup.');\n      error.name = 'PopupRejectedError';\n      reject(error);\n      return;\n    }\n\n    const messageListener = (event: MessageEvent) => {\n      if (event.source !== popup) {\n        return;\n      }\n      if (event.origin !== options.origin) {\n        return;\n      }\n      const { data } = event;\n\n      if (data.type === 'config_info') {\n        targetOrigin = data.targetOrigin;\n        return;\n      }\n\n      if (data.type !== 'authorization_response') {\n        return;\n      }\n      const authResult = data as AuthResult;\n\n      if ('error' in authResult) {\n        const error = new Error(authResult.error.message);\n        error.name = authResult.error.name;\n        // TODO: proper error type\n        // error.extra = authResult.error.extra;\n        reject(error);\n      } else {\n        resolve(authResult.response);\n      }\n      done();\n    };\n\n    const intervalId = setInterval(() => {\n      if (popup.closed) {\n        const errMessage = `Login failed, ${\n          targetOrigin && targetOrigin !== window.location.origin\n            ? `Incorrect app origin, expected ${targetOrigin}`\n            : 'popup was closed'\n        }`;\n        const error = new Error(errMessage);\n        error.name = 'PopupClosedError';\n        reject(error);\n        done();\n      }\n    }, 100);\n\n    function done() {\n      window.removeEventListener('message', messageListener);\n      clearInterval(intervalId);\n    }\n\n    window.addEventListener('message', messageListener);\n  });\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AuthRequester,\n  OAuthRequestApi,\n  AuthProvider,\n  DiscoveryApi,\n} from '@backstage/core-plugin-api';\nimport { showLoginPopup } from '../loginPopup';\nimport { AuthConnector, CreateSessionOptions } from './types';\n\ntype Options<AuthSession> = {\n  /**\n   * DiscoveryApi instance used to locate the auth backend endpoint.\n   */\n  discoveryApi: DiscoveryApi;\n  /**\n   * Environment hint passed on to auth backend, for example 'production' or 'development'\n   */\n  environment: string;\n  /**\n   * Information about the auth provider to be shown to the user.\n   * The ID Must match the backend auth plugin configuration, for example 'google'.\n   */\n  provider: AuthProvider & { id: string };\n  /**\n   * API used to instantiate an auth requester.\n   */\n  oauthRequestApi: OAuthRequestApi;\n  /**\n   * Function used to join together a set of scopes, defaults to joining with a space character.\n   */\n  joinScopes?: (scopes: Set<string>) => string;\n  /**\n   * Function used to transform an auth response into the session type.\n   */\n  sessionTransform?(response: any): AuthSession | Promise<AuthSession>;\n};\n\nfunction defaultJoinScopes(scopes: Set<string>) {\n  return [...scopes].join(' ');\n}\n\n/**\n * DefaultAuthConnector is the default auth connector in Backstage. It talks to the\n * backend auth plugin through the standardized API, and requests user permission\n * via the OAuthRequestApi.\n */\nexport class DefaultAuthConnector<AuthSession>\n  implements AuthConnector<AuthSession>\n{\n  private readonly discoveryApi: DiscoveryApi;\n  private readonly environment: string;\n  private readonly provider: AuthProvider & { id: string };\n  private readonly joinScopesFunc: (scopes: Set<string>) => string;\n  private readonly authRequester: AuthRequester<AuthSession>;\n  private readonly sessionTransform: (response: any) => Promise<AuthSession>;\n\n  constructor(options: Options<AuthSession>) {\n    const {\n      discoveryApi,\n      environment,\n      provider,\n      joinScopes = defaultJoinScopes,\n      oauthRequestApi,\n      sessionTransform = id => id,\n    } = options;\n\n    this.authRequester = oauthRequestApi.createAuthRequester({\n      provider,\n      onAuthRequest: scopes => this.showPopup(scopes),\n    });\n\n    this.discoveryApi = discoveryApi;\n    this.environment = environment;\n    this.provider = provider;\n    this.joinScopesFunc = joinScopes;\n    this.sessionTransform = sessionTransform;\n  }\n\n  async createSession(options: CreateSessionOptions): Promise<AuthSession> {\n    if (options.instantPopup) {\n      return this.showPopup(options.scopes);\n    }\n    return this.authRequester(options.scopes);\n  }\n\n  async refreshSession(): Promise<any> {\n    const res = await fetch(\n      await this.buildUrl('/refresh', { optional: true }),\n      {\n        headers: {\n          'x-requested-with': 'XMLHttpRequest',\n        },\n        credentials: 'include',\n      },\n    ).catch(error => {\n      throw new Error(`Auth refresh request failed, ${error}`);\n    });\n\n    if (!res.ok) {\n      const error: any = new Error(\n        `Auth refresh request failed, ${res.statusText}`,\n      );\n      error.status = res.status;\n      throw error;\n    }\n\n    const authInfo = await res.json();\n\n    if (authInfo.error) {\n      const error = new Error(authInfo.error.message);\n      if (authInfo.error.name) {\n        error.name = authInfo.error.name;\n      }\n      throw error;\n    }\n    return await this.sessionTransform(authInfo);\n  }\n\n  async removeSession(): Promise<void> {\n    const res = await fetch(await this.buildUrl('/logout'), {\n      method: 'POST',\n      headers: {\n        'x-requested-with': 'XMLHttpRequest',\n      },\n      credentials: 'include',\n    }).catch(error => {\n      throw new Error(`Logout request failed, ${error}`);\n    });\n\n    if (!res.ok) {\n      const error: any = new Error(`Logout request failed, ${res.statusText}`);\n      error.status = res.status;\n      throw error;\n    }\n  }\n\n  private async showPopup(scopes: Set<string>): Promise<AuthSession> {\n    const scope = this.joinScopesFunc(scopes);\n    const popupUrl = await this.buildUrl('/start', { scope });\n\n    const payload = await showLoginPopup({\n      url: popupUrl,\n      name: `${this.provider.title} Login`,\n      origin: new URL(popupUrl).origin,\n      width: 450,\n      height: 730,\n    });\n\n    return await this.sessionTransform(payload);\n  }\n\n  private async buildUrl(\n    path: string,\n    query?: { [key: string]: string | boolean | undefined },\n  ): Promise<string> {\n    const baseUrl = await this.discoveryApi.getBaseUrl('auth');\n    const queryString = this.buildQueryString({\n      ...query,\n      env: this.environment,\n    });\n\n    return `${baseUrl}/${this.provider.id}${path}${queryString}`;\n  }\n\n  private buildQueryString(query?: {\n    [key: string]: string | boolean | undefined;\n  }): string {\n    if (!query) {\n      return '';\n    }\n\n    const queryString = Object.entries<string | boolean | undefined>(query)\n      .map(([key, value]) => {\n        if (typeof value === 'string') {\n          return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n        } else if (value) {\n          return encodeURIComponent(key);\n        }\n        return undefined;\n      })\n      .filter(Boolean)\n      .join('&');\n\n    if (!queryString) {\n      return '';\n    }\n    return `?${queryString}`;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { AuthProvider, DiscoveryApi } from '@backstage/core-plugin-api';\nimport { showLoginPopup } from '../loginPopup';\n\ntype Options = {\n  discoveryApi: DiscoveryApi;\n  environment?: string;\n  provider: AuthProvider & { id: string };\n};\nexport class DirectAuthConnector<DirectAuthResponse> {\n  private readonly discoveryApi: DiscoveryApi;\n  private readonly environment: string | undefined;\n  private readonly provider: AuthProvider & { id: string };\n\n  constructor(options: Options) {\n    const { discoveryApi, environment, provider } = options;\n\n    this.discoveryApi = discoveryApi;\n    this.environment = environment;\n    this.provider = provider;\n  }\n\n  async createSession(): Promise<DirectAuthResponse> {\n    const popupUrl = await this.buildUrl('/start');\n    const payload = await showLoginPopup({\n      url: popupUrl,\n      name: `${this.provider.title} Login`,\n      origin: new URL(popupUrl).origin,\n      width: 450,\n      height: 730,\n    });\n\n    return {\n      ...payload,\n      id: payload.profile.email,\n    };\n  }\n\n  async refreshSession(): Promise<any> {}\n\n  async removeSession(): Promise<void> {\n    const res = await fetch(await this.buildUrl('/logout'), {\n      method: 'POST',\n      headers: {\n        'x-requested-with': 'XMLHttpRequest',\n      },\n      credentials: 'include',\n    }).catch(error => {\n      throw new Error(`Logout request failed, ${error}`);\n    });\n\n    if (!res.ok) {\n      const error: any = new Error(`Logout request failed, ${res.statusText}`);\n      error.status = res.status;\n      throw error;\n    }\n  }\n\n  private async buildUrl(path: string): Promise<string> {\n    const baseUrl = await this.discoveryApi.getBaseUrl('auth');\n    return `${baseUrl}/${this.provider.id}${path}?env=${this.environment}`;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { SessionScopesFunc } from './types';\n\nexport function hasScopes(\n  searched: Set<string>,\n  searchFor: Set<string>,\n): boolean {\n  for (const scope of searchFor) {\n    if (!searched.has(scope)) {\n      return false;\n    }\n  }\n  return true;\n}\n\ntype ScopeHelperOptions<T> = {\n  sessionScopes: SessionScopesFunc<T> | undefined;\n  defaultScopes?: Set<string>;\n};\n\nexport class SessionScopeHelper<T> {\n  constructor(private readonly options: ScopeHelperOptions<T>) {}\n\n  sessionExistsAndHasScope(\n    session: T | undefined,\n    scopes?: Set<string>,\n  ): boolean {\n    if (!session) {\n      return false;\n    }\n    if (!scopes) {\n      return true;\n    }\n    if (this.options.sessionScopes === undefined) {\n      return true;\n    }\n    const sessionScopes = this.options.sessionScopes(session);\n    return hasScopes(sessionScopes, scopes);\n  }\n\n  getExtendedScope(session: T | undefined, scopes?: Set<string>) {\n    const newScope = new Set(this.options.defaultScopes);\n    if (session && this.options.sessionScopes !== undefined) {\n      const sessionScopes = this.options.sessionScopes(session);\n      for (const scope of sessionScopes) {\n        newScope.add(scope);\n      }\n    }\n    if (scopes) {\n      for (const scope of scopes) {\n        newScope.add(scope);\n      }\n    }\n    return newScope;\n  }\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Observable = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n// === Symbol Support ===\nvar hasSymbols = function () {\n  return typeof Symbol === 'function';\n};\n\nvar hasSymbol = function (name) {\n  return hasSymbols() && Boolean(Symbol[name]);\n};\n\nvar getSymbol = function (name) {\n  return hasSymbol(name) ? Symbol[name] : '@@' + name;\n};\n\nif (hasSymbols() && !hasSymbol('observable')) {\n  Symbol.observable = Symbol('observable');\n}\n\nvar SymbolIterator = getSymbol('iterator');\nvar SymbolObservable = getSymbol('observable');\nvar SymbolSpecies = getSymbol('species'); // === Abstract Operations ===\n\nfunction getMethod(obj, key) {\n  var value = obj[key];\n  if (value == null) return undefined;\n  if (typeof value !== 'function') throw new TypeError(value + ' is not a function');\n  return value;\n}\n\nfunction getSpecies(obj) {\n  var ctor = obj.constructor;\n\n  if (ctor !== undefined) {\n    ctor = ctor[SymbolSpecies];\n\n    if (ctor === null) {\n      ctor = undefined;\n    }\n  }\n\n  return ctor !== undefined ? ctor : Observable;\n}\n\nfunction isObservable(x) {\n  return x instanceof Observable; // SPEC: Brand check\n}\n\nfunction hostReportError(e) {\n  if (hostReportError.log) {\n    hostReportError.log(e);\n  } else {\n    setTimeout(function () {\n      throw e;\n    });\n  }\n}\n\nfunction enqueue(fn) {\n  Promise.resolve().then(function () {\n    try {\n      fn();\n    } catch (e) {\n      hostReportError(e);\n    }\n  });\n}\n\nfunction cleanupSubscription(subscription) {\n  var cleanup = subscription._cleanup;\n  if (cleanup === undefined) return;\n  subscription._cleanup = undefined;\n\n  if (!cleanup) {\n    return;\n  }\n\n  try {\n    if (typeof cleanup === 'function') {\n      cleanup();\n    } else {\n      var unsubscribe = getMethod(cleanup, 'unsubscribe');\n\n      if (unsubscribe) {\n        unsubscribe.call(cleanup);\n      }\n    }\n  } catch (e) {\n    hostReportError(e);\n  }\n}\n\nfunction closeSubscription(subscription) {\n  subscription._observer = undefined;\n  subscription._queue = undefined;\n  subscription._state = 'closed';\n}\n\nfunction flushSubscription(subscription) {\n  var queue = subscription._queue;\n\n  if (!queue) {\n    return;\n  }\n\n  subscription._queue = undefined;\n  subscription._state = 'ready';\n\n  for (var i = 0; i < queue.length; ++i) {\n    notifySubscription(subscription, queue[i].type, queue[i].value);\n    if (subscription._state === 'closed') break;\n  }\n}\n\nfunction notifySubscription(subscription, type, value) {\n  subscription._state = 'running';\n  var observer = subscription._observer;\n\n  try {\n    var m = getMethod(observer, type);\n\n    switch (type) {\n      case 'next':\n        if (m) m.call(observer, value);\n        break;\n\n      case 'error':\n        closeSubscription(subscription);\n        if (m) m.call(observer, value);else throw value;\n        break;\n\n      case 'complete':\n        closeSubscription(subscription);\n        if (m) m.call(observer);\n        break;\n    }\n  } catch (e) {\n    hostReportError(e);\n  }\n\n  if (subscription._state === 'closed') cleanupSubscription(subscription);else if (subscription._state === 'running') subscription._state = 'ready';\n}\n\nfunction onNotify(subscription, type, value) {\n  if (subscription._state === 'closed') return;\n\n  if (subscription._state === 'buffering') {\n    subscription._queue.push({\n      type: type,\n      value: value\n    });\n\n    return;\n  }\n\n  if (subscription._state !== 'ready') {\n    subscription._state = 'buffering';\n    subscription._queue = [{\n      type: type,\n      value: value\n    }];\n    enqueue(function () {\n      return flushSubscription(subscription);\n    });\n    return;\n  }\n\n  notifySubscription(subscription, type, value);\n}\n\nvar Subscription =\n/*#__PURE__*/\nfunction () {\n  function Subscription(observer, subscriber) {\n    _classCallCheck(this, Subscription);\n\n    // ASSERT: observer is an object\n    // ASSERT: subscriber is callable\n    this._cleanup = undefined;\n    this._observer = observer;\n    this._queue = undefined;\n    this._state = 'initializing';\n    var subscriptionObserver = new SubscriptionObserver(this);\n\n    try {\n      this._cleanup = subscriber.call(undefined, subscriptionObserver);\n    } catch (e) {\n      subscriptionObserver.error(e);\n    }\n\n    if (this._state === 'initializing') this._state = 'ready';\n  }\n\n  _createClass(Subscription, [{\n    key: \"unsubscribe\",\n    value: function unsubscribe() {\n      if (this._state !== 'closed') {\n        closeSubscription(this);\n        cleanupSubscription(this);\n      }\n    }\n  }, {\n    key: \"closed\",\n    get: function () {\n      return this._state === 'closed';\n    }\n  }]);\n\n  return Subscription;\n}();\n\nvar SubscriptionObserver =\n/*#__PURE__*/\nfunction () {\n  function SubscriptionObserver(subscription) {\n    _classCallCheck(this, SubscriptionObserver);\n\n    this._subscription = subscription;\n  }\n\n  _createClass(SubscriptionObserver, [{\n    key: \"next\",\n    value: function next(value) {\n      onNotify(this._subscription, 'next', value);\n    }\n  }, {\n    key: \"error\",\n    value: function error(value) {\n      onNotify(this._subscription, 'error', value);\n    }\n  }, {\n    key: \"complete\",\n    value: function complete() {\n      onNotify(this._subscription, 'complete');\n    }\n  }, {\n    key: \"closed\",\n    get: function () {\n      return this._subscription._state === 'closed';\n    }\n  }]);\n\n  return SubscriptionObserver;\n}();\n\nvar Observable =\n/*#__PURE__*/\nfunction () {\n  function Observable(subscriber) {\n    _classCallCheck(this, Observable);\n\n    if (!(this instanceof Observable)) throw new TypeError('Observable cannot be called as a function');\n    if (typeof subscriber !== 'function') throw new TypeError('Observable initializer must be a function');\n    this._subscriber = subscriber;\n  }\n\n  _createClass(Observable, [{\n    key: \"subscribe\",\n    value: function subscribe(observer) {\n      if (typeof observer !== 'object' || observer === null) {\n        observer = {\n          next: observer,\n          error: arguments[1],\n          complete: arguments[2]\n        };\n      }\n\n      return new Subscription(observer, this._subscriber);\n    }\n  }, {\n    key: \"forEach\",\n    value: function forEach(fn) {\n      var _this = this;\n\n      return new Promise(function (resolve, reject) {\n        if (typeof fn !== 'function') {\n          reject(new TypeError(fn + ' is not a function'));\n          return;\n        }\n\n        function done() {\n          subscription.unsubscribe();\n          resolve();\n        }\n\n        var subscription = _this.subscribe({\n          next: function (value) {\n            try {\n              fn(value, done);\n            } catch (e) {\n              reject(e);\n              subscription.unsubscribe();\n            }\n          },\n          error: reject,\n          complete: resolve\n        });\n      });\n    }\n  }, {\n    key: \"map\",\n    value: function map(fn) {\n      var _this2 = this;\n\n      if (typeof fn !== 'function') throw new TypeError(fn + ' is not a function');\n      var C = getSpecies(this);\n      return new C(function (observer) {\n        return _this2.subscribe({\n          next: function (value) {\n            try {\n              value = fn(value);\n            } catch (e) {\n              return observer.error(e);\n            }\n\n            observer.next(value);\n          },\n          error: function (e) {\n            observer.error(e);\n          },\n          complete: function () {\n            observer.complete();\n          }\n        });\n      });\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(fn) {\n      var _this3 = this;\n\n      if (typeof fn !== 'function') throw new TypeError(fn + ' is not a function');\n      var C = getSpecies(this);\n      return new C(function (observer) {\n        return _this3.subscribe({\n          next: function (value) {\n            try {\n              if (!fn(value)) return;\n            } catch (e) {\n              return observer.error(e);\n            }\n\n            observer.next(value);\n          },\n          error: function (e) {\n            observer.error(e);\n          },\n          complete: function () {\n            observer.complete();\n          }\n        });\n      });\n    }\n  }, {\n    key: \"reduce\",\n    value: function reduce(fn) {\n      var _this4 = this;\n\n      if (typeof fn !== 'function') throw new TypeError(fn + ' is not a function');\n      var C = getSpecies(this);\n      var hasSeed = arguments.length > 1;\n      var hasValue = false;\n      var seed = arguments[1];\n      var acc = seed;\n      return new C(function (observer) {\n        return _this4.subscribe({\n          next: function (value) {\n            var first = !hasValue;\n            hasValue = true;\n\n            if (!first || hasSeed) {\n              try {\n                acc = fn(acc, value);\n              } catch (e) {\n                return observer.error(e);\n              }\n            } else {\n              acc = value;\n            }\n          },\n          error: function (e) {\n            observer.error(e);\n          },\n          complete: function () {\n            if (!hasValue && !hasSeed) return observer.error(new TypeError('Cannot reduce an empty sequence'));\n            observer.next(acc);\n            observer.complete();\n          }\n        });\n      });\n    }\n  }, {\n    key: \"concat\",\n    value: function concat() {\n      var _this5 = this;\n\n      for (var _len = arguments.length, sources = new Array(_len), _key = 0; _key < _len; _key++) {\n        sources[_key] = arguments[_key];\n      }\n\n      var C = getSpecies(this);\n      return new C(function (observer) {\n        var subscription;\n        var index = 0;\n\n        function startNext(next) {\n          subscription = next.subscribe({\n            next: function (v) {\n              observer.next(v);\n            },\n            error: function (e) {\n              observer.error(e);\n            },\n            complete: function () {\n              if (index === sources.length) {\n                subscription = undefined;\n                observer.complete();\n              } else {\n                startNext(C.from(sources[index++]));\n              }\n            }\n          });\n        }\n\n        startNext(_this5);\n        return function () {\n          if (subscription) {\n            subscription.unsubscribe();\n            subscription = undefined;\n          }\n        };\n      });\n    }\n  }, {\n    key: \"flatMap\",\n    value: function flatMap(fn) {\n      var _this6 = this;\n\n      if (typeof fn !== 'function') throw new TypeError(fn + ' is not a function');\n      var C = getSpecies(this);\n      return new C(function (observer) {\n        var subscriptions = [];\n\n        var outer = _this6.subscribe({\n          next: function (value) {\n            if (fn) {\n              try {\n                value = fn(value);\n              } catch (e) {\n                return observer.error(e);\n              }\n            }\n\n            var inner = C.from(value).subscribe({\n              next: function (value) {\n                observer.next(value);\n              },\n              error: function (e) {\n                observer.error(e);\n              },\n              complete: function () {\n                var i = subscriptions.indexOf(inner);\n                if (i >= 0) subscriptions.splice(i, 1);\n                completeIfDone();\n              }\n            });\n            subscriptions.push(inner);\n          },\n          error: function (e) {\n            observer.error(e);\n          },\n          complete: function () {\n            completeIfDone();\n          }\n        });\n\n        function completeIfDone() {\n          if (outer.closed && subscriptions.length === 0) observer.complete();\n        }\n\n        return function () {\n          subscriptions.forEach(function (s) {\n            return s.unsubscribe();\n          });\n          outer.unsubscribe();\n        };\n      });\n    }\n  }, {\n    key: SymbolObservable,\n    value: function () {\n      return this;\n    }\n  }], [{\n    key: \"from\",\n    value: function from(x) {\n      var C = typeof this === 'function' ? this : Observable;\n      if (x == null) throw new TypeError(x + ' is not an object');\n      var method = getMethod(x, SymbolObservable);\n\n      if (method) {\n        var observable = method.call(x);\n        if (Object(observable) !== observable) throw new TypeError(observable + ' is not an object');\n        if (isObservable(observable) && observable.constructor === C) return observable;\n        return new C(function (observer) {\n          return observable.subscribe(observer);\n        });\n      }\n\n      if (hasSymbol('iterator')) {\n        method = getMethod(x, SymbolIterator);\n\n        if (method) {\n          return new C(function (observer) {\n            enqueue(function () {\n              if (observer.closed) return;\n              var _iteratorNormalCompletion = true;\n              var _didIteratorError = false;\n              var _iteratorError = undefined;\n\n              try {\n                for (var _iterator = method.call(x)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                  var _item = _step.value;\n                  observer.next(_item);\n                  if (observer.closed) return;\n                }\n              } catch (err) {\n                _didIteratorError = true;\n                _iteratorError = err;\n              } finally {\n                try {\n                  if (!_iteratorNormalCompletion && _iterator.return != null) {\n                    _iterator.return();\n                  }\n                } finally {\n                  if (_didIteratorError) {\n                    throw _iteratorError;\n                  }\n                }\n              }\n\n              observer.complete();\n            });\n          });\n        }\n      }\n\n      if (Array.isArray(x)) {\n        return new C(function (observer) {\n          enqueue(function () {\n            if (observer.closed) return;\n\n            for (var i = 0; i < x.length; ++i) {\n              observer.next(x[i]);\n              if (observer.closed) return;\n            }\n\n            observer.complete();\n          });\n        });\n      }\n\n      throw new TypeError(x + ' is not observable');\n    }\n  }, {\n    key: \"of\",\n    value: function of() {\n      for (var _len2 = arguments.length, items = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        items[_key2] = arguments[_key2];\n      }\n\n      var C = typeof this === 'function' ? this : Observable;\n      return new C(function (observer) {\n        enqueue(function () {\n          if (observer.closed) return;\n\n          for (var i = 0; i < items.length; ++i) {\n            observer.next(items[i]);\n            if (observer.closed) return;\n          }\n\n          observer.complete();\n        });\n      });\n    }\n  }, {\n    key: SymbolSpecies,\n    get: function () {\n      return this;\n    }\n  }]);\n\n  return Observable;\n}();\n\nexports.Observable = Observable;\n\nif (hasSymbols()) {\n  Object.defineProperty(Observable, Symbol('extensions'), {\n    value: {\n      symbol: SymbolObservable,\n      hostReportError: hostReportError\n    },\n    configurable: true\n  });\n}","module.exports = require('./lib/Observable.js').Observable;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Observable } from '@backstage/core-plugin-api';\nimport ObservableImpl from 'zen-observable';\n\n// TODO(Rugvip): These are stopgap and probably incomplete implementations of subjects.\n// If we add a more complete Observables library they should be replaced.\n\n/**\n * A basic implementation of ReactiveX publish subjects.\n *\n * A subject is a convenient way to create an observable when you want\n * to fan out a single value to all subscribers.\n *\n * See http://reactivex.io/documentation/subject.html\n */\nexport class PublishSubject<T>\n  implements Observable<T>, ZenObservable.SubscriptionObserver<T>\n{\n  private isClosed = false;\n  private terminatingError?: Error;\n\n  private readonly observable = new ObservableImpl<T>(subscriber => {\n    if (this.isClosed) {\n      if (this.terminatingError) {\n        subscriber.error(this.terminatingError);\n      } else {\n        subscriber.complete();\n      }\n      return () => {};\n    }\n\n    this.subscribers.add(subscriber);\n    return () => {\n      this.subscribers.delete(subscriber);\n    };\n  });\n\n  private readonly subscribers = new Set<\n    ZenObservable.SubscriptionObserver<T>\n  >();\n\n  [Symbol.observable]() {\n    return this;\n  }\n\n  get closed() {\n    return this.isClosed;\n  }\n\n  next(value: T) {\n    if (this.isClosed) {\n      throw new Error('PublishSubject is closed');\n    }\n    this.subscribers.forEach(subscriber => subscriber.next(value));\n  }\n\n  error(error: Error) {\n    if (this.isClosed) {\n      throw new Error('PublishSubject is closed');\n    }\n    this.isClosed = true;\n    this.terminatingError = error;\n    this.subscribers.forEach(subscriber => subscriber.error(error));\n  }\n\n  complete() {\n    if (this.isClosed) {\n      throw new Error('PublishSubject is closed');\n    }\n    this.isClosed = true;\n    this.subscribers.forEach(subscriber => subscriber.complete());\n  }\n\n  subscribe(observer: ZenObservable.Observer<T>): ZenObservable.Subscription;\n  subscribe(\n    onNext: (value: T) => void,\n    onError?: (error: any) => void,\n    onComplete?: () => void,\n  ): ZenObservable.Subscription;\n  subscribe(\n    onNext: ZenObservable.Observer<T> | ((value: T) => void),\n    onError?: (error: any) => void,\n    onComplete?: () => void,\n  ): ZenObservable.Subscription {\n    const observer =\n      typeof onNext === 'function'\n        ? {\n            next: onNext,\n            error: onError,\n            complete: onComplete,\n          }\n        : onNext;\n\n    return this.observable.subscribe(observer);\n  }\n}\n\n/**\n * A basic implementation of ReactiveX behavior subjects.\n *\n * A subject is a convenient way to create an observable when you want\n * to fan out a single value to all subscribers.\n *\n * The BehaviorSubject will emit the most recently emitted value or error\n * whenever a new observer subscribes to the subject.\n *\n * See http://reactivex.io/documentation/subject.html\n */\nexport class BehaviorSubject<T>\n  implements Observable<T>, ZenObservable.SubscriptionObserver<T>\n{\n  private isClosed = false;\n  private currentValue: T;\n  private terminatingError?: Error;\n\n  constructor(value: T) {\n    this.currentValue = value;\n  }\n\n  private readonly observable = new ObservableImpl<T>(subscriber => {\n    if (this.isClosed) {\n      if (this.terminatingError) {\n        subscriber.error(this.terminatingError);\n      } else {\n        subscriber.complete();\n      }\n      return () => {};\n    }\n\n    subscriber.next(this.currentValue);\n\n    this.subscribers.add(subscriber);\n    return () => {\n      this.subscribers.delete(subscriber);\n    };\n  });\n\n  private readonly subscribers = new Set<\n    ZenObservable.SubscriptionObserver<T>\n  >();\n\n  [Symbol.observable]() {\n    return this;\n  }\n\n  get closed() {\n    return this.isClosed;\n  }\n\n  next(value: T) {\n    if (this.isClosed) {\n      throw new Error('BehaviorSubject is closed');\n    }\n    this.currentValue = value;\n    this.subscribers.forEach(subscriber => subscriber.next(value));\n  }\n\n  error(error: Error) {\n    if (this.isClosed) {\n      throw new Error('BehaviorSubject is closed');\n    }\n    this.isClosed = true;\n    this.terminatingError = error;\n    this.subscribers.forEach(subscriber => subscriber.error(error));\n  }\n\n  complete() {\n    if (this.isClosed) {\n      throw new Error('BehaviorSubject is closed');\n    }\n    this.isClosed = true;\n    this.subscribers.forEach(subscriber => subscriber.complete());\n  }\n\n  subscribe(observer: ZenObservable.Observer<T>): ZenObservable.Subscription;\n  subscribe(\n    onNext: (value: T) => void,\n    onError?: (error: any) => void,\n    onComplete?: () => void,\n  ): ZenObservable.Subscription;\n  subscribe(\n    onNext: ZenObservable.Observer<T> | ((value: T) => void),\n    onError?: (error: any) => void,\n    onComplete?: () => void,\n  ): ZenObservable.Subscription {\n    const observer =\n      typeof onNext === 'function'\n        ? {\n            next: onNext,\n            error: onError,\n            complete: onComplete,\n          }\n        : onNext;\n\n    return this.observable.subscribe(observer);\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { BehaviorSubject } from '../subjects';\nimport { Observable, SessionState } from '@backstage/core-plugin-api';\n\nexport class SessionStateTracker {\n  private readonly subject = new BehaviorSubject<SessionState>(\n    SessionState.SignedOut,\n  );\n\n  private signedIn: boolean = false;\n\n  setIsSignedIn(isSignedIn: boolean) {\n    if (this.signedIn !== isSignedIn) {\n      this.signedIn = isSignedIn;\n      this.subject.next(\n        this.signedIn ? SessionState.SignedIn : SessionState.SignedOut,\n      );\n    }\n  }\n\n  sessionState$(): Observable<SessionState> {\n    return this.subject;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  SessionManager,\n  SessionScopesFunc,\n  SessionShouldRefreshFunc,\n  GetSessionOptions,\n} from './types';\nimport { AuthConnector } from '../AuthConnector';\nimport { SessionScopeHelper, hasScopes } from './common';\nimport { SessionStateTracker } from './SessionStateTracker';\n\ntype Options<T> = {\n  /** The connector used for acting on the auth session */\n  connector: AuthConnector<T>;\n  /** Used to get the scope of the session */\n  sessionScopes: SessionScopesFunc<T>;\n  /** Used to check if the session needs to be refreshed */\n  sessionShouldRefresh: SessionShouldRefreshFunc<T>;\n  /** The default scopes that should always be present in a session, defaults to none. */\n  defaultScopes?: Set<string>;\n};\n\n/**\n * RefreshingAuthSessionManager manages an underlying session that has\n * and expiration time and needs to be refreshed periodically.\n */\nexport class RefreshingAuthSessionManager<T> implements SessionManager<T> {\n  private readonly connector: AuthConnector<T>;\n  private readonly helper: SessionScopeHelper<T>;\n  private readonly sessionScopesFunc: SessionScopesFunc<T>;\n  private readonly sessionShouldRefreshFunc: SessionShouldRefreshFunc<T>;\n  private readonly stateTracker = new SessionStateTracker();\n\n  private refreshPromise?: Promise<T>;\n  private currentSession: T | undefined;\n\n  constructor(options: Options<T>) {\n    const {\n      connector,\n      defaultScopes = new Set(),\n      sessionScopes,\n      sessionShouldRefresh,\n    } = options;\n\n    this.connector = connector;\n    this.sessionScopesFunc = sessionScopes;\n    this.sessionShouldRefreshFunc = sessionShouldRefresh;\n    this.helper = new SessionScopeHelper({ sessionScopes, defaultScopes });\n  }\n\n  async getSession(options: GetSessionOptions): Promise<T | undefined> {\n    if (\n      this.helper.sessionExistsAndHasScope(this.currentSession, options.scopes)\n    ) {\n      const shouldRefresh = this.sessionShouldRefreshFunc(this.currentSession!);\n      if (!shouldRefresh) {\n        return this.currentSession!;\n      }\n\n      try {\n        const refreshedSession = await this.collapsedSessionRefresh();\n        const currentScopes = this.sessionScopesFunc(this.currentSession!);\n        const refreshedScopes = this.sessionScopesFunc(refreshedSession);\n        if (hasScopes(refreshedScopes, currentScopes)) {\n          this.currentSession = refreshedSession;\n        }\n        return refreshedSession;\n      } catch (error) {\n        if (options.optional) {\n          return undefined;\n        }\n        throw error;\n      }\n    }\n\n    // The user may still have a valid refresh token in their cookies. Attempt to\n    // initiate a fresh session through the backend using that refresh token.\n    //\n    // We skip this check if an instant login popup is requested, as we need to\n    // stay in a synchronous call stack from the user interaction. The downside\n    // is that that the user will sometimes be requested to log in even if they\n    // already had an existing session.\n    if (!this.currentSession && !options.instantPopup) {\n      try {\n        const newSession = await this.collapsedSessionRefresh();\n        this.currentSession = newSession;\n        // The session might not have the scopes requested so go back and check again\n        return this.getSession(options);\n      } catch {\n        // If the refresh attempt fails we assume we don't have a session, so continue to create one.\n      }\n    }\n\n    // If we continue here we will show a popup, so exit if this is an optional session request.\n    if (options.optional) {\n      return undefined;\n    }\n\n    // We can call authRequester multiple times, the returned session will contain all requested scopes.\n    this.currentSession = await this.connector.createSession({\n      ...options,\n      scopes: this.helper.getExtendedScope(this.currentSession, options.scopes),\n    });\n    this.stateTracker.setIsSignedIn(true);\n    return this.currentSession;\n  }\n\n  async removeSession() {\n    this.currentSession = undefined;\n    await this.connector.removeSession();\n    this.stateTracker.setIsSignedIn(false);\n  }\n\n  sessionState$() {\n    return this.stateTracker.sessionState$();\n  }\n\n  private async collapsedSessionRefresh(): Promise<T> {\n    if (this.refreshPromise) {\n      return this.refreshPromise;\n    }\n\n    this.refreshPromise = this.connector.refreshSession();\n\n    try {\n      const session = await this.refreshPromise;\n      this.stateTracker.setIsSignedIn(true);\n      return session;\n    } finally {\n      delete this.refreshPromise;\n    }\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { MutableSessionManager, GetSessionOptions } from './types';\nimport { AuthConnector } from '../AuthConnector';\nimport { SessionScopeHelper } from './common';\nimport { SessionStateTracker } from './SessionStateTracker';\n\ntype Options<T> = {\n  /** The connector used for acting on the auth session */\n  connector: AuthConnector<T>;\n  /** Used to get the scope of the session */\n  sessionScopes?: (session: T) => Set<string>;\n  /** The default scopes that should always be present in a session, defaults to none. */\n  defaultScopes?: Set<string>;\n};\n\n/**\n * StaticAuthSessionManager manages an underlying session that does not expire.\n */\nexport class StaticAuthSessionManager<T> implements MutableSessionManager<T> {\n  private readonly connector: AuthConnector<T>;\n  private readonly helper: SessionScopeHelper<T>;\n  private readonly stateTracker = new SessionStateTracker();\n\n  private currentSession: T | undefined;\n\n  constructor(options: Options<T>) {\n    const { connector, defaultScopes = new Set(), sessionScopes } = options;\n\n    this.connector = connector;\n    this.helper = new SessionScopeHelper({ sessionScopes, defaultScopes });\n  }\n\n  setSession(session: T | undefined): void {\n    this.currentSession = session;\n    this.stateTracker.setIsSignedIn(Boolean(session));\n  }\n\n  async getSession(options: GetSessionOptions): Promise<T | undefined> {\n    if (\n      this.helper.sessionExistsAndHasScope(this.currentSession, options.scopes)\n    ) {\n      return this.currentSession;\n    }\n\n    // If we continue here we will show a popup, so exit if this is an optional session request.\n    if (options.optional) {\n      return undefined;\n    }\n\n    // We can call authRequester multiple times, the returned session will contain all requested scopes.\n    this.currentSession = await this.connector.createSession({\n      ...options,\n      scopes: this.helper.getExtendedScope(this.currentSession, options.scopes),\n    });\n    this.stateTracker.setIsSignedIn(true);\n    return this.currentSession;\n  }\n\n  async removeSession() {\n    this.currentSession = undefined;\n    await this.connector.removeSession();\n    this.stateTracker.setIsSignedIn(false);\n  }\n\n  sessionState$() {\n    return this.stateTracker.sessionState$();\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  SessionManager,\n  MutableSessionManager,\n  SessionScopesFunc,\n  SessionShouldRefreshFunc,\n  GetSessionOptions,\n} from './types';\nimport { SessionScopeHelper } from './common';\n\ntype Options<T> = {\n  /** The connector used for acting on the auth session */\n  manager: MutableSessionManager<T>;\n  /** Storage key to use to store sessions */\n  storageKey: string;\n  /** Used to get the scope of the session */\n  sessionScopes?: SessionScopesFunc<T>;\n  /** Used to check if the session needs to be refreshed, defaults to never refresh */\n  sessionShouldRefresh?: SessionShouldRefreshFunc<T>;\n};\n\n/**\n * AuthSessionStore decorates another SessionManager with a functionality\n * to store the session in local storage.\n *\n * Session is serialized to JSON with special support for following types: Set.\n */\nexport class AuthSessionStore<T> implements SessionManager<T> {\n  private readonly manager: MutableSessionManager<T>;\n  private readonly storageKey: string;\n  private readonly sessionShouldRefreshFunc: SessionShouldRefreshFunc<T>;\n  private readonly helper: SessionScopeHelper<T>;\n\n  constructor(options: Options<T>) {\n    const {\n      manager,\n      storageKey,\n      sessionScopes,\n      sessionShouldRefresh = () => false,\n    } = options;\n\n    this.manager = manager;\n    this.storageKey = storageKey;\n    this.sessionShouldRefreshFunc = sessionShouldRefresh;\n    this.helper = new SessionScopeHelper({\n      sessionScopes,\n      defaultScopes: new Set(),\n    });\n  }\n\n  async getSession(options: GetSessionOptions): Promise<T | undefined> {\n    const { scopes } = options;\n    const session = this.loadSession();\n\n    if (this.helper.sessionExistsAndHasScope(session, scopes)) {\n      const shouldRefresh = this.sessionShouldRefreshFunc(session!);\n\n      if (!shouldRefresh) {\n        this.manager.setSession(session!);\n        return session!;\n      }\n    }\n\n    const newSession = await this.manager.getSession(options);\n    this.saveSession(newSession);\n    return newSession;\n  }\n\n  async removeSession() {\n    localStorage.removeItem(this.storageKey);\n    await this.manager.removeSession();\n  }\n\n  sessionState$() {\n    return this.manager.sessionState$();\n  }\n\n  private loadSession(): T | undefined {\n    try {\n      const sessionJson = localStorage.getItem(this.storageKey);\n      if (sessionJson) {\n        const session = JSON.parse(sessionJson, (_key, value) => {\n          if (value?.__type === 'Set') {\n            return new Set(value.__value);\n          }\n          return value;\n        });\n        return session;\n      }\n\n      return undefined;\n    } catch (error) {\n      localStorage.removeItem(this.storageKey);\n      return undefined;\n    }\n  }\n\n  private saveSession(session: T | undefined) {\n    if (session === undefined) {\n      localStorage.removeItem(this.storageKey);\n    } else {\n      localStorage.setItem(\n        this.storageKey,\n        JSON.stringify(session, (_key, value) => {\n          if (value instanceof Set) {\n            return {\n              __type: 'Set',\n              __value: Array.from(value),\n            };\n          }\n          return value;\n        }),\n      );\n    }\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport GithubIcon from '@material-ui/icons/AcUnit';\nimport { DefaultAuthConnector } from '../../../../lib/AuthConnector';\nimport { GithubSession } from './types';\nimport {\n  OAuthApi,\n  SessionApi,\n  SessionState,\n  ProfileInfo,\n  BackstageIdentity,\n  AuthRequestOptions,\n  Observable,\n} from '@backstage/core-plugin-api';\nimport { SessionManager } from '../../../../lib/AuthSessionManager/types';\nimport {\n  AuthSessionStore,\n  StaticAuthSessionManager,\n} from '../../../../lib/AuthSessionManager';\nimport { OAuthApiCreateOptions } from '../types';\n\nexport type GithubAuthResponse = {\n  providerInfo: {\n    accessToken: string;\n    scope: string;\n    expiresInSeconds: number;\n  };\n  profile: ProfileInfo;\n  backstageIdentity: BackstageIdentity;\n};\n\nconst DEFAULT_PROVIDER = {\n  id: 'github',\n  title: 'GitHub',\n  icon: GithubIcon,\n};\n\nclass GithubAuth implements OAuthApi, SessionApi {\n  static create({\n    discoveryApi,\n    environment = 'development',\n    provider = DEFAULT_PROVIDER,\n    oauthRequestApi,\n    defaultScopes = ['read:user'],\n  }: OAuthApiCreateOptions) {\n    const connector = new DefaultAuthConnector({\n      discoveryApi,\n      environment,\n      provider,\n      oauthRequestApi: oauthRequestApi,\n      sessionTransform(res: GithubAuthResponse): GithubSession {\n        return {\n          ...res,\n          providerInfo: {\n            accessToken: res.providerInfo.accessToken,\n            scopes: GithubAuth.normalizeScope(res.providerInfo.scope),\n            expiresAt: new Date(\n              Date.now() + res.providerInfo.expiresInSeconds * 1000,\n            ),\n          },\n        };\n      },\n    });\n\n    const sessionManager = new StaticAuthSessionManager({\n      connector,\n      defaultScopes: new Set(defaultScopes),\n      sessionScopes: (session: GithubSession) => session.providerInfo.scopes,\n    });\n\n    const authSessionStore = new AuthSessionStore<GithubSession>({\n      manager: sessionManager,\n      storageKey: `${provider.id}Session`,\n      sessionScopes: (session: GithubSession) => session.providerInfo.scopes,\n    });\n\n    return new GithubAuth(authSessionStore);\n  }\n\n  constructor(private readonly sessionManager: SessionManager<GithubSession>) {}\n\n  async signIn() {\n    await this.getAccessToken();\n  }\n\n  async signOut() {\n    await this.sessionManager.removeSession();\n  }\n\n  sessionState$(): Observable<SessionState> {\n    return this.sessionManager.sessionState$();\n  }\n\n  async getAccessToken(scope?: string, options?: AuthRequestOptions) {\n    const session = await this.sessionManager.getSession({\n      ...options,\n      scopes: GithubAuth.normalizeScope(scope),\n    });\n    return session?.providerInfo.accessToken ?? '';\n  }\n\n  async getBackstageIdentity(\n    options: AuthRequestOptions = {},\n  ): Promise<BackstageIdentity | undefined> {\n    const session = await this.sessionManager.getSession(options);\n    return session?.backstageIdentity;\n  }\n\n  async getProfile(options: AuthRequestOptions = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session?.profile;\n  }\n\n  static normalizeScope(scope?: string): Set<string> {\n    if (!scope) {\n      return new Set();\n    }\n\n    const scopeList = Array.isArray(scope)\n      ? scope\n      : scope.split(/[\\s|,]/).filter(Boolean);\n\n    return new Set(scopeList);\n  }\n}\nexport default GithubAuth;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport OAuth2Icon from '@material-ui/icons/AcUnit';\nimport { DefaultAuthConnector } from '../../../../lib/AuthConnector';\nimport { RefreshingAuthSessionManager } from '../../../../lib/AuthSessionManager';\nimport { SessionManager } from '../../../../lib/AuthSessionManager/types';\nimport {\n  AuthRequestOptions,\n  BackstageIdentity,\n  OAuthApi,\n  OpenIdConnectApi,\n  ProfileInfo,\n  ProfileInfoApi,\n  SessionState,\n  SessionApi,\n  BackstageIdentityApi,\n  Observable,\n} from '@backstage/core-plugin-api';\nimport { OAuth2Session } from './types';\nimport { OAuthApiCreateOptions } from '../types';\n\ntype Options = {\n  sessionManager: SessionManager<OAuth2Session>;\n  scopeTransform: (scopes: string[]) => string[];\n};\n\ntype CreateOptions = OAuthApiCreateOptions & {\n  scopeTransform?: (scopes: string[]) => string[];\n};\n\nexport type OAuth2Response = {\n  providerInfo: {\n    accessToken: string;\n    idToken: string;\n    scope: string;\n    expiresInSeconds: number;\n  };\n  profile: ProfileInfo;\n  backstageIdentity: BackstageIdentity;\n};\n\nconst DEFAULT_PROVIDER = {\n  id: 'oauth2',\n  title: 'Your Identity Provider',\n  icon: OAuth2Icon,\n};\n\nclass OAuth2\n  implements\n    OAuthApi,\n    OpenIdConnectApi,\n    ProfileInfoApi,\n    BackstageIdentityApi,\n    SessionApi\n{\n  static create({\n    discoveryApi,\n    environment = 'development',\n    provider = DEFAULT_PROVIDER,\n    oauthRequestApi,\n    defaultScopes = [],\n    scopeTransform = x => x,\n  }: CreateOptions) {\n    const connector = new DefaultAuthConnector({\n      discoveryApi,\n      environment,\n      provider,\n      oauthRequestApi: oauthRequestApi,\n      sessionTransform(res: OAuth2Response): OAuth2Session {\n        return {\n          ...res,\n          providerInfo: {\n            idToken: res.providerInfo.idToken,\n            accessToken: res.providerInfo.accessToken,\n            scopes: OAuth2.normalizeScopes(\n              scopeTransform,\n              res.providerInfo.scope,\n            ),\n            expiresAt: new Date(\n              Date.now() + res.providerInfo.expiresInSeconds * 1000,\n            ),\n          },\n        };\n      },\n    });\n\n    const sessionManager = new RefreshingAuthSessionManager({\n      connector,\n      defaultScopes: new Set(defaultScopes),\n      sessionScopes: (session: OAuth2Session) => session.providerInfo.scopes,\n      sessionShouldRefresh: (session: OAuth2Session) => {\n        const expiresInSec =\n          (session.providerInfo.expiresAt.getTime() - Date.now()) / 1000;\n        return expiresInSec < 60 * 5;\n      },\n    });\n\n    return new OAuth2({ sessionManager, scopeTransform });\n  }\n\n  private readonly sessionManager: SessionManager<OAuth2Session>;\n  private readonly scopeTransform: (scopes: string[]) => string[];\n\n  constructor(options: Options) {\n    this.sessionManager = options.sessionManager;\n    this.scopeTransform = options.scopeTransform;\n  }\n\n  async signIn() {\n    await this.getAccessToken();\n  }\n\n  async signOut() {\n    await this.sessionManager.removeSession();\n  }\n\n  sessionState$(): Observable<SessionState> {\n    return this.sessionManager.sessionState$();\n  }\n\n  async getAccessToken(\n    scope?: string | string[],\n    options?: AuthRequestOptions,\n  ) {\n    const normalizedScopes = OAuth2.normalizeScopes(this.scopeTransform, scope);\n    const session = await this.sessionManager.getSession({\n      ...options,\n      scopes: normalizedScopes,\n    });\n    return session?.providerInfo.accessToken ?? '';\n  }\n\n  async getIdToken(options: AuthRequestOptions = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session?.providerInfo.idToken ?? '';\n  }\n\n  async getBackstageIdentity(\n    options: AuthRequestOptions = {},\n  ): Promise<BackstageIdentity | undefined> {\n    const session = await this.sessionManager.getSession(options);\n    return session?.backstageIdentity;\n  }\n\n  async getProfile(options: AuthRequestOptions = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session?.profile;\n  }\n\n  private static normalizeScopes(\n    scopeTransform: (scopes: string[]) => string[],\n    scopes?: string | string[],\n  ): Set<string> {\n    if (!scopes) {\n      return new Set();\n    }\n\n    const scopeList = Array.isArray(scopes)\n      ? scopes\n      : scopes.split(/[\\s|,]/).filter(Boolean);\n\n    return new Set(scopeTransform(scopeList));\n  }\n}\n\nexport default OAuth2;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport GitlabIcon from '@material-ui/icons/AcUnit';\nimport { gitlabAuthApiRef } from '@backstage/core-plugin-api';\nimport { OAuth2 } from '../oauth2';\nimport { OAuthApiCreateOptions } from '../types';\n\nconst DEFAULT_PROVIDER = {\n  id: 'gitlab',\n  title: 'GitLab',\n  icon: GitlabIcon,\n};\n\nclass GitlabAuth {\n  static create({\n    discoveryApi,\n    environment = 'development',\n    provider = DEFAULT_PROVIDER,\n    oauthRequestApi,\n    defaultScopes = ['read_user'],\n  }: OAuthApiCreateOptions): typeof gitlabAuthApiRef.T {\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n    });\n  }\n}\nexport default GitlabAuth;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport GoogleIcon from '@material-ui/icons/AcUnit';\nimport { googleAuthApiRef } from '@backstage/core-plugin-api';\nimport { OAuth2 } from '../oauth2';\nimport { OAuthApiCreateOptions } from '../types';\n\nconst DEFAULT_PROVIDER = {\n  id: 'google',\n  title: 'Google',\n  icon: GoogleIcon,\n};\n\nconst SCOPE_PREFIX = 'https://www.googleapis.com/auth/';\n\nclass GoogleAuth {\n  static create({\n    discoveryApi,\n    oauthRequestApi,\n    environment = 'development',\n    provider = DEFAULT_PROVIDER,\n    defaultScopes = [\n      'openid',\n      `${SCOPE_PREFIX}userinfo.email`,\n      `${SCOPE_PREFIX}userinfo.profile`,\n    ],\n  }: OAuthApiCreateOptions): typeof googleAuthApiRef.T {\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n      scopeTransform(scopes: string[]) {\n        return scopes.map(scope => {\n          if (scope === 'openid') {\n            return scope;\n          }\n\n          if (scope === 'profile' || scope === 'email') {\n            return `${SCOPE_PREFIX}userinfo.${scope}`;\n          }\n\n          if (scope.startsWith(SCOPE_PREFIX)) {\n            return scope;\n          }\n\n          return `${SCOPE_PREFIX}${scope}`;\n        });\n      },\n    });\n  }\n}\nexport default GoogleAuth;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport OktaIcon from '@material-ui/icons/AcUnit';\nimport { oktaAuthApiRef } from '@backstage/core-plugin-api';\nimport { OAuth2 } from '../oauth2';\nimport { OAuthApiCreateOptions } from '../types';\n\nconst DEFAULT_PROVIDER = {\n  id: 'okta',\n  title: 'Okta',\n  icon: OktaIcon,\n};\n\nconst OKTA_OIDC_SCOPES: Set<String> = new Set([\n  'openid',\n  'profile',\n  'email',\n  'phone',\n  'address',\n  'groups',\n  'offline_access',\n]);\n\nconst OKTA_SCOPE_PREFIX: string = 'okta.';\n\nclass OktaAuth {\n  static create({\n    discoveryApi,\n    environment = 'development',\n    provider = DEFAULT_PROVIDER,\n    oauthRequestApi,\n    defaultScopes = ['openid', 'email', 'profile', 'offline_access'],\n  }: OAuthApiCreateOptions): typeof oktaAuthApiRef.T {\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n      scopeTransform(scopes) {\n        return scopes.map(scope => {\n          if (OKTA_OIDC_SCOPES.has(scope)) {\n            return scope;\n          }\n\n          if (scope.startsWith(OKTA_SCOPE_PREFIX)) {\n            return scope;\n          }\n\n          return `${OKTA_SCOPE_PREFIX}${scope}`;\n        });\n      },\n    });\n  }\n}\n\nexport default OktaAuth;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport SamlIcon from '@material-ui/icons/AcUnit';\nimport { DirectAuthConnector } from '../../../../lib/AuthConnector';\nimport { SessionManager } from '../../../../lib/AuthSessionManager/types';\nimport {\n  ProfileInfo,\n  BackstageIdentity,\n  SessionState,\n  AuthRequestOptions,\n  ProfileInfoApi,\n  BackstageIdentityApi,\n  SessionApi,\n  Observable,\n} from '@backstage/core-plugin-api';\nimport { SamlSession } from './types';\nimport {\n  AuthSessionStore,\n  StaticAuthSessionManager,\n} from '../../../../lib/AuthSessionManager';\nimport { AuthApiCreateOptions } from '../types';\n\nexport type SamlAuthResponse = {\n  profile: ProfileInfo;\n  backstageIdentity: BackstageIdentity;\n};\n\nconst DEFAULT_PROVIDER = {\n  id: 'saml',\n  title: 'SAML',\n  icon: SamlIcon,\n};\n\nclass SamlAuth implements ProfileInfoApi, BackstageIdentityApi, SessionApi {\n  static create({\n    discoveryApi,\n    environment = 'development',\n    provider = DEFAULT_PROVIDER,\n  }: AuthApiCreateOptions) {\n    const connector = new DirectAuthConnector<SamlSession>({\n      discoveryApi,\n      environment,\n      provider,\n    });\n\n    const sessionManager = new StaticAuthSessionManager<SamlSession>({\n      connector,\n    });\n\n    const authSessionStore = new AuthSessionStore<SamlSession>({\n      manager: sessionManager,\n      storageKey: `${provider.id}Session`,\n    });\n\n    return new SamlAuth(authSessionStore);\n  }\n\n  sessionState$(): Observable<SessionState> {\n    return this.sessionManager.sessionState$();\n  }\n\n  constructor(private readonly sessionManager: SessionManager<SamlSession>) {}\n\n  async signIn() {\n    await this.getBackstageIdentity({});\n  }\n  async signOut() {\n    await this.sessionManager.removeSession();\n  }\n\n  async getBackstageIdentity(\n    options: AuthRequestOptions = {},\n  ): Promise<BackstageIdentity | undefined> {\n    const session = await this.sessionManager.getSession(options);\n    return session?.backstageIdentity;\n  }\n\n  async getProfile(options: AuthRequestOptions = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session?.profile;\n  }\n}\n\nexport default SamlAuth;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Auth0Icon from '@material-ui/icons/AcUnit';\nimport { auth0AuthApiRef } from '@backstage/core-plugin-api';\nimport { OAuth2 } from '../oauth2';\nimport { OAuthApiCreateOptions } from '../types';\n\nconst DEFAULT_PROVIDER = {\n  id: 'auth0',\n  title: 'Auth0',\n  icon: Auth0Icon,\n};\n\nclass Auth0Auth {\n  static create({\n    discoveryApi,\n    environment = 'development',\n    provider = DEFAULT_PROVIDER,\n    oauthRequestApi,\n    defaultScopes = ['openid', `email`, `profile`],\n  }: OAuthApiCreateOptions): typeof auth0AuthApiRef.T {\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n    });\n  }\n}\n\nexport default Auth0Auth;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport MicrosoftIcon from '@material-ui/icons/AcUnit';\nimport { microsoftAuthApiRef } from '@backstage/core-plugin-api';\nimport { OAuth2 } from '../oauth2';\nimport { OAuthApiCreateOptions } from '../types';\n\nconst DEFAULT_PROVIDER = {\n  id: 'microsoft',\n  title: 'Microsoft',\n  icon: MicrosoftIcon,\n};\n\nclass MicrosoftAuth {\n  static create({\n    environment = 'development',\n    provider = DEFAULT_PROVIDER,\n    oauthRequestApi,\n    discoveryApi,\n    defaultScopes = [\n      'openid',\n      'offline_access',\n      'profile',\n      'email',\n      'User.Read',\n    ],\n  }: OAuthApiCreateOptions): typeof microsoftAuthApiRef.T {\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n    });\n  }\n}\n\nexport default MicrosoftAuth;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport OneLoginIcon from '@material-ui/icons/AcUnit';\nimport {\n  oneloginAuthApiRef,\n  OAuthRequestApi,\n  AuthProvider,\n  DiscoveryApi,\n} from '@backstage/core-plugin-api';\nimport { OAuth2 } from '../oauth2';\n\ntype CreateOptions = {\n  discoveryApi: DiscoveryApi;\n  oauthRequestApi: OAuthRequestApi;\n\n  environment?: string;\n  provider?: AuthProvider & { id: string };\n};\n\nconst DEFAULT_PROVIDER = {\n  id: 'onelogin',\n  title: 'onelogin',\n  icon: OneLoginIcon,\n};\n\nconst OIDC_SCOPES: Set<String> = new Set([\n  'openid',\n  'profile',\n  'email',\n  'phone',\n  'address',\n  'groups',\n  'offline_access',\n]);\n\nconst SCOPE_PREFIX: string = 'onelogin.';\n\nclass OneLoginAuth {\n  static create({\n    discoveryApi,\n    environment = 'development',\n    provider = DEFAULT_PROVIDER,\n    oauthRequestApi,\n  }: CreateOptions): typeof oneloginAuthApiRef.T {\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes: ['openid', 'email', 'profile', 'offline_access'],\n      scopeTransform(scopes) {\n        return scopes.map(scope => {\n          if (OIDC_SCOPES.has(scope)) {\n            return scope;\n          }\n\n          if (scope.startsWith(SCOPE_PREFIX)) {\n            return scope;\n          }\n\n          return `${SCOPE_PREFIX}${scope}`;\n        });\n      },\n    });\n  }\n}\n\nexport default OneLoginAuth;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { AlertApi, AlertMessage, Observable } from '@backstage/core-plugin-api';\nimport { PublishSubject } from '../../../lib/subjects';\n\n/**\n * Base implementation for the AlertApi that simply forwards alerts to consumers.\n */\nexport class AlertApiForwarder implements AlertApi {\n  private readonly subject = new PublishSubject<AlertMessage>();\n\n  post(alert: AlertMessage) {\n    this.subject.next(alert);\n  }\n\n  alert$(): Observable<AlertMessage> {\n    return this.subject;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DiscoveryApi } from '@backstage/core-plugin-api';\n\n/**\n * UrlPatternDiscovery is a lightweight DiscoveryApi implementation.\n * It uses a single template string to construct URLs for each plugin.\n */\nexport class UrlPatternDiscovery implements DiscoveryApi {\n  /**\n   * Creates a new UrlPatternDiscovery given a template. The the only\n   * interpolation done for the template is to replace instances of `{{pluginId}}`\n   * with the ID of the plugin being requested.\n   *\n   * Example pattern: `http://localhost:7000/api/{{ pluginId }}`\n   */\n  static compile(pattern: string): UrlPatternDiscovery {\n    const parts = pattern.split(/\\{\\{\\s*pluginId\\s*\\}\\}/);\n\n    try {\n      const urlStr = parts.join('pluginId');\n      const url = new URL(urlStr);\n      if (url.hash) {\n        throw new Error('URL must not have a hash');\n      }\n      if (url.search) {\n        throw new Error('URL must not have a query');\n      }\n      if (urlStr.endsWith('/')) {\n        throw new Error('URL must not end with a slash');\n      }\n    } catch (error) {\n      throw new Error(`Invalid discovery URL pattern, ${error.message}`);\n    }\n\n    return new UrlPatternDiscovery(parts);\n  }\n\n  private constructor(private readonly parts: string[]) {}\n\n  async getBaseUrl(pluginId: string): Promise<string> {\n    return this.parts.join(pluginId);\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ErrorApi, ErrorContext, AlertApi } from '@backstage/core-plugin-api';\n\n/**\n * Decorates an ErrorApi by also forwarding error messages\n * to the alertApi with an 'error' severity.\n */\nexport class ErrorAlerter implements ErrorApi {\n  constructor(\n    private readonly alertApi: AlertApi,\n    private readonly errorApi: ErrorApi,\n  ) {}\n\n  post(error: Error, context?: ErrorContext) {\n    if (!context?.hidden) {\n      this.alertApi.post({ message: error.message, severity: 'error' });\n    }\n\n    return this.errorApi.post(error, context);\n  }\n\n  error$() {\n    return this.errorApi.error$();\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ErrorApi, ErrorContext, Observable } from '@backstage/core-plugin-api';\nimport { PublishSubject } from '../../../lib/subjects';\n\n/**\n * Base implementation for the ErrorApi that simply forwards errors to consumers.\n */\nexport class ErrorApiForwarder implements ErrorApi {\n  private readonly subject = new PublishSubject<{\n    error: Error;\n    context?: ErrorContext;\n  }>();\n\n  post(error: Error, context?: ErrorContext) {\n    this.subject.next({ error, context });\n  }\n\n  error$(): Observable<{ error: Error; context?: ErrorContext }> {\n    return this.subject;\n  }\n}\n","import { ErrorApi, ErrorContext } from '@backstage/core-plugin-api';\n\n/*\n * Copyright 2020 Spotify AB\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport class UnhandledErrorForwarder {\n  /**\n   * Add event listener, such that unhandled errors can be forwarded using an given `ErrorApi` instance\n   */\n  static forward(errorApi: ErrorApi, errorContext: ErrorContext) {\n    window.addEventListener(\n      'unhandledrejection',\n      (e: PromiseRejectionEvent) => {\n        errorApi.post(e.reason as Error, errorContext);\n      },\n    );\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Observable } from '@backstage/core-plugin-api';\nimport { BehaviorSubject } from '../../../lib/subjects';\n\ntype RequestQueueEntry<ResultType> = {\n  scopes: Set<string>;\n  resolve: (value: ResultType | PromiseLike<ResultType>) => void;\n  reject: (reason: Error) => void;\n};\n\nexport type PendingRequest<ResultType> = {\n  scopes: Set<string> | undefined;\n  resolve: (value: ResultType) => void;\n  reject: (reason: Error) => void;\n};\n\nexport function hasScopes(\n  searched: Set<string>,\n  searchFor: Set<string>,\n): boolean {\n  for (const scope of searchFor) {\n    if (!searched.has(scope)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function joinScopes(\n  scopes: Set<string>,\n  ...moreScopess: Set<string>[]\n): Set<string> {\n  const result = new Set(scopes);\n\n  for (const moreScopes of moreScopess) {\n    for (const scope of moreScopes) {\n      result.add(scope);\n    }\n  }\n\n  return result;\n}\n\n/**\n * The OAuthPendingRequests class is a utility for managing and observing\n * a stream of requests for oauth scopes for a single provider, and resolving\n * them correctly once requests are fulfilled.\n */\nexport class OAuthPendingRequests<ResultType> {\n  private requests: RequestQueueEntry<ResultType>[] = [];\n  private subject = new BehaviorSubject<PendingRequest<ResultType>>(\n    this.getCurrentPending(),\n  );\n\n  request(scopes: Set<string>): Promise<ResultType> {\n    return new Promise((resolve, reject) => {\n      this.requests.push({ scopes, resolve, reject });\n\n      this.subject.next(this.getCurrentPending());\n    });\n  }\n\n  resolve(scopes: Set<string>, result: ResultType): void {\n    this.requests = this.requests.filter(request => {\n      if (hasScopes(scopes, request.scopes)) {\n        request.resolve(result);\n        return false;\n      }\n      return true;\n    });\n\n    this.subject.next(this.getCurrentPending());\n  }\n\n  reject(error: Error) {\n    this.requests.forEach(request => request.reject(error));\n    this.requests = [];\n\n    this.subject.next(this.getCurrentPending());\n  }\n\n  pending(): Observable<PendingRequest<ResultType>> {\n    return this.subject;\n  }\n\n  private getCurrentPending(): PendingRequest<ResultType> {\n    const currentScopes =\n      this.requests.length === 0\n        ? undefined\n        : this.requests\n            .slice(1)\n            .reduce(\n              (acc, current) => joinScopes(acc, current.scopes),\n              this.requests[0].scopes,\n            );\n\n    return {\n      scopes: currentScopes,\n      resolve: (value: ResultType) => {\n        if (currentScopes) {\n          this.resolve(currentScopes, value);\n        }\n      },\n      reject: (reason: Error) => {\n        if (currentScopes) {\n          this.reject(reason);\n        }\n      },\n    };\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  OAuthRequestApi,\n  PendingAuthRequest,\n  AuthRequester,\n  AuthRequesterOptions,\n  Observable,\n} from '@backstage/core-plugin-api';\nimport { OAuthPendingRequests, PendingRequest } from './OAuthPendingRequests';\nimport { BehaviorSubject } from '../../../lib/subjects';\n\n/**\n * The OAuthRequestManager is an implementation of the OAuthRequestApi.\n *\n * The purpose of this class and the API is to read a stream of incoming requests\n * of OAuth access tokens from different providers with varying scope, and funnel\n * them all together into a single request for each OAuth provider.\n */\nexport class OAuthRequestManager implements OAuthRequestApi {\n  private readonly subject = new BehaviorSubject<PendingAuthRequest[]>([]);\n  private currentRequests: PendingAuthRequest[] = [];\n  private handlerCount = 0;\n\n  createAuthRequester<T>(options: AuthRequesterOptions<T>): AuthRequester<T> {\n    const handler = new OAuthPendingRequests<T>();\n\n    const index = this.handlerCount;\n    this.handlerCount++;\n\n    handler.pending().subscribe({\n      next: scopeRequest => {\n        const newRequests = this.currentRequests.slice();\n        const request = this.makeAuthRequest(scopeRequest, options);\n        if (!request) {\n          delete newRequests[index];\n        } else {\n          newRequests[index] = request;\n        }\n        this.currentRequests = newRequests;\n        // Convert from sparse array to array of present items only\n        this.subject.next(newRequests.filter(Boolean));\n      },\n    });\n\n    return scopes => {\n      return handler.request(scopes);\n    };\n  }\n\n  // Converts the pending request and popup options into a popup request that we can forward to subscribers.\n  private makeAuthRequest(\n    request: PendingRequest<any>,\n    options: AuthRequesterOptions<any>,\n  ): PendingAuthRequest | undefined {\n    const { scopes } = request;\n    if (!scopes) {\n      return undefined;\n    }\n\n    return {\n      provider: options.provider,\n      trigger: async () => {\n        const result = await options.onAuthRequest(scopes);\n        request.resolve(result);\n      },\n      reject: () => {\n        const error = new Error('Login failed, rejected by user');\n        error.name = 'RejectedError';\n        request.reject(error);\n      },\n    };\n  }\n\n  authRequest$(): Observable<PendingAuthRequest[]> {\n    return this.subject;\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  StorageApi,\n  StorageValueChange,\n  ErrorApi,\n  Observable,\n} from '@backstage/core-plugin-api';\nimport ObservableImpl from 'zen-observable';\n\nconst buckets = new Map<string, WebStorage>();\n\nexport type CreateStorageApiOptions = {\n  errorApi: ErrorApi;\n  namespace?: string;\n};\n\nexport class WebStorage implements StorageApi {\n  constructor(\n    private readonly namespace: string,\n    private readonly errorApi: ErrorApi,\n  ) {}\n\n  static create(options: CreateStorageApiOptions): WebStorage {\n    return new WebStorage(options.namespace ?? '', options.errorApi);\n  }\n\n  get<T>(key: string): T | undefined {\n    try {\n      const storage = JSON.parse(localStorage.getItem(this.getKeyName(key))!);\n      return storage ?? undefined;\n    } catch (e) {\n      this.errorApi.post(\n        new Error(`Error when parsing JSON config from storage for: ${key}`),\n      );\n    }\n\n    return undefined;\n  }\n\n  forBucket(name: string): WebStorage {\n    const bucketPath = `${this.namespace}/${name}`;\n    if (!buckets.has(bucketPath)) {\n      buckets.set(bucketPath, new WebStorage(bucketPath, this.errorApi));\n    }\n    return buckets.get(bucketPath)!;\n  }\n\n  async set<T>(key: string, data: T): Promise<void> {\n    localStorage.setItem(this.getKeyName(key), JSON.stringify(data, null, 2));\n    this.notifyChanges({ key, newValue: data });\n  }\n\n  async remove(key: string): Promise<void> {\n    localStorage.removeItem(this.getKeyName(key));\n    this.notifyChanges({ key, newValue: undefined });\n  }\n\n  observe$<T>(key: string): Observable<StorageValueChange<T>> {\n    return this.observable.filter(({ key: messageKey }) => messageKey === key);\n  }\n\n  private getKeyName(key: string) {\n    return `${this.namespace}/${encodeURIComponent(key)}`;\n  }\n\n  private notifyChanges<T>(message: StorageValueChange<T>) {\n    for (const subscription of this.subscribers) {\n      subscription.next(message);\n    }\n  }\n\n  private subscribers = new Set<\n    ZenObservable.SubscriptionObserver<StorageValueChange>\n  >();\n\n  private readonly observable = new ObservableImpl<StorageValueChange>(\n    subscriber => {\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    },\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ComponentType, ReactNode } from 'react';\nimport { getOrCreateGlobalSingleton } from '../lib/globalObject';\n\n// TODO(Rugvip): Access via symbol is deprecated, remove once on 0.3.x\nconst DATA_KEY = Symbol('backstage-component-data');\n\ntype ComponentWithData<P> = ComponentType<P> & {\n  [DATA_KEY]?: DataContainer;\n};\n\ntype DataContainer = {\n  map: Map<string, unknown>;\n};\n\ntype MaybeComponentNode = ReactNode & {\n  type?: ComponentType<any> & { [DATA_KEY]?: DataContainer };\n};\n\n// The store is bridged across versions using the global object\nconst store = getOrCreateGlobalSingleton(\n  'component-data-store',\n  () => new WeakMap<ComponentType<any>, DataContainer>(),\n);\n\nexport function attachComponentData<P>(\n  component: ComponentType<P>,\n  type: string,\n  data: unknown,\n) {\n  const dataComponent = component as ComponentWithData<P>;\n\n  let container = store.get(component) || dataComponent[DATA_KEY];\n  if (!container) {\n    container = { map: new Map() };\n    store.set(component, container);\n    dataComponent[DATA_KEY] = container;\n  }\n\n  if (container.map.has(type)) {\n    const name = component.displayName || component.name;\n    throw new Error(\n      `Attempted to attach duplicate data \"${type}\" to component \"${name}\"`,\n    );\n  }\n\n  container.map.set(type, data);\n}\n\nexport function getComponentData<T>(\n  node: ReactNode,\n  type: string,\n): T | undefined {\n  if (!node) {\n    return undefined;\n  }\n\n  const component = (node as MaybeComponentNode).type;\n  if (!component) {\n    return undefined;\n  }\n\n  const container = store.get(component) || component[DATA_KEY];\n  if (!container) {\n    return undefined;\n  }\n\n  return container.map.get(type) as T | undefined;\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  featureFlagsApiRef,\n  useApi,\n  attachComponentData,\n} from '@backstage/core-plugin-api';\nimport React, { ReactNode } from 'react';\n\nexport type FeatureFlaggedProps = { children: ReactNode } & (\n  | { with: string }\n  | { without: string }\n);\n\nexport const FeatureFlagged = (props: FeatureFlaggedProps) => {\n  const { children } = props;\n  const featureFlagApi = useApi(featureFlagsApiRef);\n  const isEnabled =\n    'with' in props\n      ? featureFlagApi.isActive(props.with)\n      : !featureFlagApi.isActive(props.without);\n  return <>{isEnabled ? children : null}</>;\n};\n\nattachComponentData(FeatureFlagged, 'core.featureFlagged', true);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  RouteRef,\n  SubRouteRef,\n  ExternalRouteRef,\n} from '@backstage/core-plugin-api';\nimport { getOrCreateGlobalSingleton } from '../lib/globalObject';\n\ntype RouteRefType = Exclude<\n  keyof RouteRef,\n  'params' | 'path' | 'title' | 'icon'\n>;\nexport const routeRefType: RouteRefType = getOrCreateGlobalSingleton<any>(\n  'route-ref-type',\n  () => Symbol('route-ref-type'),\n);\n\nexport type AnyParams = { [param in string]: string } | undefined;\n\nexport type AnyRouteRef =\n  | RouteRef<any>\n  | SubRouteRef<any>\n  | ExternalRouteRef<any, any>;\n\n// The extra TS magic here is to require a single params argument if the RouteRef\n// had at least one param defined, but require 0 arguments if there are no params defined.\n// Without this we'd have to pass in empty object to all parameter-less RouteRefs\n// just to make TypeScript happy, or we would have to make the argument optional in\n// which case you might forget to pass it in when it is actually required.\nexport type RouteFunc<Params extends AnyParams> = (\n  ...[params]: Params extends undefined ? readonly [] : readonly [Params]\n) => string;\n\n// A duplicate of the react-router RouteObject, but with routeRef added\nexport interface BackstageRouteObject {\n  caseSensitive: boolean;\n  children?: BackstageRouteObject[];\n  element: React.ReactNode;\n  path: string;\n  routeRefs: Set<RouteRef>;\n}\n\nexport function isRouteRef<Params extends AnyParams>(\n  routeRef:\n    | RouteRef<Params>\n    | SubRouteRef<Params>\n    | ExternalRouteRef<Params, any>,\n): routeRef is RouteRef<Params> {\n  return routeRef[routeRefType] === 'absolute';\n}\n\nexport function isSubRouteRef<Params extends AnyParams>(\n  routeRef:\n    | RouteRef<Params>\n    | SubRouteRef<Params>\n    | ExternalRouteRef<Params, any>,\n): routeRef is SubRouteRef<Params> {\n  return routeRef[routeRefType] === 'sub';\n}\n\nexport function isExternalRouteRef<\n  Params extends AnyParams,\n  Optional extends boolean,\n>(\n  routeRef:\n    | RouteRef<Params>\n    | SubRouteRef<Params>\n    | ExternalRouteRef<Params, Optional>,\n): routeRef is ExternalRouteRef<Params, Optional> {\n  return routeRef[routeRefType] === 'external';\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { createContext, ReactNode } from 'react';\nimport {\n  ExternalRouteRef,\n  RouteRef,\n  SubRouteRef,\n} from '@backstage/core-plugin-api';\nimport { getOrCreateGlobalSingleton } from '../lib/globalObject';\nimport {\n  createVersionedValueMap,\n  VersionedValue,\n} from '../lib/versionedValues';\nimport { RouteResolver } from './RouteResolver';\nimport { BackstageRouteObject } from './types';\n\ntype RoutingContextType = VersionedValue<{ 1: RouteResolver }> | undefined;\nconst RoutingContext = getOrCreateGlobalSingleton('routing-context', () =>\n  createContext<RoutingContextType>(undefined),\n);\n\ntype ProviderProps = {\n  routePaths: Map<RouteRef, string>;\n  routeParents: Map<RouteRef, RouteRef | undefined>;\n  routeObjects: BackstageRouteObject[];\n  routeBindings: Map<ExternalRouteRef, RouteRef | SubRouteRef>;\n  basePath?: string;\n  children: ReactNode;\n};\n\nexport const RoutingProvider = ({\n  routePaths,\n  routeParents,\n  routeObjects,\n  routeBindings,\n  basePath = '',\n  children,\n}: ProviderProps) => {\n  const resolver = new RouteResolver(\n    routePaths,\n    routeParents,\n    routeObjects,\n    routeBindings,\n    basePath,\n  );\n\n  const versionedValue = createVersionedValueMap({ 1: resolver });\n  return (\n    <RoutingContext.Provider value={versionedValue}>\n      {children}\n    </RoutingContext.Provider>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { createContext, PropsWithChildren } from 'react';\nimport {\n  VersionedValue,\n  createVersionedValueMap,\n} from '../lib/versionedValues';\nimport { getOrCreateGlobalSingleton } from '../lib/globalObject';\nimport { AppContext as AppContextV1 } from './types';\n\ntype AppContextType = VersionedValue<{ 1: AppContextV1 }> | undefined;\nconst AppContext = getOrCreateGlobalSingleton('app-context', () =>\n  createContext<AppContextType | undefined>(undefined),\n);\n\ntype Props = {\n  appContext: AppContextV1;\n};\n\nexport const AppContextProvider = ({\n  appContext,\n  children,\n}: PropsWithChildren<Props>) => {\n  const versionedValue = createVersionedValueMap({ 1: appContext });\n\n  return <AppContext.Provider value={versionedValue} children={children} />;\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AlertApiForwarder,\n  ErrorApiForwarder,\n  ErrorAlerter,\n  GoogleAuth,\n  GithubAuth,\n  OAuth2,\n  OktaAuth,\n  GitlabAuth,\n  Auth0Auth,\n  MicrosoftAuth,\n  OAuthRequestManager,\n  WebStorage,\n  UrlPatternDiscovery,\n  SamlAuth,\n  OneLoginAuth,\n  UnhandledErrorForwarder,\n} from '../apis';\n\nimport {\n  createApiFactory,\n  alertApiRef,\n  errorApiRef,\n  discoveryApiRef,\n  oauthRequestApiRef,\n  googleAuthApiRef,\n  githubAuthApiRef,\n  oauth2ApiRef,\n  oktaAuthApiRef,\n  gitlabAuthApiRef,\n  auth0AuthApiRef,\n  microsoftAuthApiRef,\n  storageApiRef,\n  configApiRef,\n  samlAuthApiRef,\n  oneloginAuthApiRef,\n  oidcAuthApiRef,\n} from '@backstage/core-plugin-api';\n\nimport OAuth2Icon from '@material-ui/icons/AcUnit';\n\nexport const defaultApis = [\n  createApiFactory({\n    api: discoveryApiRef,\n    deps: { configApi: configApiRef },\n    factory: ({ configApi }) =>\n      UrlPatternDiscovery.compile(\n        `${configApi.getString('backend.baseUrl')}/api/{{ pluginId }}`,\n      ),\n  }),\n  createApiFactory(alertApiRef, new AlertApiForwarder()),\n  createApiFactory({\n    api: errorApiRef,\n    deps: { alertApi: alertApiRef },\n    factory: ({ alertApi }) => {\n      const errorApi = new ErrorAlerter(alertApi, new ErrorApiForwarder());\n      UnhandledErrorForwarder.forward(errorApi, { hidden: false });\n      return errorApi;\n    },\n  }),\n  createApiFactory({\n    api: storageApiRef,\n    deps: { errorApi: errorApiRef },\n    factory: ({ errorApi }) => WebStorage.create({ errorApi }),\n  }),\n  createApiFactory(oauthRequestApiRef, new OAuthRequestManager()),\n  createApiFactory({\n    api: googleAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef,\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) =>\n      GoogleAuth.create({\n        discoveryApi,\n        oauthRequestApi,\n        environment: configApi.getOptionalString('auth.environment'),\n      }),\n  }),\n  createApiFactory({\n    api: microsoftAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef,\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) =>\n      MicrosoftAuth.create({\n        discoveryApi,\n        oauthRequestApi,\n        environment: configApi.getOptionalString('auth.environment'),\n      }),\n  }),\n  createApiFactory({\n    api: githubAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef,\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) =>\n      GithubAuth.create({\n        discoveryApi,\n        oauthRequestApi,\n        defaultScopes: ['read:user'],\n        environment: configApi.getOptionalString('auth.environment'),\n      }),\n  }),\n  createApiFactory({\n    api: oktaAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef,\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) =>\n      OktaAuth.create({\n        discoveryApi,\n        oauthRequestApi,\n        environment: configApi.getOptionalString('auth.environment'),\n      }),\n  }),\n  createApiFactory({\n    api: gitlabAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef,\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) =>\n      GitlabAuth.create({\n        discoveryApi,\n        oauthRequestApi,\n        environment: configApi.getOptionalString('auth.environment'),\n      }),\n  }),\n  createApiFactory({\n    api: auth0AuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef,\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) =>\n      Auth0Auth.create({\n        discoveryApi,\n        oauthRequestApi,\n        environment: configApi.getOptionalString('auth.environment'),\n      }),\n  }),\n  createApiFactory({\n    api: oauth2ApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef,\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) =>\n      OAuth2.create({\n        discoveryApi,\n        oauthRequestApi,\n        environment: configApi.getOptionalString('auth.environment'),\n      }),\n  }),\n  createApiFactory({\n    api: samlAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      configApi: configApiRef,\n    },\n    factory: ({ discoveryApi, configApi }) =>\n      SamlAuth.create({\n        discoveryApi,\n        environment: configApi.getOptionalString('auth.environment'),\n      }),\n  }),\n  createApiFactory({\n    api: oneloginAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef,\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) =>\n      OneLoginAuth.create({\n        discoveryApi,\n        oauthRequestApi,\n        environment: configApi.getOptionalString('auth.environment'),\n      }),\n  }),\n  createApiFactory({\n    api: oidcAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef,\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) =>\n      OAuth2.create({\n        discoveryApi,\n        oauthRequestApi,\n        provider: {\n          id: 'oidc',\n          title: 'Your Identity Provider',\n          icon: OAuth2Icon,\n        },\n        environment: configApi.getOptionalString('auth.environment'),\n      }),\n  }),\n];\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { PropsWithChildren } from 'react';\nimport { costInsightsApiRef, CostInsightsApi } from '../api';\nimport { LoadingContext, LoadingContextProps } from '../hooks/useLoading';\nimport { GroupsContext, GroupsContextProps } from '../hooks/useGroups';\nimport { FilterContext, FilterContextProps } from '../hooks/useFilters';\nimport { ConfigContext, ConfigContextProps } from '../hooks/useConfig';\nimport { CurrencyContext, CurrencyContextProps } from '../hooks/useCurrency';\nimport {\n  BillingDateContext,\n  BillingDateContextProps,\n} from '../hooks/useLastCompleteBillingDate';\nimport { ScrollContext, ScrollContextProps } from '../hooks/useScroll';\nimport { Group, Duration } from '../types';\n\n// TODO(Rugvip): Could be good to have a clear place to put test utils that is linted accordingly\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport { ApiProvider, ApiRegistry } from '@backstage/core-app-api';\nimport { IdentityApi, identityApiRef } from '@backstage/core-plugin-api';\n\ntype PartialPropsWithChildren<T> = PropsWithChildren<Partial<T>>;\n\nexport const MockGroups: Group[] = [{ id: 'tech' }, { id: 'mock-group' }];\n\nexport type MockFilterProviderProps =\n  PartialPropsWithChildren<FilterContextProps>;\n\nexport const MockFilterProvider = ({\n  children,\n  ...context\n}: MockFilterProviderProps) => {\n  const defaultContext: FilterContextProps = {\n    pageFilters: {\n      group: 'tech',\n      project: null,\n      duration: Duration.P90D,\n      metric: null,\n    },\n    productFilters: [],\n    setPageFilters: jest.fn(),\n    setProductFilters: jest.fn(),\n  };\n  return (\n    <FilterContext.Provider value={{ ...defaultContext, ...context }}>\n      {children}\n    </FilterContext.Provider>\n  );\n};\n\nexport type MockLoadingProviderProps =\n  PartialPropsWithChildren<LoadingContextProps>;\n\nexport const MockLoadingProvider = ({\n  children,\n  ...context\n}: MockLoadingProviderProps) => {\n  const defaultContext: LoadingContextProps = {\n    state: {},\n    actions: [],\n    dispatch: jest.fn(),\n  };\n  return (\n    <LoadingContext.Provider value={{ ...defaultContext, ...context }}>\n      {children}\n    </LoadingContext.Provider>\n  );\n};\n\nexport type MockConfigProviderProps =\n  PartialPropsWithChildren<ConfigContextProps>;\n\nexport const MockConfigProvider = ({\n  children,\n  ...context\n}: MockConfigProviderProps) => {\n  const defaultContext: ConfigContextProps = {\n    metrics: [],\n    products: [],\n    icons: [],\n    engineerCost: 0,\n    currencies: [],\n  };\n  return (\n    <ConfigContext.Provider value={{ ...defaultContext, ...context }}>\n      {children}\n    </ConfigContext.Provider>\n  );\n};\n\nexport type MockCurrencyProviderProps =\n  PartialPropsWithChildren<CurrencyContextProps>;\n\nexport const MockCurrencyProvider = ({\n  children,\n  ...context\n}: MockCurrencyProviderProps) => {\n  const defaultContext: CurrencyContextProps = {\n    currency: {\n      kind: null,\n      label: 'Engineers 🛠',\n      unit: 'engineer',\n    },\n    setCurrency: jest.fn(),\n  };\n  return (\n    <CurrencyContext.Provider value={{ ...defaultContext, ...context }}>\n      {children}\n    </CurrencyContext.Provider>\n  );\n};\n\nexport type MockBillingDateProviderProps =\n  PartialPropsWithChildren<BillingDateContextProps>;\n\nexport const MockBillingDateProvider = ({\n  children,\n  ...context\n}: MockBillingDateProviderProps) => {\n  const defaultContext: BillingDateContextProps = {\n    lastCompleteBillingDate: '2020-10-01',\n  };\n  return (\n    <BillingDateContext.Provider value={{ ...defaultContext, ...context }}>\n      {children}\n    </BillingDateContext.Provider>\n  );\n};\n\nexport type MockScrollProviderProps = PropsWithChildren<{}>;\n\nexport const MockScrollProvider = ({ children }: MockScrollProviderProps) => {\n  const defaultContext: ScrollContextProps = {\n    scroll: null,\n    setScroll: jest.fn(),\n  };\n  return (\n    <ScrollContext.Provider value={defaultContext}>\n      {children}\n    </ScrollContext.Provider>\n  );\n};\n\nexport type MockGroupsProviderProps =\n  PartialPropsWithChildren<GroupsContextProps>;\n\nexport const MockGroupsProvider = ({\n  children,\n  ...context\n}: MockGroupsProviderProps) => {\n  const defaultContext: GroupsContextProps = {\n    groups: [],\n  };\n  return (\n    <GroupsContext.Provider value={{ ...defaultContext, ...context }}>\n      {children}\n    </GroupsContext.Provider>\n  );\n};\n\nexport type MockCostInsightsApiProviderProps = PartialPropsWithChildren<{\n  identityApi: Partial<IdentityApi>;\n  costInsightsApi: Partial<CostInsightsApi>;\n}>;\n\nexport const MockCostInsightsApiProvider = ({\n  children,\n  ...context\n}: MockCostInsightsApiProviderProps) => {\n  const defaultIdentityApi: IdentityApi = {\n    getProfile: jest.fn(),\n    getIdToken: jest.fn(),\n    getUserId: jest.fn(),\n    signOut: jest.fn(),\n  };\n\n  const defaultCostInsightsApi: CostInsightsApi = {\n    getAlerts: jest.fn(),\n    getDailyMetricData: jest.fn(),\n    getGroupDailyCost: jest.fn(),\n    getGroupProjects: jest.fn(),\n    getLastCompleteBillingDate: jest.fn(),\n    getProductInsights: jest.fn(),\n    getProjectDailyCost: jest.fn(),\n    getUserGroups: jest.fn(),\n  };\n\n  // TODO: defaultConfigApiRef: ConfigApiRef\n\n  const defaultContext = ApiRegistry.from([\n    [identityApiRef, { ...defaultIdentityApi, ...context.identityApi }],\n    [\n      costInsightsApiRef,\n      { ...defaultCostInsightsApi, ...context.costInsightsApi },\n    ],\n    // [configApiRef, { ...defaultConfigApiRef, ...context.configApiRef }]\n  ]);\n\n  return <ApiProvider apis={defaultContext}>{children}</ApiProvider>;\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DateTime } from 'luxon';\nimport regression, { DataPoint } from 'regression';\nimport {\n  ChangeStatistic,\n  Duration,\n  Entity,\n  Trendline,\n  DateAggregation,\n  DEFAULT_DATE_FORMAT,\n} from '../types';\nimport { inclusiveEndDateOf, inclusiveStartDateOf } from '../utils/duration';\nimport {\n  MockComputeEngineInsights,\n  MockCloudDataflowInsights,\n  MockCloudStorageInsights,\n  MockBigQueryInsights,\n  MockEventsInsights,\n} from './mockData';\n\ntype IntervalFields = {\n  duration: Duration;\n  endDate: string;\n};\n\nfunction parseIntervals(intervals: string): IntervalFields {\n  const match = intervals.match(\n    /\\/(?<duration>P\\d+[DM])\\/(?<date>\\d{4}-\\d{2}-\\d{2})/,\n  );\n  if (Object.keys(match?.groups || {}).length !== 2) {\n    throw new Error(`Invalid intervals: ${intervals}`);\n  }\n  const { duration, date } = match!.groups!;\n  return {\n    duration: duration as Duration,\n    endDate: date,\n  };\n}\n\nexport function aggregationFor(\n  intervals: string,\n  baseline: number,\n): DateAggregation[] {\n  const { duration, endDate } = parseIntervals(intervals);\n  const inclusiveEndDate = inclusiveEndDateOf(duration, endDate);\n  const days = DateTime.fromISO(endDate).diff(\n    DateTime.fromISO(inclusiveStartDateOf(duration, inclusiveEndDate)),\n    'days',\n  );\n\n  function nextDelta(): number {\n    const varianceFromBaseline = 0.15;\n    // Let's give positive vibes in trendlines - higher change for positive delta with >0.5 value\n    const positiveTrendChance = 0.55;\n    const normalization = positiveTrendChance - 1;\n    return baseline * (Math.random() + normalization) * varianceFromBaseline;\n  }\n\n  return [...Array(days).keys()].reduce(\n    (values: DateAggregation[], i: number): DateAggregation[] => {\n      const last = values.length ? values[values.length - 1].amount : baseline;\n      const date = DateTime.fromISO(\n        inclusiveStartDateOf(duration, inclusiveEndDate),\n      )\n        .plus({ days: i })\n        .toFormat(DEFAULT_DATE_FORMAT);\n      const amount = Math.max(0, last + nextDelta());\n      values.push({\n        date: date,\n        amount: amount,\n      });\n      return values;\n    },\n    [],\n  );\n}\n\nexport function changeOf(aggregation: DateAggregation[]): ChangeStatistic {\n  const firstAmount = aggregation.length ? aggregation[0].amount : 0;\n  const lastAmount = aggregation.length\n    ? aggregation[aggregation.length - 1].amount\n    : 0;\n\n  // if either the first or last amounts are zero, the rate of increase/decrease is infinite\n  if (!firstAmount || !lastAmount) {\n    return {\n      amount: lastAmount - firstAmount,\n    };\n  }\n\n  return {\n    ratio: (lastAmount - firstAmount) / firstAmount,\n    amount: lastAmount - firstAmount,\n  };\n}\n\nexport function trendlineOf(aggregation: DateAggregation[]): Trendline {\n  const data: ReadonlyArray<DataPoint> = aggregation.map(a => [\n    Date.parse(a.date) / 1000,\n    a.amount,\n  ]);\n  const result = regression.linear(data, { precision: 5 });\n  return {\n    slope: result.equation[0],\n    intercept: result.equation[1],\n  };\n}\n\nexport function entityOf(product: string): Entity {\n  switch (product) {\n    case 'computeEngine':\n      return MockComputeEngineInsights;\n    case 'cloudDataflow':\n      return MockCloudDataflowInsights;\n    case 'cloudStorage':\n      return MockCloudStorageInsights;\n    case 'bigQuery':\n      return MockBigQueryInsights;\n    case 'events':\n      return MockEventsInsights;\n    default:\n      throw new Error(\n        `Cannot get insights for ${product}. Make sure product matches product property in app-info.yaml`,\n      );\n  }\n}\n\nexport const getGroupedProducts = (intervals: string) => [\n  {\n    id: 'Cloud Dataflow',\n    aggregation: aggregationFor(intervals, 1_700),\n  },\n  {\n    id: 'Compute Engine',\n    aggregation: aggregationFor(intervals, 350),\n  },\n  {\n    id: 'Cloud Storage',\n    aggregation: aggregationFor(intervals, 1_300),\n  },\n  {\n    id: 'BigQuery',\n    aggregation: aggregationFor(intervals, 2_000),\n  },\n  {\n    id: 'Cloud SQL',\n    aggregation: aggregationFor(intervals, 750),\n  },\n  {\n    id: 'Cloud Spanner',\n    aggregation: aggregationFor(intervals, 50),\n  },\n  {\n    id: 'Cloud Pub/Sub',\n    aggregation: aggregationFor(intervals, 1_000),\n  },\n  {\n    id: 'Cloud Bigtable',\n    aggregation: aggregationFor(intervals, 250),\n  },\n];\n\nexport const getGroupedProjects = (intervals: string) => [\n  {\n    id: 'project-a',\n    aggregation: aggregationFor(intervals, 1_700),\n  },\n  {\n    id: 'project-b',\n    aggregation: aggregationFor(intervals, 350),\n  },\n  {\n    id: 'project-c',\n    aggregation: aggregationFor(intervals, 1_300),\n  },\n];\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* eslint-disable no-restricted-imports */\n\nimport { DateTime } from 'luxon';\nimport { CostInsightsApi, ProductInsightsOptions } from '../api';\nimport {\n  Alert,\n  Cost,\n  DEFAULT_DATE_FORMAT,\n  Entity,\n  Group,\n  MetricData,\n  Project,\n  ProjectGrowthData,\n  UnlabeledDataflowData,\n} from '../types';\nimport { KubernetesMigrationAlert } from './alerts';\nimport { ProjectGrowthAlert, UnlabeledDataflowAlert } from '../alerts';\nimport {\n  aggregationFor,\n  changeOf,\n  entityOf,\n  getGroupedProducts,\n  getGroupedProjects,\n  trendlineOf,\n} from '../testUtils';\n\nexport class ExampleCostInsightsClient implements CostInsightsApi {\n  private request(_: any, res: any): Promise<any> {\n    return new Promise(resolve => setTimeout(resolve, 0, res));\n  }\n\n  getLastCompleteBillingDate(): Promise<string> {\n    return Promise.resolve(\n      DateTime.now().minus({ days: 1 }).toFormat(DEFAULT_DATE_FORMAT),\n    );\n  }\n\n  async getUserGroups(userId: string): Promise<Group[]> {\n    const groups: Group[] = await this.request({ userId }, [\n      { id: 'pied-piper' },\n    ]);\n\n    return groups;\n  }\n\n  async getGroupProjects(group: string): Promise<Project[]> {\n    const projects: Project[] = await this.request({ group }, [\n      { id: 'project-a' },\n      { id: 'project-b' },\n      { id: 'project-c' },\n    ]);\n\n    return projects;\n  }\n\n  async getDailyMetricData(\n    metric: string,\n    intervals: string,\n  ): Promise<MetricData> {\n    const aggregation = aggregationFor(intervals, 100_000).map(entry => ({\n      ...entry,\n      amount: Math.round(entry.amount),\n    }));\n\n    const cost: MetricData = await this.request(\n      { metric, intervals },\n      {\n        format: 'number',\n        aggregation: aggregation,\n        change: changeOf(aggregation),\n        trendline: trendlineOf(aggregation),\n      },\n    );\n\n    return cost;\n  }\n\n  async getGroupDailyCost(group: string, intervals: string): Promise<Cost> {\n    const aggregation = aggregationFor(intervals, 8_000);\n    const groupDailyCost: Cost = await this.request(\n      { group, intervals },\n      {\n        aggregation: aggregation,\n        change: changeOf(aggregation),\n        trendline: trendlineOf(aggregation),\n        // Optional field providing cost groupings / breakdowns keyed by the type. In this example,\n        // daily cost grouped by cloud product OR by project / billing account.\n        groupedCosts: {\n          product: getGroupedProducts(intervals),\n          project: getGroupedProjects(intervals),\n        },\n      },\n    );\n\n    return groupDailyCost;\n  }\n\n  async getProjectDailyCost(project: string, intervals: string): Promise<Cost> {\n    const aggregation = aggregationFor(intervals, 1_500);\n    const projectDailyCost: Cost = await this.request(\n      { project, intervals },\n      {\n        id: 'project-a',\n        aggregation: aggregation,\n        change: changeOf(aggregation),\n        trendline: trendlineOf(aggregation),\n        // Optional field providing cost groupings / breakdowns keyed by the type. In this example,\n        // daily project cost grouped by cloud product.\n        groupedCosts: {\n          product: getGroupedProducts(intervals),\n        },\n      },\n    );\n\n    return projectDailyCost;\n  }\n\n  async getProductInsights(options: ProductInsightsOptions): Promise<Entity> {\n    const productInsights: Entity = await this.request(\n      options,\n      entityOf(options.product),\n    );\n\n    return productInsights;\n  }\n\n  async getAlerts(group: string): Promise<Alert[]> {\n    const projectGrowthData: ProjectGrowthData = {\n      project: 'example-project',\n      periodStart: '2020-Q2',\n      periodEnd: '2020-Q3',\n      aggregation: [60_000, 120_000],\n      change: {\n        ratio: 1,\n        amount: 60_000,\n      },\n      products: [\n        { id: 'Compute Engine', aggregation: [58_000, 118_000] },\n        { id: 'Cloud Dataflow', aggregation: [1200, 1500] },\n        { id: 'Cloud Storage', aggregation: [800, 500] },\n      ],\n    };\n\n    const unlabeledDataflowData: UnlabeledDataflowData = {\n      periodStart: '2020-09-01',\n      periodEnd: '2020-09-30',\n      labeledCost: 6_200,\n      unlabeledCost: 7_000,\n      projects: [\n        {\n          id: 'example-project-1',\n          unlabeledCost: 5_000,\n          labeledCost: 3_000,\n        },\n        {\n          id: 'example-project-2',\n          unlabeledCost: 2_000,\n          labeledCost: 3_200,\n        },\n      ],\n    };\n\n    const today = DateTime.now();\n    const alerts: Alert[] = await this.request({ group }, [\n      new ProjectGrowthAlert(projectGrowthData),\n      new UnlabeledDataflowAlert(unlabeledDataflowData),\n      new KubernetesMigrationAlert(this, {\n        startDate: today.minus({ days: 30 }).toFormat(DEFAULT_DATE_FORMAT),\n        endDate: today.toFormat(DEFAULT_DATE_FORMAT),\n        change: {\n          ratio: 0,\n          amount: 0,\n        },\n        services: [\n          {\n            id: 'service-a',\n            aggregation: [20_000, 10_000],\n            change: {\n              ratio: -0.5,\n              amount: -10_000,\n            },\n            entities: {},\n          },\n          {\n            id: 'service-b',\n            aggregation: [30_000, 15_000],\n            change: {\n              ratio: -0.5,\n              amount: -15_000,\n            },\n            entities: {},\n          },\n        ],\n      }),\n    ]);\n\n    return alerts;\n  }\n}\n"],"names":["assertNever","LuxonDuration","useStyles","mapLoadingToProps","createMuiTheme","RechartsBarChart","RechartsTooltip","Tooltip","CloseButton","useLayoutStyles","getDefaultLoadingState","require$$0","require$$1","ReactPropTypesSecret","printWarning","has","ReactIs","assign","checkPropTypes","require$$2","PropTypes","hasScopes","ObservableImpl","DEFAULT_PROVIDER","GithubIcon","GitlabIcon","GoogleIcon","SCOPE_PREFIX","OktaIcon","SamlIcon","Auth0Icon","MicrosoftIcon","OneLoginIcon"],"mappings":"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"}