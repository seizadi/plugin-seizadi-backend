{"version":3,"file":"index.esm.js","sources":["../src/components/AlertDisplay/AlertDisplay.tsx","../src/components/Avatar/utils.ts","../src/components/Avatar/Avatar.tsx","../src/components/Link/Link.tsx","../src/components/Button/Button.tsx","../src/components/CopyTextButton/CopyTextButton.tsx","../src/components/CodeSnippet/CodeSnippet.tsx","../src/components/CreateButton/CreateButton.tsx","../src/components/DependencyGraph/types.ts","../src/components/DependencyGraph/DefaultNode.tsx","../src/components/DependencyGraph/constants.ts","../src/components/DependencyGraph/Node.tsx","../src/components/DependencyGraph/DefaultLabel.tsx","../src/components/DependencyGraph/Edge.tsx","../src/components/DependencyGraph/DependencyGraph.tsx","../src/components/DismissableBanner/DismissableBanner.tsx","../src/components/EmptyState/EmptyStateImage.tsx","../src/components/EmptyState/EmptyState.tsx","../src/components/EmptyState/MissingAnnotationEmptyState.tsx","../src/components/WarningPanel/WarningPanel.tsx","../src/components/ErrorPanel/ErrorPanel.tsx","../src/components/ResponseErrorPanel/ResponseErrorPanel.tsx","../src/components/FeatureDiscovery/lib/usePortal.ts","../src/components/FeatureDiscovery/lib/useShowCallout.ts","../src/components/FeatureDiscovery/FeatureCalloutCircular.tsx","../src/components/HeaderIconLinkRow/IconLinkVertical.tsx","../src/components/HeaderIconLinkRow/HeaderIconLinkRow.tsx","../src/components/HorizontalScrollGrid/HorizontalScrollGrid.tsx","../src/components/Lifecycle/Lifecycle.tsx","../src/components/MarkdownContent/MarkdownContent.tsx","../src/components/OAuthRequestDialog/LoginRequestListItem.tsx","../src/components/OAuthRequestDialog/OAuthRequestDialog.tsx","../src/components/OverflowTooltip/OverflowTooltip.tsx","../src/components/Progress/Progress.tsx","../src/layout/ErrorBoundary/ErrorBoundary.tsx","../src/layout/BottomLink/BottomLink.tsx","../src/layout/InfoCard/InfoCard.tsx","../src/components/ProgressBars/Gauge.tsx","../src/components/ProgressBars/GaugeCard.tsx","../src/components/ProgressBars/LinearGauge.tsx","../src/components/Select/static/ClosedDropdown.tsx","../src/components/Select/static/OpenedDropdown.tsx","../src/components/Select/Select.tsx","../src/components/SimpleStepper/SimpleStepper.tsx","../src/components/SimpleStepper/SimpleStepperFooter.tsx","../src/components/SimpleStepper/SimpleStepperStep.tsx","../src/components/Status/Status.tsx","../src/components/StructuredMetadataTable/MetadataTable.tsx","../src/components/StructuredMetadataTable/StructuredMetadataTable.tsx","../src/hooks/useQueryParamState.ts","../src/hooks/useSupportConfig.ts","../src/icons/icons.tsx","../src/components/SupportButton/SupportButton.tsx","../src/layout/Content/Content.tsx","../src/layout/HeaderTabs/HeaderTabs.tsx","../src/components/TabbedLayout/RoutedTabs.tsx","../src/components/TabbedLayout/TabbedLayout.tsx","../src/components/Table/SubvalueCell.tsx","../src/components/CheckboxTree/CheckboxTree.tsx","../src/components/Table/Filters.tsx","../src/components/Table/Table.tsx","../src/components/Tabs/utils.ts","../src/components/Tabs/TabPanel.tsx","../src/components/Tabs/TabIcon.tsx","../src/components/Tabs/Tab.tsx","../src/components/Tabs/TabBar.tsx","../src/components/Tabs/Tabs.tsx","../src/components/TrendLine/TrendLine.tsx","../src/layout/ContentHeader/ContentHeader.tsx","../src/layout/ErrorPage/MicDrop.tsx","../src/layout/ErrorPage/ErrorPage.tsx","../src/layout/Breadcrumbs/Breadcrumbs.tsx","../src/layout/Header/Header.tsx","../src/layout/HeaderLabel/HeaderLabel.tsx","../src/layout/HomepageTimer/HomepageTimer.tsx","../src/layout/ItemCard/ItemCardHeader.tsx","../src/layout/ItemCard/ItemCard.tsx","../src/layout/ItemCard/ItemCardGrid.tsx","../src/layout/Page/Page.tsx","../src/layout/Page/PageWithHeader.tsx","../src/layout/Sidebar/config.ts","../src/layout/Sidebar/localStorage.ts","../src/layout/Sidebar/Page.tsx","../src/layout/Sidebar/Bar.tsx","../src/layout/Sidebar/Items.tsx","../src/layout/Sidebar/Intro.tsx","../src/layout/SignInPage/styles.tsx","../src/layout/SignInPage/commonProvider.tsx","../src/layout/SignInPage/guestProvider.tsx","../src/layout/SignInPage/customProvider.tsx","../src/layout/SignInPage/providers.tsx","../src/layout/SignInPage/SignInPage.tsx","../src/layout/TabbedCard/TabbedCard.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport { Snackbar, IconButton } from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { Alert } from '@material-ui/lab';\nimport { AlertMessage, useApi, alertApiRef } from '@backstage/core-plugin-api';\nimport pluralize from 'pluralize';\n\n// TODO: improve on this and promote to a shared component for use by all apps.\nexport const AlertDisplay = () => {\n  const [messages, setMessages] = useState<Array<AlertMessage>>([]);\n  const alertApi = useApi(alertApiRef);\n\n  useEffect(() => {\n    const subscription = alertApi\n      .alert$()\n      .subscribe(message => setMessages(msgs => msgs.concat(message)));\n\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [alertApi]);\n\n  if (messages.length === 0) {\n    return null;\n  }\n\n  const [firstMessage] = messages;\n\n  const handleClose = () => {\n    setMessages(msgs => msgs.filter(msg => msg !== firstMessage));\n  };\n\n  return (\n    <Snackbar open anchorOrigin={{ vertical: 'top', horizontal: 'center' }}>\n      <Alert\n        action={\n          <IconButton\n            color=\"inherit\"\n            size=\"small\"\n            onClick={handleClose}\n            data-testid=\"error-button-close\"\n          >\n            <CloseIcon />\n          </IconButton>\n        }\n        severity={firstMessage.severity}\n      >\n        <span>\n          {firstMessage.message.toString()}\n          {messages.length > 1 && (\n            <em>{` (${messages.length - 1} older ${pluralize(\n              'message',\n              messages.length - 1,\n            )})`}</em>\n          )}\n        </span>\n      </Alert>\n    </Snackbar>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function stringToColor(str: string) {\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    hash = str.charCodeAt(i) + ((hash << 5) - hash);\n  }\n  let color = '#';\n  for (let i = 0; i < 3; i++) {\n    const value = (hash >> (i * 8)) & 0xff;\n    color += `00${value.toString(16)}`.substr(-2);\n  }\n  return color;\n}\n\nexport function extractInitials(value: string) {\n  return value.match(/\\b\\w/g)!.join('').substring(0, 2);\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { CSSProperties } from 'react';\nimport {\n  Avatar as MaterialAvatar,\n  createStyles,\n  makeStyles,\n  Theme,\n} from '@material-ui/core';\nimport { extractInitials, stringToColor } from './utils';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    avatar: {\n      width: '4rem',\n      height: '4rem',\n      color: '#fff',\n      fontWeight: theme.typography.fontWeightBold,\n      letterSpacing: '1px',\n      textTransform: 'uppercase',\n    },\n  }),\n);\n\nexport type AvatarProps = {\n  displayName?: string;\n  picture?: string;\n  customStyles?: CSSProperties;\n};\n\nexport const Avatar = ({ displayName, picture, customStyles }: AvatarProps) => {\n  const classes = useStyles();\n  return (\n    <MaterialAvatar\n      alt={displayName}\n      src={picture}\n      className={classes.avatar}\n      style={{\n        backgroundColor: stringToColor(displayName || picture || ''),\n        ...customStyles,\n      }}\n    >\n      {displayName && extractInitials(displayName)}\n    </MaterialAvatar>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Link as MaterialLink,\n  LinkProps as MaterialLinkProps,\n} from '@material-ui/core';\nimport React, { ElementType } from 'react';\nimport {\n  Link as RouterLink,\n  LinkProps as RouterLinkProps,\n} from 'react-router-dom';\n\nexport const isExternalUri = (uri: string) => /^([a-z+.-]+):/.test(uri);\n\nexport type LinkProps = MaterialLinkProps &\n  RouterLinkProps & {\n    component?: ElementType<any>;\n  };\n\n/**\n * Thin wrapper on top of material-ui's Link component\n * Makes the Link to utilise react-router\n */\nexport const Link = React.forwardRef<any, LinkProps>((props, ref) => {\n  const to = String(props.to);\n  const external = isExternalUri(to);\n  const newWindow = external && !!/^https?:/.exec(to);\n  return external ? (\n    // External links\n    <MaterialLink\n      ref={ref}\n      href={to}\n      {...(newWindow ? { target: '_blank', rel: 'noopener' } : {})}\n      {...props}\n    />\n  ) : (\n    // Interact with React Router for internal links\n    <MaterialLink ref={ref} component={RouterLink} {...props} />\n  );\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Button as MaterialButton,\n  ButtonProps as MaterialButtonProps,\n} from '@material-ui/core';\nimport React from 'react';\nimport { Link, LinkProps } from '../Link';\n\ntype Props = MaterialButtonProps & Omit<LinkProps, 'variant' | 'color'>;\n\n/**\n * Thin wrapper on top of material-ui's Button component\n * Makes the Button to utilise react-router\n */\nexport const Button = React.forwardRef<any, Props>((props, ref) => (\n  <MaterialButton ref={ref} component={Link} {...props} />\n));\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { errorApiRef, useApi } from '@backstage/core-plugin-api';\nimport { IconButton, Tooltip } from '@material-ui/core';\nimport CopyIcon from '@material-ui/icons/FileCopy';\nimport PropTypes from 'prop-types';\nimport React, { MouseEventHandler, useEffect, useState } from 'react';\nimport { useCopyToClipboard } from 'react-use';\n\n/**\n * Copy text button with visual feedback in the form of\n *  - a hover color\n *  - click ripple\n *  - Tooltip shown when user has clicked\n *\n *  Properties:\n *  - text: the text to be copied\n *  - tooltipDelay: Number os ms to show the tooltip, default: 1000ms\n *  - tooltipText: Text to show in the tooltip when user has clicked the button, default: \"Text\n * copied to clipboard\"\n *\n * Example:\n *    <CopyTextButton text=\"My text that I want to be copied to the clipboard\" />\n */\ntype Props = {\n  text: string;\n  tooltipDelay?: number;\n  tooltipText?: string;\n};\n\nconst defaultProps = {\n  tooltipDelay: 1000,\n  tooltipText: 'Text copied to clipboard',\n};\n\nexport const CopyTextButton = (props: Props) => {\n  const { text, tooltipDelay, tooltipText } = {\n    ...defaultProps,\n    ...props,\n  };\n  const errorApi = useApi(errorApiRef);\n  const [open, setOpen] = useState(false);\n  const [{ error }, copyToClipboard] = useCopyToClipboard();\n\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [error, errorApi]);\n\n  const handleCopyClick: MouseEventHandler = e => {\n    e.stopPropagation();\n    setOpen(true);\n    copyToClipboard(text);\n  };\n\n  return (\n    <>\n      <Tooltip\n        id=\"copy-test-tooltip\"\n        title={tooltipText}\n        placement=\"top\"\n        leaveDelay={tooltipDelay}\n        onClose={() => setOpen(false)}\n        open={open}\n      >\n        <IconButton onClick={handleCopyClick}>\n          <CopyIcon />\n        </IconButton>\n      </Tooltip>\n    </>\n  );\n};\n\n// Type check for the JS files using this core component\nCopyTextButton.propTypes = {\n  text: PropTypes.string.isRequired,\n  tooltipDelay: PropTypes.number,\n  tooltipText: PropTypes.string,\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport { docco, dark } from 'react-syntax-highlighter/dist/cjs/styles/hljs';\nimport { useTheme } from '@material-ui/core';\nimport { BackstageTheme } from '@backstage/theme';\nimport { CopyTextButton } from '../CopyTextButton';\n\ntype Props = {\n  text: string;\n  language: string;\n  showLineNumbers?: boolean;\n  showCopyCodeButton?: boolean;\n  highlightedNumbers?: number[];\n  customStyle?: any;\n};\n\nexport const CodeSnippet = ({\n  text,\n  language,\n  showLineNumbers = false,\n  showCopyCodeButton = false,\n  highlightedNumbers,\n  customStyle,\n}: Props) => {\n  const theme = useTheme<BackstageTheme>();\n  const mode = theme.palette.type === 'dark' ? dark : docco;\n  const highlightColor = theme.palette.type === 'dark' ? '#256bf3' : '#e6ffed';\n  return (\n    <div style={{ position: 'relative' }}>\n      <SyntaxHighlighter\n        customStyle={customStyle}\n        language={language}\n        style={mode}\n        showLineNumbers={showLineNumbers}\n        wrapLines\n        lineNumberStyle={{ color: theme.palette.textVerySubtle }}\n        lineProps={(lineNumber: number) =>\n          highlightedNumbers?.includes(lineNumber)\n            ? {\n                style: {\n                  backgroundColor: highlightColor,\n                },\n              }\n            : {}\n        }\n      >\n        {text}\n      </SyntaxHighlighter>\n      {showCopyCodeButton && (\n        <div style={{ position: 'absolute', top: 0, right: 0 }}>\n          <CopyTextButton text={text} />\n        </div>\n      )}\n    </div>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { BackstageTheme } from '@backstage/theme';\nimport { Button, IconButton, useMediaQuery } from '@material-ui/core';\nimport React from 'react';\nimport { Link as RouterLink, LinkProps } from 'react-router-dom';\nimport AddCircleOutline from '@material-ui/icons/AddCircleOutline';\n\ntype CreateButtonProps = {\n  title: string;\n} & Partial<Pick<LinkProps, 'to'>>;\n\nexport const CreateButton = ({ title, to }: CreateButtonProps) => {\n  const isXSScreen = useMediaQuery<BackstageTheme>(theme =>\n    theme.breakpoints.down('xs'),\n  );\n\n  if (!to) {\n    return null;\n  }\n\n  return isXSScreen ? (\n    <IconButton\n      component={RouterLink}\n      color=\"primary\"\n      title={title}\n      size=\"small\"\n      to={to}\n    >\n      <AddCircleOutline />\n    </IconButton>\n  ) : (\n    <Button component={RouterLink} variant=\"contained\" color=\"primary\" to={to}>\n      {title}\n    </Button>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport dagre from 'dagre';\n\ntype CustomType = { [customKey: string]: any };\n\n/* Edges */\nexport type DependencyEdge<T = CustomType> = T & {\n  from: string;\n  to: string;\n  label?: string;\n};\n\nexport type GraphEdge<T = CustomType> = DependencyEdge<T> &\n  dagre.GraphEdge &\n  EdgeProperties;\n\nexport type RenderLabelProps<T = CustomType> = { edge: DependencyEdge<T> };\n\nexport type RenderLabelFunction = (\n  props: RenderLabelProps<any>,\n) => React.ReactNode;\n\n/* Nodes */\nexport type DependencyNode<T = CustomType> = T & {\n  id: string;\n};\n\nexport type GraphNode<T = CustomType> = dagre.Node<DependencyNode<T>>;\n\nexport type RenderNodeProps<T = CustomType> = { node: DependencyNode<T> };\n\nexport type RenderNodeFunction = (\n  props: RenderNodeProps<any>,\n) => React.ReactNode;\n\n/* Based on: https://github.com/dagrejs/dagre/wiki#configuring-the-layout  */\n\nexport type EdgeProperties = {\n  label?: string;\n  width?: number;\n  height?: number;\n  labeloffset?: number;\n  labelpos?: LabelPosition;\n  minlen?: number;\n  weight?: number;\n  [customKey: string]: any;\n};\n\nexport enum Direction {\n  TOP_BOTTOM = 'TB',\n  BOTTOM_TOP = 'BT',\n  LEFT_RIGHT = 'LR',\n  RIGHT_LEFT = 'RL',\n}\n\nexport enum Alignment {\n  UP_LEFT = 'UL',\n  UP_RIGHT = 'UR',\n  DOWN_LEFT = 'DL',\n  DOWN_RIGHT = 'DR',\n}\n\nexport enum Ranker {\n  NETWORK_SIMPLEX = 'network-simplex',\n  TIGHT_TREE = 'tight-tree',\n  LONGEST_PATH = 'longest-path',\n}\n\nexport enum LabelPosition {\n  LEFT = 'l',\n  RIGHT = 'r',\n  CENTER = 'c',\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { BackstageTheme } from '@backstage/theme';\nimport { RenderNodeProps } from './types';\n\nconst useStyles = makeStyles((theme: BackstageTheme) => ({\n  node: {\n    fill: theme.palette.background.paper,\n    stroke: theme.palette.border,\n  },\n  text: {\n    fill: theme.palette.textContrast,\n  },\n}));\n\nexport function DefaultNode({ node: { id } }: RenderNodeProps) {\n  const classes = useStyles();\n  const [width, setWidth] = React.useState(0);\n  const [height, setHeight] = React.useState(0);\n  const idRef = React.useRef<SVGTextElement | null>(null);\n\n  React.useLayoutEffect(() => {\n    // set the width to the length of the ID\n    if (idRef.current) {\n      let { height: renderedHeight, width: renderedWidth } =\n        idRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setWidth(renderedWidth);\n        setHeight(renderedHeight);\n      }\n    }\n  }, [width, height]);\n\n  const padding = 10;\n  const paddedWidth = width + padding * 2;\n  const paddedHeight = height + padding * 2;\n\n  return (\n    <g>\n      <rect\n        className={classes.node}\n        width={paddedWidth}\n        height={paddedHeight}\n        rx={10}\n      />\n      <text\n        ref={idRef}\n        className={classes.text}\n        y={paddedHeight / 2}\n        x={paddedWidth / 2}\n        textAnchor=\"middle\"\n        alignmentBaseline=\"middle\"\n      >\n        {id}\n      </text>\n    </g>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const ARROW_MARKER_ID = 'arrow-marker';\n\nexport const NODE_TEST_ID = 'node';\nexport const EDGE_TEST_ID = 'edge';\nexport const LABEL_TEST_ID = 'label';\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport { DefaultNode } from './DefaultNode';\nimport { RenderNodeFunction, RenderNodeProps, GraphNode } from './types';\nimport { NODE_TEST_ID } from './constants';\n\nconst useStyles = makeStyles(theme => ({\n  node: {\n    transition: `${theme.transitions.duration.shortest}ms`,\n  },\n}));\n\nexport type NodeComponentProps<T = any> = {\n  node: GraphNode<T>;\n  render?: RenderNodeFunction;\n  setNode: dagre.graphlib.Graph['setNode'];\n};\n\nconst renderDefault = (props: RenderNodeProps) => <DefaultNode {...props} />;\n\nexport function Node({\n  render = renderDefault,\n  setNode,\n  node,\n}: NodeComponentProps) {\n  const { width, height, x = 0, y = 0, ...nodeProps } = node;\n  const classes = useStyles();\n  const nodeRef = React.useRef<SVGGElement | null>(null);\n\n  React.useLayoutEffect(() => {\n    // set the node width to the actual rendered width to properly layout graph\n    if (nodeRef.current) {\n      let { height: renderedHeight, width: renderedWidth } =\n        nodeRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setNode(node.id, {\n          ...node,\n          height: renderedHeight,\n          width: renderedWidth,\n        });\n      }\n    }\n  }, [node, width, height, setNode]);\n\n  return (\n    <g\n      ref={nodeRef}\n      data-testid={NODE_TEST_ID}\n      className={classes.node}\n      transform={`translate(${x - width / 2},${y - height / 2})`}\n    >\n      {render({ node: nodeProps })}\n    </g>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport { BackstageTheme } from '@backstage/theme';\nimport { RenderLabelProps } from './types';\n\nconst useStyles = makeStyles((theme: BackstageTheme) => ({\n  text: {\n    fill: theme.palette.textContrast,\n  },\n}));\n\nexport function DefaultLabel({ edge: { label } }: RenderLabelProps) {\n  const classes = useStyles();\n  return (\n    <text className={classes.text} textAnchor=\"middle\">\n      {label}\n    </text>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport * as d3Shape from 'd3-shape';\nimport isFinite from 'lodash/isFinite';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport { BackstageTheme } from '@backstage/theme';\nimport {\n  GraphEdge,\n  RenderLabelProps,\n  RenderLabelFunction,\n  DependencyEdge,\n} from './types';\nimport { ARROW_MARKER_ID, EDGE_TEST_ID, LABEL_TEST_ID } from './constants';\nimport { DefaultLabel } from './DefaultLabel';\n\nconst useStyles = makeStyles((theme: BackstageTheme) => ({\n  path: {\n    strokeWidth: 2,\n    stroke: theme.palette.textSubtle,\n    fill: 'none',\n    transition: `${theme.transitions.duration.shortest}ms`,\n  },\n  label: {\n    transition: `${theme.transitions.duration.shortest}ms`,\n  },\n}));\n\ntype EdgePoint = dagre.GraphEdge['points'][0];\n\nexport type EdgeComponentProps<T = any> = {\n  id: dagre.Edge;\n  edge: GraphEdge<T>;\n  render?: RenderLabelFunction;\n  setEdge: (id: dagre.Edge, edge: DependencyEdge) => dagre.graphlib.Graph<{}>;\n};\n\nconst renderDefault = (props: RenderLabelProps) => <DefaultLabel {...props} />;\n\nconst createPath = d3Shape\n  .line<EdgePoint>()\n  .x(d => d.x)\n  .y(d => d.y)\n  .curve(d3Shape.curveMonotoneX);\n\nexport function Edge({\n  render = renderDefault,\n  setEdge,\n  id,\n  edge,\n}: EdgeComponentProps) {\n  const { x = 0, y = 0, width, height, points, ...labelProps } = edge;\n  const classes = useStyles();\n\n  const labelRef = React.useRef<SVGGElement>(null);\n\n  React.useLayoutEffect(() => {\n    // set the label width to the actual rendered width to properly layout graph\n    if (labelRef.current) {\n      let { height: renderedHeight, width: renderedWidth } =\n        labelRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setEdge(id, {\n          ...edge,\n          height: renderedHeight,\n          width: renderedWidth,\n        });\n      }\n    }\n  }, [edge, height, width, setEdge, id]);\n\n  let path: string = '';\n\n  if (points) {\n    const finitePoints = points.filter(\n      (point: EdgePoint) => isFinite(point.x) && isFinite(point.y),\n    );\n    path = createPath(finitePoints) || '';\n  }\n\n  return (\n    <>\n      {path && (\n        <path\n          data-testid={EDGE_TEST_ID}\n          className={classes.path}\n          markerEnd={`url(#${ARROW_MARKER_ID})`}\n          d={path}\n        />\n      )}\n      {labelProps.label ? (\n        <g\n          ref={labelRef}\n          data-testid={LABEL_TEST_ID}\n          className={classes.label}\n          transform={`translate(${x},${y})`}\n        >\n          {render({ edge: labelProps })}\n        </g>\n      ) : null}\n    </>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport * as d3Zoom from 'd3-zoom';\nimport * as d3Selection from 'd3-selection';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport dagre from 'dagre';\nimport debounce from 'lodash/debounce';\nimport { BackstageTheme } from '@backstage/theme';\nimport {\n  DependencyEdge,\n  DependencyNode,\n  Direction,\n  Alignment,\n  Ranker,\n  RenderNodeFunction,\n  RenderLabelFunction,\n  GraphEdge,\n  GraphNode,\n  LabelPosition,\n} from './types';\nimport { Node } from './Node';\nimport { Edge } from './Edge';\nimport { ARROW_MARKER_ID } from './constants';\n\nexport type DependencyGraphProps = React.SVGProps<SVGSVGElement> & {\n  edges: DependencyEdge[];\n  nodes: DependencyNode[];\n  direction?: Direction;\n  align?: Alignment;\n  nodeMargin?: number;\n  edgeMargin?: number;\n  rankMargin?: number;\n  paddingX?: number;\n  paddingY?: number;\n  acyclicer?: 'greedy';\n  ranker?: Ranker;\n  labelPosition?: LabelPosition;\n  labelOffset?: number;\n  edgeRanks?: number;\n  edgeWeight?: number;\n  renderNode?: RenderNodeFunction;\n  renderLabel?: RenderLabelFunction;\n  defs?: SVGDefsElement | SVGDefsElement[];\n};\n\nconst WORKSPACE_ID = 'workspace';\n\nexport function DependencyGraph({\n  edges,\n  nodes,\n  renderNode,\n  direction = Direction.TOP_BOTTOM,\n  align,\n  nodeMargin = 50,\n  edgeMargin = 10,\n  rankMargin = 50,\n  paddingX = 0,\n  paddingY = 0,\n  acyclicer,\n  ranker = Ranker.NETWORK_SIMPLEX,\n  labelPosition = LabelPosition.RIGHT,\n  labelOffset = 10,\n  edgeRanks = 1,\n  edgeWeight = 1,\n  renderLabel,\n  defs,\n  ...svgProps\n}: DependencyGraphProps) {\n  const theme: BackstageTheme = useTheme();\n  const [containerWidth, setContainerWidth] = React.useState<number>(100);\n  const [containerHeight, setContainerHeight] = React.useState<number>(100);\n\n  const graph = React.useRef<dagre.graphlib.Graph<{}>>(\n    new dagre.graphlib.Graph(),\n  );\n  const [graphWidth, setGraphWidth] = React.useState<number>(\n    graph.current.graph()?.width || 0,\n  );\n  const [graphHeight, setGraphHeight] = React.useState<number>(\n    graph.current.graph()?.height || 0,\n  );\n  const [graphNodes, setGraphNodes] = React.useState<string[]>([]);\n  const [graphEdges, setGraphEdges] = React.useState<dagre.Edge[]>([]);\n\n  const maxWidth = Math.max(graphWidth, containerWidth);\n  const maxHeight = Math.max(graphHeight, containerHeight);\n\n  const containerRef = React.useMemo(\n    () =>\n      debounce((node: SVGSVGElement) => {\n        if (!node) {\n          return;\n        }\n        // Set up zooming + panning\n        const container = d3Selection.select<SVGSVGElement, null>(node);\n        const workspace = d3Selection.select(node.getElementById(WORKSPACE_ID));\n        const zoom = d3Zoom\n          .zoom<SVGSVGElement, null>()\n          .scaleExtent([1, 10])\n          .on('zoom', event => {\n            event.transform.x = Math.min(\n              0,\n              Math.max(\n                event.transform.x,\n                maxWidth - maxWidth * event.transform.k,\n              ),\n            );\n            event.transform.y = Math.min(\n              0,\n              Math.max(\n                event.transform.y,\n                maxHeight - maxHeight * event.transform.k,\n              ),\n            );\n            workspace.attr('transform', event.transform);\n          });\n\n        container.call(zoom);\n\n        const { width: newContainerWidth, height: newContainerHeight } =\n          node.getBoundingClientRect();\n        if (containerWidth !== newContainerWidth) {\n          setContainerWidth(newContainerWidth);\n        }\n        if (containerHeight !== newContainerHeight) {\n          setContainerHeight(newContainerHeight);\n        }\n      }, 100),\n    [containerHeight, containerWidth, maxWidth, maxHeight],\n  );\n\n  const setNodesAndEdges = React.useCallback(() => {\n    // Cleaning up lingering nodes and edges\n    const currentGraphNodes = graph.current.nodes();\n    const currentGraphEdges = graph.current.edges();\n\n    currentGraphNodes.forEach(nodeId => {\n      const remainingNode = nodes.some(node => node.id === nodeId);\n      if (!remainingNode) {\n        graph.current.removeNode(nodeId);\n      }\n    });\n\n    currentGraphEdges.forEach(e => {\n      const remainingEdge = edges.some(\n        edge => edge.from === e.v && edge.to === e.w,\n      );\n      if (!remainingEdge) {\n        graph.current.removeEdge(e.v, e.w);\n      }\n    });\n\n    // Adding/updating nodes and edges\n    nodes.forEach(node => {\n      const existingNode = graph.current\n        .nodes()\n        .find(nodeId => node.id === nodeId);\n\n      if (existingNode && graph.current.node(existingNode)) {\n        const { width, height, x, y } = graph.current.node(existingNode);\n        graph.current.setNode(existingNode, { ...node, width, height, x, y });\n      } else {\n        graph.current.setNode(node.id, { ...node, width: 0, height: 0 });\n      }\n    });\n\n    edges.forEach(e => {\n      graph.current.setEdge(e.from, e.to, {\n        ...e,\n        label: e.label,\n        width: 0,\n        height: 0,\n        labelpos: labelPosition,\n        labeloffset: labelOffset,\n        weight: edgeWeight,\n        minlen: edgeRanks,\n      });\n    });\n  }, [edges, nodes, labelPosition, labelOffset, edgeWeight, edgeRanks]);\n\n  const updateGraph = React.useMemo(\n    () =>\n      debounce(\n        () => {\n          dagre.layout(graph.current);\n          const { height, width } = graph.current.graph();\n          const newHeight = Math.max(0, height || 0);\n          const newWidth = Math.max(0, width || 0);\n          setGraphWidth(newWidth);\n          setGraphHeight(newHeight);\n\n          setGraphNodes(graph.current.nodes());\n          setGraphEdges(graph.current.edges());\n        },\n        250,\n        { leading: true },\n      ),\n    [],\n  );\n\n  React.useEffect(() => {\n    graph.current.setGraph({\n      rankdir: direction,\n      align,\n      nodesep: nodeMargin,\n      edgesep: edgeMargin,\n      ranksep: rankMargin,\n      marginx: paddingX,\n      marginy: paddingY,\n      acyclicer,\n      ranker,\n    });\n\n    setNodesAndEdges();\n    updateGraph();\n\n    return updateGraph.cancel;\n  }, [\n    acyclicer,\n    align,\n    direction,\n    edgeMargin,\n    paddingX,\n    paddingY,\n    nodeMargin,\n    rankMargin,\n    ranker,\n    setNodesAndEdges,\n    updateGraph,\n  ]);\n\n  function setNode(id: string, node: DependencyNode) {\n    graph.current.setNode(id, node);\n    updateGraph();\n    return graph.current;\n  }\n\n  function setEdge(id: dagre.Edge, edge: DependencyEdge) {\n    graph.current.setEdge(id, edge);\n    updateGraph();\n    return graph.current;\n  }\n\n  return (\n    <svg\n      ref={containerRef}\n      {...svgProps}\n      width=\"100%\"\n      height={maxHeight}\n      viewBox={`0 0 ${maxWidth} ${maxHeight}`}\n    >\n      <defs>\n        <marker\n          id={ARROW_MARKER_ID}\n          viewBox=\"0 0 24 24\"\n          markerWidth=\"14\"\n          markerHeight=\"14\"\n          refX=\"16\"\n          refY=\"12\"\n          orient=\"auto\"\n          markerUnits=\"strokeWidth\"\n        >\n          <path\n            fill={theme.palette.textSubtle}\n            d=\"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z\"\n          />\n        </marker>\n        {defs}\n      </defs>\n      <g id={WORKSPACE_ID}>\n        <svg\n          width={graphWidth}\n          height={graphHeight}\n          y={maxHeight / 2 - graphHeight / 2}\n          x={maxWidth / 2 - graphWidth / 2}\n          viewBox={`0 0 ${graphWidth} ${graphHeight}`}\n        >\n          {graphEdges.map(e => {\n            const edge = graph.current.edge(e) as GraphEdge;\n            if (!edge) return null;\n            return (\n              <Edge\n                key={`${e.v}-${e.w}`}\n                id={e}\n                setEdge={setEdge}\n                render={renderLabel}\n                edge={edge}\n              />\n            );\n          })}\n          {graphNodes.map((id: string) => {\n            const node = graph.current.node(id) as GraphNode;\n            if (!node) return null;\n            return (\n              <Node\n                key={id}\n                setNode={setNode}\n                render={renderNode}\n                node={node}\n              />\n            );\n          })}\n        </svg>\n      </g>\n    </svg>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ReactNode, useState, useEffect } from 'react';\nimport { useApi, storageApiRef } from '@backstage/core-plugin-api';\nimport { useObservable } from 'react-use';\nimport classNames from 'classnames';\nimport { makeStyles } from '@material-ui/core';\nimport { BackstageTheme } from '@backstage/theme';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport IconButton from '@material-ui/core/IconButton';\nimport Close from '@material-ui/icons/Close';\n\nconst useStyles = makeStyles((theme: BackstageTheme) => ({\n  root: {\n    padding: theme.spacing(0),\n    marginBottom: theme.spacing(0),\n    marginTop: theme.spacing(0),\n    display: 'flex',\n    flexFlow: 'row nowrap',\n  },\n  // showing on top\n  topPosition: {\n    position: 'relative',\n    marginBottom: theme.spacing(6),\n    marginTop: -theme.spacing(3),\n    zIndex: 'unset',\n  },\n  icon: {\n    fontSize: 20,\n  },\n  content: {\n    width: '100%',\n    maxWidth: 'inherit',\n  },\n  message: {\n    display: 'flex',\n    alignItems: 'center',\n    color: theme.palette.banner.text,\n    '& a': {\n      color: theme.palette.banner.link,\n    },\n  },\n  info: {\n    backgroundColor: theme.palette.banner.info,\n  },\n  error: {\n    backgroundColor: theme.palette.banner.error,\n  },\n}));\n\ntype Props = {\n  variant: 'info' | 'error';\n  message: ReactNode;\n  id: string;\n  fixed?: boolean;\n};\n\nexport const DismissableBanner = ({\n  variant,\n  message,\n  id,\n  fixed = false,\n}: Props) => {\n  const classes = useStyles();\n  const storageApi = useApi(storageApiRef);\n  const notificationsStore = storageApi.forBucket('notifications');\n  const rawDismissedBanners =\n    notificationsStore.get<string[]>('dismissedBanners') ?? [];\n\n  const [dismissedBanners, setDismissedBanners] = useState(\n    new Set(rawDismissedBanners),\n  );\n\n  const observedItems = useObservable(\n    notificationsStore.observe$<string[]>('dismissedBanners'),\n  );\n\n  useEffect(() => {\n    if (observedItems?.newValue) {\n      const currentValue = observedItems?.newValue ?? [];\n      setDismissedBanners(new Set(currentValue));\n    }\n  }, [observedItems?.newValue]);\n\n  const handleClick = () => {\n    notificationsStore.set('dismissedBanners', [...dismissedBanners, id]);\n  };\n\n  return (\n    <Snackbar\n      anchorOrigin={\n        fixed\n          ? { vertical: 'bottom', horizontal: 'center' }\n          : { vertical: 'top', horizontal: 'center' }\n      }\n      open={!dismissedBanners.has(id)}\n      classes={{\n        root: classNames(classes.root, !fixed && classes.topPosition),\n      }}\n    >\n      <SnackbarContent\n        classes={{\n          root: classNames(classes.content, classes[variant]),\n          message: classes.message,\n        }}\n        message={message}\n        action={[\n          <IconButton\n            key=\"dismiss\"\n            title=\"Permanently dismiss this message\"\n            color=\"inherit\"\n            onClick={handleClick}\n          >\n            <Close className={classes.icon} />\n          </IconButton>,\n        ]}\n      />\n    </Snackbar>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport missingAnnotation from './assets/missingAnnotation.svg';\nimport noInformation from './assets/noInformation.svg';\nimport createComponent from './assets/createComponent.svg';\nimport noBuild from './assets/noBuild.svg';\nimport { makeStyles } from '@material-ui/core';\n\ntype Props = {\n  missing: 'field' | 'info' | 'content' | 'data';\n};\n\nconst useStyles = makeStyles({\n  generalImg: {\n    width: '95%',\n    zIndex: 2,\n    position: 'relative',\n    left: '50%',\n    top: '50%',\n    transform: 'translate(-50%, 15%)',\n  },\n});\n\nexport const EmptyStateImage = ({ missing }: Props) => {\n  const classes = useStyles();\n  switch (missing) {\n    case 'field':\n      return (\n        <img\n          src={missingAnnotation}\n          className={classes.generalImg}\n          alt=\"annotation is missing\"\n        />\n      );\n    case 'info':\n      return (\n        <img\n          src={noInformation}\n          alt=\"no Information\"\n          className={classes.generalImg}\n        />\n      );\n    case 'content':\n      return (\n        <img\n          src={createComponent}\n          alt=\"create Component\"\n          className={classes.generalImg}\n        />\n      );\n    case 'data':\n      return (\n        <img src={noBuild} alt=\"no Build\" className={classes.generalImg} />\n      );\n    default:\n      return null;\n  }\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles, Typography, Grid } from '@material-ui/core';\nimport { EmptyStateImage } from './EmptyStateImage';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    backgroundColor: theme.palette.background.default,\n    padding: theme.spacing(2, 0, 0, 0),\n  },\n  action: {\n    marginTop: theme.spacing(2),\n  },\n  imageContainer: {\n    position: 'relative',\n  },\n}));\n\ntype Props = {\n  title: string;\n  description?: string | JSX.Element;\n  missing: 'field' | 'info' | 'content' | 'data';\n  action?: JSX.Element;\n};\n\nexport const EmptyState = ({ title, description, missing, action }: Props) => {\n  const classes = useStyles();\n  return (\n    <Grid\n      container\n      direction=\"row\"\n      justifyContent=\"space-around\"\n      alignItems=\"flex-start\"\n      className={classes.root}\n      spacing={2}\n    >\n      <Grid item xs={12} md={6}>\n        <Grid container direction=\"column\">\n          <Grid item xs>\n            <Typography variant=\"h5\">{title}</Typography>\n          </Grid>\n          <Grid item xs>\n            <Typography variant=\"body1\">{description}</Typography>\n          </Grid>\n          <Grid item xs className={classes.action}>\n            {action}\n          </Grid>\n        </Grid>\n      </Grid>\n      <Grid item xs={12} md={6} className={classes.imageContainer}>\n        <EmptyStateImage missing={missing} />\n      </Grid>\n    </Grid>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Button, makeStyles, Typography } from '@material-ui/core';\nimport { BackstageTheme } from '@backstage/theme';\nimport { Link } from '../Link';\nimport { EmptyState } from './EmptyState';\nimport { CodeSnippet } from '../CodeSnippet';\n\nconst COMPONENT_YAML = `apiVersion: backstage.io/v1alpha1\nkind: Component\nmetadata:\n  name: example\n  description: example.com\n  annotations:\n    ANNOTATION: value\nspec:\n  type: website\n  lifecycle: production\n  owner: user:guest`;\n\ntype Props = {\n  annotation: string;\n};\n\nconst useStyles = makeStyles<BackstageTheme>(theme => ({\n  code: {\n    borderRadius: 6,\n    margin: `${theme.spacing(2)}px 0px`,\n    background: theme.palette.type === 'dark' ? '#444' : '#fff',\n  },\n}));\n\nexport const MissingAnnotationEmptyState = ({ annotation }: Props) => {\n  const classes = useStyles();\n  const description = (\n    <>\n      The <code>{annotation}</code> annotation is missing. You need to add the\n      annotation to your component if you want to enable this tool.\n    </>\n  );\n  return (\n    <EmptyState\n      missing=\"field\"\n      title=\"Missing Annotation\"\n      description={description}\n      action={\n        <>\n          <Typography variant=\"body1\">\n            Add the annotation to your component YAML as shown in the\n            highlighted example below:\n          </Typography>\n          <div className={classes.code}>\n            <CodeSnippet\n              text={COMPONENT_YAML.replace('ANNOTATION', annotation)}\n              language=\"yaml\"\n              showLineNumbers\n              highlightedNumbers={[6, 7]}\n              customStyle={{ background: 'inherit', fontSize: '115%' }}\n            />\n          </div>\n          <Button\n            color=\"primary\"\n            component={Link}\n            to=\"https://backstage.io/docs/features/software-catalog/well-known-annotations\"\n          >\n            Read more\n          </Button>\n        </>\n      }\n    />\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { BackstageTheme } from '@backstage/theme';\nimport {\n  Accordion,\n  AccordionSummary,\n  AccordionDetails,\n  Grid,\n  makeStyles,\n  Typography,\n  darken,\n  lighten,\n} from '@material-ui/core';\nimport ErrorOutline from '@material-ui/icons/ErrorOutline';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport React from 'react';\n\nconst getWarningTextColor = (\n  severity: NonNullable<WarningProps['severity']>,\n  theme: BackstageTheme,\n) => {\n  const getColor = theme.palette.type === 'light' ? darken : lighten;\n  return getColor(theme.palette[severity].light, 0.6);\n};\n\nconst getWarningBackgroundColor = (\n  severity: NonNullable<WarningProps['severity']>,\n  theme: BackstageTheme,\n) => {\n  const getBackgroundColor = theme.palette.type === 'light' ? lighten : darken;\n  return getBackgroundColor(theme.palette[severity].light, 0.9);\n};\n\nconst useErrorOutlineStyles = makeStyles<BackstageTheme>(theme => ({\n  root: {\n    marginRight: theme.spacing(1),\n    fill: ({ severity }: WarningProps) =>\n      getWarningTextColor(\n        severity as NonNullable<WarningProps['severity']>,\n        theme,\n      ),\n  },\n}));\n\nconst ErrorOutlineStyled = ({ severity }: Pick<WarningProps, 'severity'>) => {\n  const classes = useErrorOutlineStyles({ severity });\n  return <ErrorOutline classes={classes} />;\n};\nconst ExpandMoreIconStyled = ({ severity }: Pick<WarningProps, 'severity'>) => {\n  const classes = useErrorOutlineStyles({ severity });\n  return <ExpandMoreIcon classes={classes} />;\n};\n\nconst useStyles = makeStyles<BackstageTheme>(theme => ({\n  panel: {\n    backgroundColor: ({ severity }: WarningProps) =>\n      getWarningBackgroundColor(\n        severity as NonNullable<WarningProps['severity']>,\n        theme,\n      ),\n    color: ({ severity }: WarningProps) =>\n      getWarningTextColor(\n        severity as NonNullable<WarningProps['severity']>,\n        theme,\n      ),\n    verticalAlign: 'middle',\n  },\n  summary: {\n    display: 'flex',\n    flexDirection: 'row',\n  },\n  summaryText: {\n    color: ({ severity }: WarningProps) =>\n      getWarningTextColor(\n        severity as NonNullable<WarningProps['severity']>,\n        theme,\n      ),\n    fontWeight: 'bold',\n  },\n  message: {\n    width: '100%',\n    display: 'block',\n    color: ({ severity }: WarningProps) =>\n      getWarningTextColor(\n        severity as NonNullable<WarningProps['severity']>,\n        theme,\n      ),\n    backgroundColor: ({ severity }: WarningProps) =>\n      getWarningBackgroundColor(\n        severity as NonNullable<WarningProps['severity']>,\n        theme,\n      ),\n  },\n  details: {\n    width: '100%',\n    display: 'block',\n    color: theme.palette.textContrast,\n    backgroundColor: theme.palette.background.default,\n    border: `1px solid ${theme.palette.border}`,\n    padding: theme.spacing(2.0),\n    fontFamily: 'sans-serif',\n  },\n}));\n\nexport type WarningProps = {\n  title?: string;\n  severity?: 'warning' | 'error' | 'info';\n  message?: React.ReactNode;\n  defaultExpanded?: boolean;\n  children?: React.ReactNode;\n};\n\nconst capitalize = (s: string) => {\n  return s.charAt(0).toLocaleUpperCase('en-US') + s.slice(1);\n};\n\n/**\n * WarningPanel. Show a user friendly error message to a user similar to ErrorPanel except that the warning panel\n * only shows the warning message to the user.\n *\n * @param {string} [severity=warning] Ability to change the severity of the alert.\n * @param {string} [title] A title for the warning. If not supplied, \"Warning\" will be used.\n * @param {Object} [message] Optional more detailed user-friendly message elaborating on the cause of the error.\n * @param {Object} [children] Objects to provide context, such as a stack trace or detailed error reporting.\n * Will be available inside an unfolded accordion.\n */\nexport const WarningPanel = ({\n  severity = 'warning',\n  title,\n  message,\n  children,\n  defaultExpanded,\n}: WarningProps) => {\n  const classes = useStyles({ severity });\n\n  // If no severity or title provided, the heading will read simply \"Warning\"\n  const subTitle = capitalize(severity) + (title ? `: ${title}` : '');\n\n  return (\n    <Accordion\n      defaultExpanded={defaultExpanded ?? false}\n      className={classes.panel}\n      role=\"alert\"\n    >\n      <AccordionSummary\n        expandIcon={<ExpandMoreIconStyled severity={severity} />}\n        className={classes.summary}\n      >\n        <ErrorOutlineStyled severity={severity} />\n        <Typography className={classes.summaryText} variant=\"subtitle1\">\n          {subTitle}\n        </Typography>\n      </AccordionSummary>\n      {(message || children) && (\n        <AccordionDetails>\n          <Grid container>\n            {message && (\n              <Grid item xs={12}>\n                <Typography className={classes.message} variant=\"body1\">\n                  {message}\n                </Typography>\n              </Grid>\n            )}\n            {children && (\n              <Grid item xs={12} className={classes.details}>\n                {children}\n              </Grid>\n            )}\n          </Grid>\n        </AccordionDetails>\n      )}\n    </Accordion>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { List, ListItem, ListItemText, makeStyles } from '@material-ui/core';\nimport React, { PropsWithChildren } from 'react';\nimport { CopyTextButton } from '../CopyTextButton';\nimport { WarningPanel } from '../WarningPanel';\n\nconst useStyles = makeStyles(theme => ({\n  text: {\n    fontFamily: 'monospace',\n    whiteSpace: 'pre',\n    overflowX: 'auto',\n    marginRight: theme.spacing(2),\n  },\n  divider: {\n    margin: theme.spacing(2),\n  },\n}));\n\ntype ErrorListProps = {\n  error: string;\n  message: string;\n  request?: string;\n  stack?: string;\n  json?: string;\n};\n\nconst ErrorList = ({\n  error,\n  message,\n  stack,\n  children,\n}: PropsWithChildren<ErrorListProps>) => {\n  const classes = useStyles();\n\n  return (\n    <List dense>\n      <ListItem alignItems=\"flex-start\">\n        <ListItemText\n          classes={{ secondary: classes.text }}\n          primary=\"Error\"\n          secondary={error}\n        />\n        <CopyTextButton text={error} />\n      </ListItem>\n\n      <ListItem alignItems=\"flex-start\">\n        <ListItemText\n          classes={{ secondary: classes.text }}\n          primary=\"Message\"\n          secondary={message}\n        />\n        <CopyTextButton text={message} />\n      </ListItem>\n\n      {stack && (\n        <ListItem alignItems=\"flex-start\">\n          <ListItemText\n            classes={{ secondary: classes.text }}\n            primary=\"Stack Trace\"\n            secondary={stack}\n          />\n          <CopyTextButton text={stack} />\n        </ListItem>\n      )}\n\n      {children}\n    </List>\n  );\n};\n\nexport type ErrorPanelProps = {\n  error: Error;\n  defaultExpanded?: boolean;\n  title?: string;\n};\n\n/**\n * Renders a warning panel as the effect of an error.\n */\nexport const ErrorPanel = ({\n  title,\n  error,\n  defaultExpanded,\n  children,\n}: PropsWithChildren<ErrorPanelProps>) => {\n  return (\n    <WarningPanel\n      severity=\"error\"\n      title={title ?? error.message}\n      defaultExpanded={defaultExpanded}\n    >\n      <ErrorList\n        error={error.name}\n        message={error.message}\n        stack={error.stack}\n        children={children}\n      />\n    </WarningPanel>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ResponseError } from '@backstage/errors';\nimport { Divider, ListItem, ListItemText, makeStyles } from '@material-ui/core';\nimport React from 'react';\nimport { CodeSnippet } from '../CodeSnippet';\nimport { CopyTextButton } from '../CopyTextButton';\nimport { ErrorPanel, ErrorPanelProps } from '../ErrorPanel';\n\nconst useStyles = makeStyles(theme => ({\n  text: {\n    fontFamily: 'monospace',\n    whiteSpace: 'pre',\n    overflowX: 'auto',\n    marginRight: theme.spacing(2),\n  },\n  divider: {\n    margin: theme.spacing(2),\n  },\n}));\n\n/**\n * Renders a warning panel as the effect of a failed server request.\n *\n * Has special treatment for ResponseError errors, to display rich\n * server-provided information about what happened.\n */\nexport const ResponseErrorPanel = ({\n  title,\n  error,\n  defaultExpanded,\n}: ErrorPanelProps) => {\n  const classes = useStyles();\n\n  if (error.name !== 'ResponseError') {\n    return (\n      <ErrorPanel\n        title={title ?? error.message}\n        defaultExpanded={defaultExpanded}\n        error={error}\n      />\n    );\n  }\n\n  const { data, cause } = error as ResponseError;\n  const { request, response } = data;\n\n  const errorString = `${response.statusCode}: ${cause.name}`;\n  const requestString = request && `${request.method} ${request.url}`;\n  const messageString = cause.message.replace(/\\\\n/g, '\\n');\n  const stackString = cause.stack?.replace(/\\\\n/g, '\\n');\n  const jsonString = JSON.stringify(data, undefined, 2);\n\n  return (\n    <ErrorPanel\n      title={title ?? error.message}\n      defaultExpanded={defaultExpanded}\n      error={{ name: errorString, message: messageString, stack: stackString }}\n    >\n      {requestString && (\n        <ListItem alignItems=\"flex-start\">\n          <ListItemText\n            classes={{ secondary: classes.text }}\n            primary=\"Request\"\n            secondary={request ? `${requestString}` : undefined}\n          />\n          <CopyTextButton text={requestString} />\n        </ListItem>\n      )}\n      <>\n        <Divider component=\"li\" className={classes.divider} />\n        <ListItem alignItems=\"flex-start\">\n          <ListItemText\n            classes={{ secondary: classes.text }}\n            primary=\"Full Error as JSON\"\n          />\n        </ListItem>\n        <CodeSnippet language=\"json\" text={jsonString} showCopyCodeButton />\n      </>\n    </ErrorPanel>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useRef, useEffect } from 'react';\n\n/**\n * Creates DOM element to be used as React root.\n */\nfunction createRootElement(id: string): Element {\n  const rootContainer = document.createElement('div');\n  rootContainer.setAttribute('id', id);\n  return rootContainer;\n}\n\n/**\n * Appends element as last child of body.\n */\nfunction addRootElement(rootElem: Element): void {\n  document.body.insertBefore(\n    rootElem,\n    document.body.lastElementChild!.nextElementSibling,\n  );\n}\n\n/**\n * Hook to create a React Portal.\n *\n * Automatically handles creating and tearing-down the root elements (no SRR\n * makes this trivial), so there is no need to ensure the parent target already\n * exists.\n *\n * @example\n * const target = usePortal(id, [id]);\n * return createPortal(children, target);\n *\n * @param id The id of the target container, e.g 'modal' or 'spotlight'\n * @returns The DOM node to use as the Portal target.\n */\nexport function usePortal(id: string): HTMLElement {\n  const rootElemRef = useRef<HTMLElement | null>(null);\n\n  useEffect(\n    function setupElement() {\n      // Look for existing target dom element to append to\n      const existingParent = document.querySelector(`#${id}`);\n      // Parent is either a new root or the existing dom element\n      const parentElem = existingParent || createRootElement(id);\n\n      // If there is no existing DOM element, add a new one.\n      if (!existingParent) {\n        addRootElement(parentElem);\n      }\n\n      // Add the detached element to the parent\n      parentElem.appendChild(rootElemRef.current!);\n\n      return function removeElement() {\n        rootElemRef.current!.remove();\n        if (parentElem.childNodes.length === -1) {\n          parentElem.remove();\n        }\n      };\n    },\n    [id],\n  );\n\n  /**\n   * It's important we evaluate this lazily:\n   * - We need first render to contain the DOM element, so it shouldn't happen\n   *   in useEffect. We would normally put this in the constructor().\n   * - We can't do 'const rootElemRef = useRef(document.createElement('div))',\n   *   since this will run every single render (that's a lot).\n   * - We want the ref to consistently point to the same DOM element and only\n   *   ever run once.\n   * @link https://reactjs.org/docs/hooks-faq.html#how-to-create-expensive-objects-lazily\n   */\n  function getRootElem() {\n    if (!rootElemRef.current) {\n      rootElemRef.current = document.createElement('div');\n    }\n    return rootElemRef.current;\n  }\n\n  return getRootElem();\n}\n\nexport default usePortal;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useCallback, useState } from 'react';\n\nconst STATES_LOCAL_STORAGE_KEY = 'core.calloutSeen';\n\nfunction useCalloutStates(): {\n  states: Record<string, boolean>;\n  setState: (key: string, value: boolean) => void;\n} {\n  const [states, setStates] = useState<Record<string, boolean>>(() => {\n    const raw = localStorage.getItem(STATES_LOCAL_STORAGE_KEY);\n    return raw ? JSON.parse(raw) : {};\n  });\n\n  const setState = useCallback((key: string, value: boolean) => {\n    const raw = localStorage.getItem(STATES_LOCAL_STORAGE_KEY);\n    const oldStates = raw ? JSON.parse(raw) : {};\n    const newStates = { ...oldStates, [key]: value };\n    setStates(newStates);\n    localStorage.setItem(STATES_LOCAL_STORAGE_KEY, JSON.stringify(newStates));\n  }, []);\n\n  return { states, setState };\n}\n\nfunction useCalloutHasBeenSeen(featureId: string): {\n  seen: boolean | undefined;\n  markSeen: () => void;\n} {\n  const { states, setState } = useCalloutStates();\n\n  const markSeen = useCallback(() => {\n    setState(featureId, true);\n  }, [setState, featureId]);\n\n  return { seen: states[featureId] === true, markSeen };\n}\n\nexport function useShowCallout(featureId: string): {\n  show: boolean;\n  hide: () => void;\n} {\n  const { seen, markSeen } = useCalloutHasBeenSeen(featureId);\n  return { show: seen === false, hide: markSeen };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ClickAwayListener, makeStyles, Typography } from '@material-ui/core';\nimport React, {\n  PropsWithChildren,\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useRef,\n  useState,\n} from 'react';\nimport { createPortal } from 'react-dom';\nimport { usePortal } from './lib/usePortal';\nimport { useShowCallout } from './lib/useShowCallout';\n\nconst useStyles = makeStyles({\n  '@keyframes pulsateSlightly': {\n    '0%': { transform: 'scale(1.0)' },\n    '100%': { transform: 'scale(1.1)' },\n  },\n  '@keyframes pulsateAndFade': {\n    '0%': { transform: 'scale(1.0)', opacity: 0.9 },\n    '100%': { transform: 'scale(1.5)', opacity: 0 },\n  },\n  featureWrapper: {\n    position: 'relative',\n  },\n  backdrop: {\n    zIndex: 2000,\n    position: 'fixed',\n    overflow: 'hidden',\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n  },\n  dot: {\n    position: 'absolute',\n    backgroundColor: 'transparent',\n    borderRadius: '100%',\n    border: '1px solid rgba(103, 146, 180, 0.98)',\n    boxShadow: '0px 0px 0px 20000px rgba(0, 0, 0, 0.5)',\n    zIndex: 2001,\n    transformOrigin: 'center center',\n    animation:\n      '$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite',\n  },\n  pulseCircle: {\n    width: '100%',\n    height: '100%',\n    backgroundColor: 'transparent',\n    borderRadius: '100%',\n    border: '2px solid white',\n    zIndex: 2001,\n    transformOrigin: 'center center',\n    animation:\n      '$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite',\n  },\n  text: {\n    position: 'absolute',\n    color: 'white',\n    zIndex: 2003,\n  },\n});\n\nexport type Props = {\n  featureId: string;\n  title: string;\n  description: string;\n};\n\ntype Placement = {\n  dotLeft: number;\n  dotTop: number;\n  dotSize: number;\n  borderWidth: number;\n  textLeft: number;\n  textTop: number;\n  textWidth: number;\n};\n\nexport const FeatureCalloutCircular = ({\n  featureId,\n  title,\n  description,\n  children,\n}: PropsWithChildren<Props>) => {\n  const { show, hide } = useShowCallout(featureId);\n  const portalElement = usePortal('core.callout');\n  const wrapperRef = useRef<HTMLDivElement>(null);\n  const [placement, setPlacement] = useState<Placement | undefined>();\n  const classes = useStyles();\n\n  const update = useCallback(() => {\n    if (wrapperRef.current) {\n      const wrapperBounds = wrapperRef.current.getBoundingClientRect();\n      const longest = Math.max(wrapperBounds.width, wrapperBounds.height);\n\n      const borderWidth = 800;\n      const dotLeft =\n        wrapperBounds.x - (longest - wrapperBounds.width) / 2 - borderWidth;\n      const dotTop =\n        wrapperBounds.y - (longest - wrapperBounds.height) / 2 - borderWidth;\n      const dotSize = longest + 2 * borderWidth;\n\n      const textWidth = 450;\n      const textLeft = wrapperBounds.x + wrapperBounds.width / 2 - textWidth;\n      const textTop =\n        wrapperBounds.y - (longest - wrapperBounds.height) / 2 + longest + 20;\n\n      setPlacement({\n        dotLeft,\n        dotTop,\n        dotSize,\n        borderWidth,\n        textTop,\n        textLeft,\n        textWidth,\n      });\n    }\n  }, []);\n\n  useEffect(() => {\n    window.addEventListener('resize', update);\n    window.addEventListener('scroll', update);\n    return () => {\n      window.removeEventListener('resize', update);\n      window.removeEventListener('scroll', update);\n    };\n  }, [update]);\n\n  useLayoutEffect(update, [wrapperRef.current, update]);\n\n  if (!show) {\n    return <>{children}</>;\n  }\n\n  return (\n    <>\n      <div className={classes.featureWrapper} ref={wrapperRef}>\n        {children}\n      </div>\n      {createPortal(\n        <div className={classes.backdrop}>\n          <ClickAwayListener onClickAway={hide}>\n            <>\n              <div\n                className={classes.dot}\n                data-testid=\"dot\"\n                style={{\n                  left: placement?.dotLeft,\n                  top: placement?.dotTop,\n                  width: placement?.dotSize,\n                  height: placement?.dotSize,\n                  borderWidth: placement?.borderWidth,\n                }}\n                onClick={hide}\n                onKeyDown={hide}\n                role=\"button\"\n                tabIndex={0}\n              >\n                <div className={classes.pulseCircle} />\n              </div>\n              <div\n                className={classes.text}\n                data-testid=\"text\"\n                style={{\n                  left: placement?.textLeft,\n                  top: placement?.textTop,\n                  width: placement?.textWidth,\n                }}\n              >\n                <Typography variant=\"h2\" paragraph>\n                  {title}\n                </Typography>\n                <Typography>{description}</Typography>\n              </div>\n            </>\n          </ClickAwayListener>\n        </div>,\n        portalElement,\n      )}\n    </>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport classnames from 'classnames';\nimport { makeStyles, Link } from '@material-ui/core';\nimport LinkIcon from '@material-ui/icons/Link';\nimport { Link as RouterLink } from '../Link';\n\nexport type IconLinkVerticalProps = {\n  color?: 'primary' | 'secondary';\n  disabled?: boolean;\n  href?: string;\n  icon?: React.ReactNode;\n  label: string;\n  onClick?: React.MouseEventHandler<HTMLAnchorElement>;\n  title?: string;\n};\n\nconst useIconStyles = makeStyles(theme => ({\n  link: {\n    display: 'grid',\n    justifyItems: 'center',\n    gridGap: 4,\n    textAlign: 'center',\n  },\n  disabled: {\n    color: 'gray',\n    cursor: 'default',\n  },\n  primary: {\n    color: theme.palette.primary.main,\n  },\n  secondary: {\n    color: theme.palette.secondary.main,\n  },\n  label: {\n    fontSize: '0.7rem',\n    textTransform: 'uppercase',\n    fontWeight: 600,\n    letterSpacing: 1.2,\n  },\n}));\n\nexport function IconLinkVertical({\n  color = 'primary',\n  disabled = false,\n  href = '#',\n  icon = <LinkIcon />,\n  label,\n  onClick,\n  title,\n}: IconLinkVerticalProps) {\n  const classes = useIconStyles();\n\n  if (disabled) {\n    return (\n      <Link\n        title={title}\n        className={classnames(classes.link, classes.disabled)}\n        underline=\"none\"\n      >\n        {icon}\n        <span className={classes.label}>{label}</span>\n      </Link>\n    );\n  }\n\n  return (\n    <Link\n      title={title}\n      className={classnames(classes.link, classes[color])}\n      to={href}\n      component={RouterLink}\n      onClick={onClick}\n    >\n      {icon}\n      <span className={classes.label}>{label}</span>\n    </Link>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { IconLinkVertical, IconLinkVerticalProps } from './IconLinkVertical';\nimport { makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  links: {\n    margin: theme.spacing(2, 0),\n    display: 'grid',\n    gridAutoFlow: 'column',\n    gridAutoColumns: 'min-content',\n    gridGap: theme.spacing(3),\n  },\n}));\n\ntype Props = {\n  links: IconLinkVerticalProps[];\n};\n\nexport const HeaderIconLinkRow = ({ links }: Props) => {\n  const classes = useStyles();\n  return (\n    <nav className={classes.links}>\n      {links.map((link, index) => (\n        <IconLinkVertical key={index + 1} {...link} />\n      ))}\n    </nav>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { PropsWithChildren } from 'react';\nimport classNames from 'classnames';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport { Grid, IconButton, makeStyles, Theme } from '@material-ui/core';\n\nconst generateGradientStops = (themeType: 'dark' | 'light') => {\n  // 97% corresponds to the theme.palette.background.default for the light theme\n  // 16% for the dark theme\n  const luminance = themeType === 'dark' ? '16%' : '97%';\n  // Generated with https://larsenwork.com/easing-gradients/\n  return `\n    hsl(0, 0%, ${luminance}) 0%,\n    hsla(0, 0%, ${luminance}, 0.987) 8.1%,\n    hsla(0, 0%, ${luminance}, 0.951) 15.5%,\n    hsla(0, 0%, ${luminance}, 0.896) 22.5%,\n    hsla(0, 0%, ${luminance}, 0.825) 29%,\n    hsla(0, 0%, ${luminance}, 0.741) 35.3%,\n    hsla(0, 0%, ${luminance}, 0.648) 41.2%,\n    hsla(0, 0%, ${luminance}, 0.55) 47.1%,\n    hsla(0, 0%, ${luminance}, 0.45) 52.9%,\n    hsla(0, 0%, ${luminance}, 0.352) 58.8%,\n    hsla(0, 0%, ${luminance}, 0.259) 64.7%,\n    hsla(0, 0%, ${luminance}, 0.175) 71%,\n    hsla(0, 0%, ${luminance}, 0.104) 77.5%,\n    hsla(0, 0%, ${luminance}, 0.049) 84.5%,\n    hsla(0, 0%, ${luminance}, 0.013) 91.9%,\n    hsla(0, 0%, ${luminance}, 0) 100%\n  `;\n};\n\nconst fadeSize = 100;\nconst fadePadding = 10;\n\ntype Props = {\n  scrollStep?: number;\n  scrollSpeed?: number; // lower is faster\n  minScrollDistance?: number; // limits how small steps the scroll can take in px\n};\n\nconst useStyles = makeStyles<Theme>(theme => ({\n  root: {\n    position: 'relative',\n    display: 'flex',\n    flexFlow: 'row nowrap',\n    alignItems: 'center',\n  },\n  container: {\n    overflow: 'auto',\n    scrollbarWidth: 0 as any, // hide in FF\n    '&::-webkit-scrollbar': {\n      display: 'none', // hide in Chrome\n    },\n  },\n  fade: {\n    position: 'absolute',\n    width: fadeSize,\n    height: `calc(100% + ${fadePadding}px)`,\n    transition: 'opacity 300ms',\n    pointerEvents: 'none',\n  },\n  fadeLeft: {\n    left: -fadePadding,\n    background: `linear-gradient(90deg, ${generateGradientStops(\n      theme.palette.type,\n    )})`,\n  },\n  fadeRight: {\n    right: -fadePadding,\n    background: `linear-gradient(270deg, ${generateGradientStops(\n      theme.palette.type,\n    )})`,\n  },\n  fadeHidden: {\n    opacity: 0,\n  },\n  button: {\n    position: 'absolute',\n  },\n  buttonLeft: {\n    left: -theme.spacing(2),\n  },\n  buttonRight: {\n    right: -theme.spacing(2),\n  },\n}));\n\n// Returns scroll distance from left and right\nfunction useScrollDistance(\n  ref: React.MutableRefObject<HTMLElement | undefined>,\n): [number, number] {\n  const [[scrollLeft, scrollRight], setScroll] = React.useState<\n    [number, number]\n  >([0, 0]);\n\n  React.useLayoutEffect(() => {\n    const el = ref.current;\n    if (!el) {\n      setScroll([0, 0]);\n      return;\n    }\n\n    const handleUpdate = () => {\n      const left = el.scrollLeft;\n      const right = el.scrollWidth - el.offsetWidth - el.scrollLeft;\n      setScroll([left, right]);\n    };\n\n    handleUpdate();\n\n    el.addEventListener('scroll', handleUpdate);\n    window.addEventListener('resize', handleUpdate);\n    // TODO(freben): Remove this eslint exception later\n    // It's here because @types/react-router-dom v5 pulls in @types/react that have the wrong signature\n    // eslint-disable-next-line consistent-return\n    return () => {\n      el.removeEventListener('scroll', handleUpdate);\n      window.removeEventListener('resize', handleUpdate);\n    };\n  }, [ref]);\n\n  return [scrollLeft, scrollRight];\n}\n\n// Used to animate scrolling. Returns a single setScrollTarger function, when called with e.g. 200,\n// the element pointer to by the ref will be scrolled 200px forwards over time.\nfunction useSmoothScroll(\n  ref: React.MutableRefObject<HTMLElement | undefined>,\n  speed: number,\n  minDistance: number,\n) {\n  const [scrollTarget, setScrollTarget] = React.useState<number>(0);\n\n  React.useLayoutEffect(() => {\n    if (scrollTarget === 0) {\n      return;\n    }\n\n    const startTime = performance.now();\n    const id = requestAnimationFrame(frameTime => {\n      if (!ref.current) {\n        return;\n      }\n      const frameDuration = frameTime - startTime;\n      const scrollDistance = (Math.abs(scrollTarget) * frameDuration) / speed;\n      const cappedScrollDistance = Math.max(minDistance, scrollDistance);\n      const scrollAmount = cappedScrollDistance * Math.sign(scrollTarget);\n\n      ref.current.scrollBy({ left: scrollAmount });\n\n      const newScrollTarget = scrollTarget - scrollAmount;\n      if (Math.sign(scrollTarget) !== Math.sign(newScrollTarget)) {\n        setScrollTarget(0);\n      } else {\n        setScrollTarget(newScrollTarget);\n      }\n    });\n\n    // TODO(freben): Remove this eslint exception later\n    // It's here because @types/react-router-dom v5 pulls in @types/react that have the wrong signature\n    // eslint-disable-next-line consistent-return\n    return () => cancelAnimationFrame(id);\n  }, [ref, scrollTarget, speed, minDistance]);\n\n  return setScrollTarget;\n}\n\nexport const HorizontalScrollGrid = (props: PropsWithChildren<Props>) => {\n  const {\n    scrollStep = 100,\n    scrollSpeed = 50,\n    minScrollDistance = 5,\n    children,\n    ...otherProps\n  } = props;\n  const classes = useStyles(props);\n  const ref = React.useRef<HTMLElement>();\n\n  const [scrollLeft, scrollRight] = useScrollDistance(ref);\n  const setScrollTarget = useSmoothScroll(ref, scrollSpeed, minScrollDistance);\n\n  const handleScrollClick = (forwards: boolean) => {\n    const el = ref.current;\n    if (!el) {\n      return;\n    }\n    setScrollTarget(forwards ? scrollStep : -scrollStep);\n  };\n\n  return (\n    <div {...otherProps} className={classes.root}>\n      <Grid\n        container\n        direction=\"row\"\n        wrap=\"nowrap\"\n        className={classes.container}\n        ref={ref as any}\n      >\n        {children}\n      </Grid>\n      <div\n        className={classNames(classes.fade, classes.fadeLeft, {\n          [classes.fadeHidden]: scrollLeft === 0,\n        })}\n      />\n      <div\n        className={classNames(classes.fade, classes.fadeRight, {\n          [classes.fadeHidden]: scrollRight === 0,\n        })}\n      />\n      {scrollLeft > 0 && (\n        <IconButton\n          title=\"Scroll Left\"\n          onClick={() => handleScrollClick(false)}\n          className={classNames(classes.button, classes.buttonLeft, {})}\n        >\n          <ChevronLeftIcon />\n        </IconButton>\n      )}\n      {scrollRight > 0 && (\n        <IconButton\n          title=\"Scroll Right\"\n          onClick={() => handleScrollClick(true)}\n          className={classNames(classes.button, classes.buttonRight, {})}\n        >\n          <ChevronRightIcon />\n        </IconButton>\n      )}\n    </div>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport CSS from 'csstype';\nimport { makeStyles } from '@material-ui/core';\n\ntype Props = CSS.Properties & {\n  shorthand?: boolean;\n  alpha?: boolean;\n};\n\nconst useStyles = makeStyles({\n  alpha: {\n    color: '#ffffff',\n    fontFamily: 'serif',\n    fontWeight: 'normal',\n    fontStyle: 'italic',\n  },\n  beta: {\n    color: '#4d65cc',\n    fontFamily: 'serif',\n    fontWeight: 'normal',\n    fontStyle: 'italic',\n  },\n});\n\nexport const Lifecycle = (props: Props) => {\n  const classes = useStyles(props);\n  const { shorthand, alpha } = props;\n  return shorthand ? (\n    <span\n      className={classes[alpha ? 'alpha' : 'beta']}\n      style={{ fontSize: '120%' }}\n    >\n      {alpha ? <>&alpha;</> : <>&beta;</>}\n    </span>\n  ) : (\n    <span className={classes[alpha ? 'alpha' : 'beta']}>\n      {alpha ? 'Alpha' : 'Beta'}\n    </span>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles } from '@material-ui/core';\nimport ReactMarkdown from 'react-markdown';\nimport gfm from 'remark-gfm';\nimport React from 'react';\nimport { BackstageTheme } from '@backstage/theme';\nimport { CodeSnippet } from '../CodeSnippet';\n\nconst useStyles = makeStyles<BackstageTheme>(theme => ({\n  markdown: {\n    '& table': {\n      borderCollapse: 'collapse',\n      border: `1px solid ${theme.palette.border}`,\n    },\n    '& th, & td': {\n      border: `1px solid ${theme.palette.border}`,\n      padding: theme.spacing(1),\n    },\n    '& td': {\n      wordBreak: 'break-word',\n      overflow: 'hidden',\n      verticalAlign: 'middle',\n      lineHeight: '1',\n      margin: 0,\n      padding: theme.spacing(3, 2, 3, 2.5),\n      borderBottom: 0,\n    },\n    '& th': {\n      backgroundColor: theme.palette.background.paper,\n    },\n    '& tr': {\n      backgroundColor: theme.palette.background.paper,\n    },\n    '& tr:nth-child(odd)': {\n      backgroundColor: theme.palette.background.default,\n    },\n\n    '& a': {\n      color: theme.palette.link,\n    },\n    '& img': {\n      maxWidth: '100%',\n    },\n  },\n}));\n\ntype Props = {\n  content: string;\n  dialect?: 'gfm' | 'common-mark';\n};\n\nconst renderers = {\n  code: ({ language, value }: { language: string; value?: string }) => {\n    return <CodeSnippet language={language} text={value ?? ''} />;\n  },\n};\n\n/**\n * MarkdownContent\n * --\n * Renders markdown with the default dialect [gfm - GitHub flavored Markdown](https://github.github.com/gfm/) to backstage theme styled HTML.\n * If you just want to render to plain [CommonMark](https://commonmark.org/), set the dialect to `'common-mark'`\n */\nexport const MarkdownContent = ({ content, dialect = 'gfm' }: Props) => {\n  const classes = useStyles();\n  return (\n    <ReactMarkdown\n      plugins={dialect === 'gfm' ? [gfm] : []}\n      className={classes.markdown}\n      children={content}\n      renderers={renderers}\n    />\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  makeStyles,\n  Typography,\n  Theme,\n} from '@material-ui/core';\nimport React, { useState } from 'react';\nimport { PendingAuthRequest } from '@backstage/core-plugin-api';\n\nconst useItemStyles = makeStyles<Theme>(theme => ({\n  root: {\n    paddingLeft: theme.spacing(3),\n  },\n}));\n\ntype RowProps = {\n  request: PendingAuthRequest;\n  busy: boolean;\n  setBusy: (busy: boolean) => void;\n};\n\nconst LoginRequestListItem = ({ request, busy, setBusy }: RowProps) => {\n  const classes = useItemStyles();\n  const [error, setError] = useState<Error>();\n\n  const handleContinue = async () => {\n    setBusy(true);\n    try {\n      await request.trigger();\n    } catch (e) {\n      setError(e);\n    } finally {\n      setBusy(false);\n    }\n  };\n\n  const IconComponent = request.provider.icon;\n\n  return (\n    <ListItem\n      button\n      disabled={busy}\n      onClick={handleContinue}\n      classes={{ root: classes.root }}\n    >\n      <ListItemAvatar>\n        <IconComponent fontSize=\"large\" />\n      </ListItemAvatar>\n      <ListItemText\n        primary={request.provider.title}\n        secondary={\n          error && (\n            <Typography color=\"error\">\n              {error.message || 'An unspecified error occurred'}\n            </Typography>\n          )\n        }\n      />\n    </ListItem>\n  );\n};\n\nexport default LoginRequestListItem;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  List,\n  makeStyles,\n  Theme,\n  Button,\n} from '@material-ui/core';\nimport React, { useMemo, useState } from 'react';\nimport { useObservable } from 'react-use';\nimport LoginRequestListItem from './LoginRequestListItem';\nimport { useApi, oauthRequestApiRef } from '@backstage/core-plugin-api';\n\nconst useStyles = makeStyles<Theme>(theme => ({\n  dialog: {\n    paddingTop: theme.spacing(1),\n  },\n  title: {\n    minWidth: 0,\n  },\n  contentList: {\n    padding: 0,\n  },\n}));\n\nexport const OAuthRequestDialog = () => {\n  const classes = useStyles();\n  const [busy, setBusy] = useState(false);\n  const oauthRequestApi = useApi(oauthRequestApiRef);\n  const requests = useObservable(\n    useMemo(() => oauthRequestApi.authRequest$(), [oauthRequestApi]),\n    [],\n  );\n\n  const handleRejectAll = () => {\n    requests.forEach(request => request.reject());\n  };\n\n  return (\n    <Dialog\n      open={Boolean(requests.length)}\n      fullWidth\n      maxWidth=\"xs\"\n      classes={{ paper: classes.dialog }}\n    >\n      <DialogTitle classes={{ root: classes.title }}>\n        Login Required\n      </DialogTitle>\n\n      <DialogContent classes={{ root: classes.contentList }}>\n        <List>\n          {requests.map(request => (\n            <LoginRequestListItem\n              key={request.provider.title}\n              request={request}\n              busy={busy}\n              setBusy={setBusy}\n            />\n          ))}\n        </List>\n      </DialogContent>\n\n      <DialogActions>\n        <Button onClick={handleRejectAll}>Reject All</Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles, Tooltip, TooltipProps } from '@material-ui/core';\nimport React, { useState } from 'react';\nimport TextTruncate, { TextTruncateProps } from 'react-text-truncate';\n\ntype Props = {\n  text: TextTruncateProps['text'];\n  line?: TextTruncateProps['line'];\n  element?: TextTruncateProps['element'];\n  title?: TooltipProps['title'];\n  placement?: TooltipProps['placement'];\n};\n\nconst useStyles = makeStyles({\n  container: {\n    overflow: 'visible !important',\n  },\n});\n\nexport const OverflowTooltip = (props: Props) => {\n  const [hover, setHover] = useState(false);\n  const classes = useStyles();\n\n  const handleToggled = (truncated: boolean) => {\n    setHover(truncated);\n  };\n\n  return (\n    <Tooltip\n      title={props.title ?? (props.text || '')}\n      placement={props.placement}\n      disableHoverListener={!hover}\n    >\n      <TextTruncate\n        text={props.text}\n        line={props.line}\n        onToggled={handleToggled}\n        containerClassName={classes.container}\n      />\n    </Tooltip>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState, useEffect, PropsWithChildren } from 'react';\nimport { LinearProgress, LinearProgressProps } from '@material-ui/core';\n\nexport const Progress = (props: PropsWithChildren<LinearProgressProps>) => {\n  const [isVisible, setIsVisible] = useState(false);\n\n  useEffect(() => {\n    const handle = setTimeout(() => setIsVisible(true), 250);\n    return () => clearTimeout(handle);\n  }, []);\n\n  return isVisible ? (\n    <LinearProgress {...props} data-testid=\"progress\" />\n  ) : (\n    <div style={{ display: 'none' }} />\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ComponentClass, Component, ErrorInfo } from 'react';\nimport { Button } from '../../components/Button';\nimport { ErrorPanel } from '../../components/ErrorPanel';\n\ntype SlackChannel = {\n  name: string;\n  href?: string;\n};\n\nexport type ErrorBoundaryProps = {\n  slackChannel?: string | SlackChannel;\n  onError?: (error: Error, errorInfo: string) => null;\n};\n\ntype State = {\n  error?: Error;\n  errorInfo?: ErrorInfo;\n};\n\nconst SlackLink = (props: { slackChannel?: string | SlackChannel }) => {\n  const { slackChannel } = props;\n\n  if (!slackChannel) {\n    return null;\n  } else if (typeof slackChannel === 'string') {\n    return <>Please contact {slackChannel} for help.</>;\n  } else if (!slackChannel.href) {\n    return <>Please contact {slackChannel.name} for help.</>;\n  }\n\n  return (\n    <Button to={slackChannel.href} variant=\"contained\">\n      {slackChannel.name}\n    </Button>\n  );\n};\n\nexport const ErrorBoundary: ComponentClass<\n  ErrorBoundaryProps,\n  State\n> = class ErrorBoundary extends Component<ErrorBoundaryProps, State> {\n  constructor(props: ErrorBoundaryProps) {\n    super(props);\n    this.state = {\n      error: undefined,\n      errorInfo: undefined,\n    };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    // eslint-disable-next-line no-console\n    console.error(`ErrorBoundary, error: ${error}, info: ${errorInfo}`);\n    this.setState({ error, errorInfo });\n  }\n\n  render() {\n    const { slackChannel, children } = this.props;\n    const { error } = this.state;\n\n    if (!error) {\n      return children;\n    }\n\n    return (\n      <ErrorPanel title=\"Something Went Wrong\" error={error}>\n        <SlackLink slackChannel={slackChannel} />\n      </ErrorPanel>\n    );\n  }\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Divider, Typography, makeStyles } from '@material-ui/core';\nimport ArrowIcon from '@material-ui/icons/ArrowForward';\nimport { BackstageTheme } from '@backstage/theme';\nimport Box from '@material-ui/core/Box';\nimport { Link } from '../../components/Link';\n\nconst useStyles = makeStyles<BackstageTheme>(theme => ({\n  root: {\n    maxWidth: 'fit-content',\n    padding: theme.spacing(2, 2, 2, 2.5),\n  },\n  boxTitle: {\n    margin: 0,\n    color: theme.palette.textSubtle,\n  },\n  arrow: {\n    color: theme.palette.textSubtle,\n  },\n}));\n\nexport type BottomLinkProps = {\n  link: string;\n  title: string;\n  onClick?: (event: React.MouseEvent<HTMLAnchorElement>) => void;\n};\n\nexport const BottomLink = ({ link, title, onClick }: BottomLinkProps) => {\n  const classes = useStyles();\n\n  return (\n    <div>\n      <Divider />\n      <Link to={link} onClick={onClick} underline=\"none\">\n        <Box display=\"flex\" alignItems=\"center\" className={classes.root}>\n          <Typography>\n            <Box className={classes.boxTitle} fontWeight=\"fontWeightBold\" m={1}>\n              {title}\n            </Box>\n          </Typography>\n          <ArrowIcon className={classes.arrow} />\n        </Box>\n      </Link>\n    </div>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ReactNode } from 'react';\nimport {\n  Card,\n  CardActions,\n  CardContent,\n  CardHeader,\n  CardHeaderProps,\n  Divider,\n  withStyles,\n  makeStyles,\n} from '@material-ui/core';\nimport classNames from 'classnames';\nimport { ErrorBoundary, ErrorBoundaryProps } from '../ErrorBoundary';\nimport { BottomLink, BottomLinkProps } from '../BottomLink';\n\nconst useStyles = makeStyles(theme => ({\n  noPadding: {\n    padding: 0,\n    '&:last-child': {\n      paddingBottom: 0,\n    },\n  },\n  header: {\n    padding: theme.spacing(2, 2, 2, 2.5),\n  },\n  headerTitle: {\n    fontWeight: 700,\n  },\n  headerSubheader: {\n    paddingTop: theme.spacing(1),\n  },\n  headerAvatar: {},\n  headerAction: {},\n  headerContent: {},\n}));\n\nconst CardActionsTopRight = withStyles(theme => ({\n  root: {\n    display: 'inline-block',\n    padding: theme.spacing(8, 8, 0, 0),\n    float: 'right',\n  },\n}))(CardActions);\n\nconst VARIANT_STYLES = {\n  card: {\n    flex: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    fullHeight: {\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%',\n    },\n    gridItem: {\n      display: 'flex',\n      flexDirection: 'column',\n      height: 'calc(100% - 10px)', // for pages without content header\n      marginBottom: '10px',\n    },\n  },\n  cardContent: {\n    fullHeight: {\n      flex: 1,\n    },\n    gridItem: {\n      flex: 1,\n    },\n  },\n};\n\nexport type InfoCardVariants = 'flex' | 'fullHeight' | 'gridItem';\n\n/**\n * InfoCard is used to display a paper-styled block on the screen, similar to a panel.\n *\n * You can custom style an InfoCard with the 'className' (outer container) and 'cardClassName' (inner container)\n * props. This is typically used with the material-ui makeStyles mechanism.\n *\n * The InfoCard serves as an error boundary. As a result, if you provide an 'errorBoundaryProps' property this\n * specifies the extra information to display in the error component that is displayed if an error occurs\n * in any descendent components.\n *\n * By default the InfoCard has no custom layout of its children, but is treated as a block element. A\n * couple common variants are provided and can be specified via the variant property:\n *\n * When the InfoCard is displayed as a grid item within a grid, you may want items to have the same height for all items.\n * Set to the 'gridItem' variant to display the InfoCard with full height suitable for Grid:\n *\n *   <InfoCard variant=\"gridItem\">...</InfoCard>\n */\ntype Props = {\n  title?: ReactNode;\n  subheader?: ReactNode;\n  divider?: boolean;\n  deepLink?: BottomLinkProps;\n  /** @deprecated Use errorBoundaryProps instead */\n  slackChannel?: string;\n  errorBoundaryProps?: ErrorBoundaryProps;\n  variant?: InfoCardVariants;\n  children?: ReactNode;\n  headerStyle?: object;\n  headerProps?: CardHeaderProps;\n  action?: ReactNode;\n  actionsClassName?: string;\n  actions?: ReactNode;\n  cardClassName?: string;\n  actionsTopRight?: ReactNode;\n  className?: string;\n  noPadding?: boolean;\n  titleTypographyProps?: object;\n};\n\nexport const InfoCard = ({\n  title,\n  subheader,\n  divider = true,\n  deepLink,\n  slackChannel,\n  errorBoundaryProps,\n  variant,\n  children,\n  headerStyle,\n  headerProps,\n  action,\n  actionsClassName,\n  actions,\n  cardClassName,\n  actionsTopRight,\n  className,\n  noPadding,\n  titleTypographyProps,\n}: Props): JSX.Element => {\n  const classes = useStyles();\n  /**\n   * If variant is specified, we build up styles for that particular variant for both\n   * the Card and the CardContent (since these need to be synced)\n   */\n  let calculatedStyle = {};\n  let calculatedCardStyle = {};\n  if (variant) {\n    const variants = variant.split(/[\\s]+/g);\n    variants.forEach(name => {\n      calculatedStyle = {\n        ...calculatedStyle,\n        ...VARIANT_STYLES.card[name as keyof typeof VARIANT_STYLES['card']],\n      };\n      calculatedCardStyle = {\n        ...calculatedCardStyle,\n        ...VARIANT_STYLES.cardContent[\n          name as keyof typeof VARIANT_STYLES['cardContent']\n        ],\n      };\n    });\n  }\n\n  const errProps: ErrorBoundaryProps =\n    errorBoundaryProps || (slackChannel ? { slackChannel } : {});\n\n  return (\n    <Card style={calculatedStyle} className={className}>\n      <ErrorBoundary {...errProps}>\n        {title && (\n          <CardHeader\n            classes={{\n              root: classes.header,\n              title: classes.headerTitle,\n              subheader: classes.headerSubheader,\n              avatar: classes.headerAvatar,\n              action: classes.headerAction,\n              content: classes.headerContent,\n            }}\n            title={title}\n            subheader={subheader}\n            action={action}\n            style={{ ...headerStyle }}\n            titleTypographyProps={titleTypographyProps}\n            {...headerProps}\n          />\n        )}\n        {actionsTopRight && (\n          <CardActionsTopRight>{actionsTopRight}</CardActionsTopRight>\n        )}\n        {divider && <Divider />}\n        <CardContent\n          className={classNames(cardClassName, {\n            [classes.noPadding]: noPadding,\n          })}\n          style={calculatedCardStyle}\n        >\n          {children}\n        </CardContent>\n        {actions && (\n          <CardActions className={actionsClassName}>{actions}</CardActions>\n        )}\n        {deepLink && <BottomLink {...deepLink} />}\n      </ErrorBoundary>\n    </Card>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles, useTheme } from '@material-ui/core';\nimport { BackstageTheme } from '@backstage/theme';\nimport { Circle } from 'rc-progress';\nimport React from 'react';\n\nconst useStyles = makeStyles<BackstageTheme>(theme => ({\n  root: {\n    position: 'relative',\n    lineHeight: 0,\n  },\n  overlay: {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -60%)',\n    fontSize: 45,\n    fontWeight: 'bold',\n    color: theme.palette.textContrast,\n  },\n  circle: {\n    width: '80%',\n    transform: 'translate(10%, 0)',\n  },\n  colorUnknown: {},\n}));\n\ntype Props = {\n  value: number;\n  fractional?: boolean;\n  inverse?: boolean;\n  unit?: string;\n  max?: number;\n};\n\nconst defaultProps = {\n  fractional: true,\n  inverse: false,\n  unit: '%',\n  max: 100,\n};\n\nexport function getProgressColor(\n  palette: BackstageTheme['palette'],\n  value: number,\n  inverse?: boolean,\n  max?: number,\n) {\n  if (isNaN(value)) {\n    return '#ddd';\n  }\n\n  const actualMax = max ? max : defaultProps.max;\n  const actualValue = inverse ? actualMax - value : value;\n\n  if (actualValue < actualMax / 3) {\n    return palette.status.error;\n  } else if (actualValue < actualMax * (2 / 3)) {\n    return palette.status.warning;\n  }\n\n  return palette.status.ok;\n}\n\nexport const Gauge = (props: Props) => {\n  const classes = useStyles(props);\n  const theme = useTheme<BackstageTheme>();\n  const { value, fractional, inverse, unit, max } = {\n    ...defaultProps,\n    ...props,\n  };\n\n  const asPercentage = fractional ? Math.round(value * max) : value;\n  const asActual = max !== 100 ? Math.round(value) : asPercentage;\n\n  return (\n    <div className={classes.root}>\n      <Circle\n        strokeLinecap=\"butt\"\n        percent={asPercentage}\n        strokeWidth={12}\n        trailWidth={12}\n        strokeColor={getProgressColor(theme.palette, asActual, inverse, max)}\n        className={classes.circle}\n      />\n      <div className={classes.overlay}>\n        {isNaN(value) ? 'N/A' : `${asActual}${unit}`}\n      </div>\n    </div>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core';\nimport { InfoCard, InfoCardVariants } from '../../layout/InfoCard';\nimport { BottomLinkProps } from '../../layout/BottomLink';\nimport { Gauge } from './Gauge';\n\ntype Props = {\n  title: string;\n  subheader?: string;\n  variant?: InfoCardVariants;\n  /** Progress in % specified as decimal, e.g. \"0.23\" */\n  progress: number;\n  inverse?: boolean;\n  deepLink?: BottomLinkProps;\n};\n\nconst useStyles = makeStyles({\n  root: {\n    height: '100%',\n    width: 250,\n  },\n});\n\nexport const GaugeCard = (props: Props) => {\n  const classes = useStyles(props);\n  const { title, subheader, progress, inverse, deepLink, variant } = props;\n\n  return (\n    <div className={classes.root}>\n      <InfoCard\n        title={title}\n        subheader={subheader}\n        deepLink={deepLink}\n        variant={variant}\n      >\n        <Gauge value={progress} inverse={inverse} />\n      </InfoCard>\n    </div>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Tooltip, useTheme } from '@material-ui/core';\n// @ts-ignore\nimport { Line } from 'rc-progress';\nimport { BackstageTheme } from '@backstage/theme';\nimport { getProgressColor } from './Gauge';\n\ntype Props = {\n  /**\n   * Progress value between 0.0 - 1.0.\n   */\n  value: number;\n};\n\nexport const LinearGauge = ({ value }: Props) => {\n  const theme = useTheme<BackstageTheme>();\n  if (isNaN(value)) {\n    return null;\n  }\n  let percent = Math.round(value * 100 * 100) / 100;\n  if (percent > 100) {\n    percent = 100;\n  }\n  const strokeColor = getProgressColor(theme.palette, percent, false, 100);\n  return (\n    <Tooltip title={`${percent}%`}>\n      <span>\n        <Line\n          percent={percent}\n          strokeWidth={4}\n          trailWidth={4}\n          strokeColor={strokeColor}\n        />\n      </span>\n    </Tooltip>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { SvgIcon, makeStyles, createStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles(() =>\n  createStyles({\n    icon: {\n      position: 'absolute',\n      right: '4px',\n      pointerEvents: 'none',\n    },\n  }),\n);\n\nconst ClosedDropdown = () => {\n  const classes = useStyles();\n  return (\n    <SvgIcon\n      className={classes.icon}\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z\"\n        fill=\"#616161\"\n      />\n    </SvgIcon>\n  );\n};\n\nexport default ClosedDropdown;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { SvgIcon, makeStyles, createStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles(() =>\n  createStyles({\n    icon: {\n      position: 'absolute',\n      right: '4px',\n      pointerEvents: 'none',\n    },\n  }),\n);\n\nconst OpenedDropdown = () => {\n  const classes = useStyles();\n  return (\n    <SvgIcon\n      className={classes.icon}\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z\"\n        fill=\"#616161\"\n      />\n    </SvgIcon>\n  );\n};\n\nexport default OpenedDropdown;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Checkbox,\n  Chip,\n  ClickAwayListener,\n  FormControl,\n  InputBase,\n  MenuItem,\n  Select,\n  Typography,\n} from '@material-ui/core';\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  withStyles,\n} from '@material-ui/core/styles';\nimport React, { useEffect, useState } from 'react';\nimport ClosedDropdown from './static/ClosedDropdown';\nimport OpenedDropdown from './static/OpenedDropdown';\n\nconst BootstrapInput = withStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      'label + &': {\n        marginTop: theme.spacing(3),\n      },\n    },\n    input: {\n      borderRadius: 4,\n      position: 'relative',\n      backgroundColor: theme.palette.background.paper,\n      border: '1px solid #ced4da',\n      fontSize: 16,\n      padding: '10px 26px 10px 12px',\n      transition: theme.transitions.create(['border-color', 'box-shadow']),\n      fontFamily: 'Helvetica Neue',\n      '&:focus': {\n        background: theme.palette.background.paper,\n        borderRadius: 4,\n      },\n    },\n  }),\n)(InputBase);\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    formControl: {\n      margin: `${theme.spacing(1)} 0px`,\n      maxWidth: 300,\n    },\n    label: {\n      transform: 'initial',\n      fontWeight: 'bold',\n      fontSize: 14,\n      fontFamily: theme.typography.fontFamily,\n      color: theme.palette.text.primary,\n      '&.Mui-focused': {\n        color: theme.palette.text.primary,\n      },\n    },\n    chips: {\n      display: 'flex',\n      flexWrap: 'wrap',\n    },\n    chip: {\n      margin: 2,\n    },\n    checkbox: {},\n    root: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n  }),\n);\n\ntype Item = {\n  label: string;\n  value: string | number;\n};\n\ntype Selection = string | string[] | number | number[];\n\nexport type SelectProps = {\n  multiple?: boolean;\n  items: Item[];\n  label: string;\n  placeholder?: string;\n  selected?: Selection;\n  onChange: (arg: Selection) => void;\n  triggerReset?: boolean;\n};\n\nexport const SelectComponent = ({\n  multiple,\n  items,\n  label,\n  placeholder,\n  selected,\n  onChange,\n  triggerReset,\n}: SelectProps) => {\n  const classes = useStyles();\n  const [value, setValue] = useState<Selection>(\n    selected || (multiple ? [] : ''),\n  );\n  const [isOpen, setOpen] = useState(false);\n\n  useEffect(() => {\n    setValue(multiple ? [] : '');\n  }, [triggerReset, multiple]);\n\n  useEffect(() => {\n    if (selected !== undefined) {\n      setValue(selected);\n    }\n  }, [selected]);\n\n  const handleChange = (event: React.ChangeEvent<{ value: unknown }>) => {\n    setValue(event.target.value as Selection);\n    onChange(event.target.value as Selection);\n  };\n\n  const handleClick = (event: React.ChangeEvent<any>) => {\n    setOpen(previous => {\n      if (multiple && !(event.target instanceof HTMLElement)) {\n        return true;\n      }\n      return !previous;\n    });\n  };\n\n  const handleClickAway = () => {\n    setOpen(false);\n  };\n\n  const handleDelete = (selectedValue: string | number) => () => {\n    const newValue = (value as any[]).filter(chip => chip !== selectedValue);\n    setValue(newValue);\n    onChange(newValue);\n  };\n\n  return (\n    <div className={classes.root}>\n      <Typography variant=\"button\">{label}</Typography>\n      <ClickAwayListener onClickAway={handleClickAway}>\n        <FormControl className={classes.formControl}>\n          <Select\n            value={value}\n            data-testid=\"select\"\n            displayEmpty\n            multiple={multiple}\n            onChange={handleChange}\n            onClick={handleClick}\n            open={isOpen}\n            input={<BootstrapInput />}\n            renderValue={s =>\n              multiple && (value as any[]).length !== 0 ? (\n                <div className={classes.chips}>\n                  {(s as string[]).map(selectedValue => (\n                    <Chip\n                      key={items.find(el => el.value === selectedValue)?.value}\n                      label={\n                        items.find(el => el.value === selectedValue)?.label\n                      }\n                      clickable\n                      onDelete={handleDelete(selectedValue)}\n                      className={classes.chip}\n                    />\n                  ))}\n                </div>\n              ) : (\n                <Typography>\n                  {(value as any[]).length === 0\n                    ? placeholder || ''\n                    : items.find(el => el.value === s)?.label}\n                </Typography>\n              )\n            }\n            IconComponent={() =>\n              !isOpen ? <ClosedDropdown /> : <OpenedDropdown />\n            }\n            MenuProps={{\n              anchorOrigin: {\n                vertical: 'bottom',\n                horizontal: 'left',\n              },\n              transformOrigin: {\n                vertical: 'top',\n                horizontal: 'left',\n              },\n              getContentAnchorEl: null,\n            }}\n          >\n            {placeholder && !multiple && (\n              <MenuItem value={[]}>{placeholder}</MenuItem>\n            )}\n            {items &&\n              items.map(item => (\n                <MenuItem key={item.value} value={item.value}>\n                  {multiple && (\n                    <Checkbox\n                      color=\"primary\"\n                      checked={(value as any[]).includes(item.value) || false}\n                      className={classes.checkbox}\n                    />\n                  )}\n                  {item.label}\n                </MenuItem>\n              ))}\n          </Select>\n        </FormControl>\n      </ClickAwayListener>\n    </div>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, {\n  Children,\n  isValidElement,\n  useState,\n  useEffect,\n  PropsWithChildren,\n} from 'react';\nimport { Stepper as MuiStepper } from '@material-ui/core';\n\ntype InternalState = {\n  stepperLength: number;\n  stepIndex: number;\n  setStepIndex: any;\n  stepHistory: number[];\n  setStepHistory: any;\n  onStepChange?: (prevIndex: number, nextIndex: number) => void;\n};\n\nconst noop = () => {};\nexport const VerticalStepperContext = React.createContext<InternalState>({\n  stepperLength: 0,\n  stepIndex: 0,\n  setStepIndex: noop,\n  stepHistory: [],\n  setStepHistory: noop,\n  onStepChange: noop,\n});\n\nexport interface StepperProps {\n  elevated?: boolean;\n  onStepChange?: (prevIndex: number, nextIndex: number) => void;\n  activeStep?: number;\n}\n\nexport const SimpleStepper = ({\n  children,\n  elevated,\n  onStepChange,\n  activeStep = 0,\n}: PropsWithChildren<StepperProps>) => {\n  const [stepIndex, setStepIndex] = useState<number>(activeStep);\n  const [stepHistory, setStepHistory] = useState<number[]>([0]);\n\n  useEffect(() => {\n    setStepIndex(activeStep);\n  }, [activeStep]);\n\n  const steps: React.ReactNode[] = [];\n  let endStep;\n  Children.forEach(children, child => {\n    if (isValidElement(child)) {\n      if (child.props.end) {\n        endStep = child;\n      } else {\n        steps.push(child);\n      }\n    }\n  });\n\n  return (\n    <>\n      <VerticalStepperContext.Provider\n        value={{\n          stepIndex,\n          setStepIndex,\n          stepHistory,\n          setStepHistory,\n          onStepChange,\n          stepperLength: Children.count(children),\n        }}\n      >\n        <MuiStepper\n          activeStep={stepIndex}\n          orientation=\"vertical\"\n          elevation={elevated ? 2 : 0}\n        >\n          {steps}\n        </MuiStepper>\n      </VerticalStepperContext.Provider>\n      {stepIndex >= Children.count(children) - 1 && endStep}\n    </>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useContext, ReactNode, PropsWithChildren } from 'react';\nimport { Button, makeStyles } from '@material-ui/core';\nimport { StepActions } from './types';\nimport { VerticalStepperContext } from './SimpleStepper';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    marginTop: theme.spacing(3),\n    '& button': {\n      marginRight: theme.spacing(1),\n    },\n  },\n}));\n\ninterface CommonBtnProps {\n  text?: string;\n  handleClick?: () => void;\n  stepIndex: number;\n}\ninterface RestartBtnProps extends CommonBtnProps {}\n\ninterface NextBtnProps extends CommonBtnProps {\n  disabled?: boolean;\n  last?: boolean;\n  stepIndex: number;\n}\ninterface BackBtnProps extends CommonBtnProps {\n  disabled?: boolean;\n  stepIndex: number;\n}\nexport const RestartBtn = ({ text, handleClick }: RestartBtnProps) => (\n  <Button onClick={handleClick}>{text || 'Reset'}</Button>\n);\n\nconst NextBtn = ({\n  text,\n  handleClick,\n  disabled,\n  last,\n  stepIndex,\n}: NextBtnProps) => (\n  <Button\n    variant=\"contained\"\n    color=\"primary\"\n    disabled={disabled}\n    data-testid={`nextButton-${stepIndex}`}\n    onClick={handleClick}\n  >\n    {text || (last ? 'Finish' : 'Next')}\n  </Button>\n);\n\nconst BackBtn = ({ text, handleClick, disabled, stepIndex }: BackBtnProps) => (\n  <Button\n    onClick={handleClick}\n    data-testid={`backButton-${stepIndex}`}\n    disabled={disabled}\n  >\n    {text || 'Back'}\n  </Button>\n);\n\nexport type SimpleStepperFooterProps = {\n  actions?: StepActions;\n  children?: ReactNode;\n};\n\nexport const SimpleStepperFooter = ({\n  actions = {},\n  children,\n}: PropsWithChildren<SimpleStepperFooterProps>) => {\n  const classes = useStyles();\n  const {\n    stepperLength,\n    stepIndex,\n    setStepIndex,\n    stepHistory,\n    setStepHistory,\n    onStepChange,\n  } = useContext(VerticalStepperContext);\n\n  const onChange = (newIndex: number, callback?: () => void) => {\n    if (callback) {\n      callback();\n    }\n    if (onStepChange) {\n      onStepChange(stepIndex, newIndex);\n    }\n\n    setStepIndex(newIndex);\n  };\n\n  const handleNext = () => {\n    const newIndex = actions.nextStep\n      ? actions.nextStep(stepIndex, stepperLength - 1)\n      : stepIndex + 1;\n    onChange(newIndex, actions.onNext);\n    setStepHistory([...stepHistory, newIndex]);\n  };\n  const handleBack = () => {\n    stepHistory.pop();\n    onChange(stepHistory[stepHistory.length - 1], actions.onBack);\n    setStepHistory([...stepHistory]);\n  };\n  const handleRestart = () => {\n    onChange(0, actions.onRestart);\n    setStepHistory([0]);\n  };\n\n  return (\n    <div className={classes.root}>\n      {[undefined, true].includes(actions.showBack) && stepIndex !== 0 && (\n        <BackBtn\n          text={actions.backText}\n          handleClick={handleBack}\n          disabled={stepIndex === 0}\n          stepIndex={stepIndex}\n        />\n      )}\n      {[undefined, true].includes(actions.showNext) && (\n        <NextBtn\n          text={actions.nextText}\n          handleClick={handleNext}\n          disabled={\n            (!!stepperLength && stepIndex >= stepperLength) ||\n            (!!actions.canNext && !actions.canNext())\n          }\n          stepIndex={stepIndex}\n        />\n      )}\n      {actions.showRestart && stepIndex !== 0 && (\n        <RestartBtn\n          text={actions.restartText}\n          handleClick={handleRestart}\n          stepIndex={stepIndex}\n        />\n      )}\n      {children}\n    </div>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { PropsWithChildren } from 'react';\nimport {\n  Step as MuiStep,\n  StepContent,\n  StepLabel,\n  Typography,\n  makeStyles,\n} from '@material-ui/core';\nimport { SimpleStepperFooter } from './SimpleStepperFooter';\nimport { StepProps } from './types';\n\nconst useStyles = makeStyles(theme => ({\n  end: {\n    padding: theme.spacing(3),\n  },\n}));\n\nexport const SimpleStepperStep = ({\n  title,\n  children,\n  end,\n  actions,\n  ...muiProps\n}: PropsWithChildren<StepProps>) => {\n  const classes = useStyles();\n\n  // The end step is not a part of the stepper\n  // It simply is the final screen with an option to have buttons such as reset or back\n  return end ? (\n    <div className={classes.end}>\n      <Typography variant=\"h6\">{title}</Typography>\n      {children}\n      <SimpleStepperFooter actions={{ ...(actions || {}), showNext: false }} />\n    </div>\n  ) : (\n    <MuiStep {...muiProps}>\n      <StepLabel>\n        <Typography variant=\"h6\">{title}</Typography>\n      </StepLabel>\n      <StepContent>\n        {children}\n        <SimpleStepperFooter actions={actions} />\n      </StepContent>\n    </MuiStep>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles } from '@material-ui/core';\nimport { BackstageTheme } from '@backstage/theme';\nimport classNames from 'classnames';\nimport React, { PropsWithChildren } from 'react';\n\nconst useStyles = makeStyles<BackstageTheme>(theme => ({\n  status: {\n    fontWeight: 500,\n    '&::before': {\n      width: '0.7em',\n      height: '0.7em',\n      display: 'inline-block',\n      marginRight: 8,\n      borderRadius: '50%',\n      content: '\"\"',\n    },\n  },\n  ok: {\n    '&::before': {\n      backgroundColor: theme.palette.status.ok,\n    },\n  },\n  warning: {\n    '&::before': {\n      backgroundColor: theme.palette.status.warning,\n    },\n  },\n  error: {\n    '&::before': {\n      backgroundColor: theme.palette.status.error,\n    },\n  },\n  pending: {\n    '&::before': {\n      backgroundColor: theme.palette.status.pending,\n    },\n  },\n  running: {\n    '&::before': {\n      backgroundColor: theme.palette.status.running,\n    },\n  },\n  aborted: {\n    '&::before': {\n      backgroundColor: theme.palette.status.aborted,\n    },\n  },\n}));\n\nexport const StatusOK = (props: PropsWithChildren<{}>) => {\n  const classes = useStyles(props);\n  return (\n    <span\n      className={classNames(classes.status, classes.ok)}\n      aria-label=\"Status ok\"\n      aria-hidden=\"true\"\n      {...props}\n    />\n  );\n};\n\nexport const StatusWarning = (props: PropsWithChildren<{}>) => {\n  const classes = useStyles(props);\n  return (\n    <span\n      className={classNames(classes.status, classes.warning)}\n      aria-label=\"Status warning\"\n      aria-hidden=\"true\"\n      {...props}\n    />\n  );\n};\n\nexport const StatusError = (props: PropsWithChildren<{}>) => {\n  const classes = useStyles(props);\n  return (\n    <span\n      className={classNames(classes.status, classes.error)}\n      aria-label=\"Status error\"\n      aria-hidden=\"true\"\n      {...props}\n    />\n  );\n};\n\nexport const StatusPending = (props: PropsWithChildren<{}>) => {\n  const classes = useStyles(props);\n  return (\n    <span\n      className={classNames(classes.status, classes.pending)}\n      aria-label=\"Status pending\"\n      aria-hidden=\"true\"\n      {...props}\n    />\n  );\n};\n\nexport const StatusRunning = (props: PropsWithChildren<{}>) => {\n  const classes = useStyles(props);\n  return (\n    <span\n      className={classNames(classes.status, classes.running)}\n      aria-label=\"Status running\"\n      aria-hidden=\"true\"\n      {...props}\n    />\n  );\n};\n\nexport const StatusAborted = (props: PropsWithChildren<{}>) => {\n  const classes = useStyles(props);\n  return (\n    <span\n      className={classNames(classes.status, classes.aborted)}\n      aria-label=\"Status aborted\"\n      aria-hidden=\"true\"\n      {...props}\n    />\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableRow,\n  withStyles,\n  createStyles,\n  WithStyles,\n  Theme,\n} from '@material-ui/core';\n\nconst tableTitleCellStyles = (theme: Theme) =>\n  createStyles({\n    root: {\n      fontWeight: 'bolder',\n      whiteSpace: 'nowrap',\n      paddingRight: theme.spacing(4),\n      border: '0',\n      verticalAlign: 'top',\n    },\n  });\n\nconst tableContentCellStyles = {\n  root: {\n    border: '0',\n    verticalAlign: 'top',\n  },\n};\n\nconst listStyles = (theme: Theme) =>\n  createStyles({\n    root: {\n      listStyle: 'none',\n      margin: theme.spacing(0, 0, -1, 0),\n      padding: '0',\n    },\n  });\n\nconst listItemStyles = (theme: Theme) =>\n  createStyles({\n    root: {\n      padding: theme.spacing(0, 0, 1, 0),\n    },\n    random: {},\n  });\n\nconst TitleCell = withStyles(tableTitleCellStyles)(TableCell);\nconst ContentCell = withStyles(tableContentCellStyles)(TableCell);\n\nexport const MetadataTable = ({\n  dense,\n  children,\n}: {\n  dense?: boolean;\n  children: React.ReactNode;\n}) => (\n  <Table size={dense ? 'small' : 'medium'}>\n    <TableBody>{children}</TableBody>\n  </Table>\n);\n\nexport const MetadataTableItem = ({\n  title,\n  children,\n  ...rest\n}: {\n  title: string;\n  children: React.ReactNode;\n}) => (\n  <TableRow>\n    {title && <TitleCell>{title}</TitleCell>}\n    <ContentCell colSpan={title ? 1 : 2} {...rest}>\n      {children}\n    </ContentCell>\n  </TableRow>\n);\n\ninterface StyleProps extends WithStyles {\n  children?: React.ReactNode;\n}\n\nexport const MetadataList = withStyles(listStyles)(\n  ({ classes, children }: StyleProps) => (\n    <ul className={classes.root}>{children}</ul>\n  ),\n);\n\nexport const MetadataListItem = withStyles(listItemStyles)(\n  ({ classes, children }: StyleProps) => (\n    <li className={classes.root}>{children}</li>\n  ),\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { Fragment, ReactElement } from 'react';\nimport { withStyles, createStyles, WithStyles, Theme } from '@material-ui/core';\nimport startCase from 'lodash/startCase';\n\nimport {\n  MetadataTable,\n  MetadataTableItem,\n  MetadataList,\n  MetadataListItem,\n} from './MetadataTable';\n\nconst listStyle = createStyles({\n  root: {\n    margin: '0 0',\n    listStyleType: 'none',\n  },\n});\n\nconst nestedListStyle = (theme: Theme) =>\n  createStyles({\n    root: {\n      ...listStyle.root,\n      paddingLeft: theme.spacing(1),\n    },\n  });\n\ninterface StyleProps extends WithStyles {\n  children?: React.ReactNode;\n}\n// Sub Components\nconst StyledList = withStyles(listStyle)(\n  ({ classes, children }: StyleProps) => (\n    <MetadataList classes={classes}>{children}</MetadataList>\n  ),\n);\nconst StyledNestedList = withStyles(nestedListStyle)(\n  ({ classes, children }: StyleProps) => (\n    <MetadataList classes={classes}>{children}</MetadataList>\n  ),\n);\n\nfunction renderList(list: Array<any>, nested?: boolean) {\n  const values = list.map((item: any, index: number) => (\n    <MetadataListItem key={index}>{toValue(item)}</MetadataListItem>\n  ));\n  return nested ? (\n    <StyledNestedList>{values}</StyledNestedList>\n  ) : (\n    <StyledList>{values}</StyledList>\n  );\n}\n\nfunction renderMap(\n  map: { [key: string]: any },\n  nested?: boolean,\n  options?: any,\n) {\n  const values = Object.keys(map).map(key => {\n    const value = toValue(map[key], true);\n    const fmtKey =\n      options && options.titleFormat\n        ? options.titleFormat(key)\n        : startCase(key);\n    return (\n      <MetadataListItem key={key}>\n        {`${fmtKey}: `}\n        {value}\n      </MetadataListItem>\n    );\n  });\n\n  return nested ? (\n    <StyledNestedList>{values}</StyledNestedList>\n  ) : (\n    <StyledList>{values}</StyledList>\n  );\n}\n\nfunction toValue(\n  value: ReactElement | object | Array<any> | boolean,\n  options?: any,\n  nested?: boolean,\n) {\n  if (React.isValidElement(value)) {\n    return <Fragment>{value}</Fragment>;\n  }\n\n  if (typeof value === 'object' && !Array.isArray(value)) {\n    return renderMap(value, options, nested);\n  }\n\n  if (Array.isArray(value)) {\n    return renderList(value, nested);\n  }\n\n  if (typeof value === 'boolean') {\n    return <Fragment>{value ? '' : ''}</Fragment>;\n  }\n\n  return <Fragment>{value}</Fragment>;\n}\nconst ItemValue = ({ value, options }: { value: any; options: any }) => (\n  <Fragment>{toValue(value, options)}</Fragment>\n);\n\nconst TableItem = ({\n  title,\n  value,\n  options,\n}: {\n  title: string;\n  value: any;\n  options: any;\n}) => {\n  return (\n    <MetadataTableItem\n      title={\n        options && options.titleFormat\n          ? options.titleFormat(title)\n          : startCase(title)\n      }\n    >\n      <ItemValue value={value} options={options} />\n    </MetadataTableItem>\n  );\n};\n\nfunction mapToItems(info: { [key: string]: string }, options: any) {\n  return Object.keys(info).map(key => (\n    <TableItem key={key} title={key} value={info[key]} options={options} />\n  ));\n}\n\ntype Props = {\n  metadata: { [key: string]: any };\n  dense?: boolean;\n  options?: any;\n};\n\nexport const StructuredMetadataTable = ({\n  metadata,\n  dense = true,\n  options,\n}: Props) => {\n  const metadataItems = mapToItems(metadata, options || {});\n  return <MetadataTable dense={dense}>{metadataItems}</MetadataTable>;\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isEqual } from 'lodash';\nimport qs from 'qs';\nimport { useEffect, useState } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport { useDebounce } from 'react-use';\n\nfunction stringify(queryParams: any): string {\n  // Even though these setting don't look nice (e.g. escaped brackets), we should keep\n  // them this way. The current syntax handles all cases, including variable types with\n  // arrays or strings.\n  return qs.stringify(queryParams, {\n    strictNullHandling: true,\n  });\n}\n\nfunction parse(queryString: string): any {\n  return qs.parse(queryString, {\n    ignoreQueryPrefix: true,\n    strictNullHandling: true,\n  });\n}\n\nfunction extractState(queryString: string, stateName: string): any | undefined {\n  const queryParams = parse(queryString);\n\n  return queryParams[stateName];\n}\n\nfunction joinQueryString(\n  queryString: string,\n  stateName: string,\n  state: any,\n): string {\n  const queryParams = {\n    ...parse(queryString),\n    [stateName]: state,\n  };\n  return stringify(queryParams);\n}\n\ntype SetQueryParams<T> = (params: T) => void;\n\nexport function useQueryParamState<T>(\n  stateName: string,\n  /** @deprecated Don't configure a custom debouceTime */\n  debounceTime: number = 250,\n): [T | undefined, SetQueryParams<T>] {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const searchParamsString = searchParams.toString();\n  const [queryParamState, setQueryParamState] = useState<T>(\n    extractState(searchParamsString, stateName),\n  );\n\n  useEffect(() => {\n    const newState = extractState(searchParamsString, stateName);\n\n    setQueryParamState(oldState =>\n      isEqual(newState, oldState) ? oldState : newState,\n    );\n  }, [searchParamsString, setQueryParamState, stateName]);\n\n  useDebounce(\n    () => {\n      const queryString = joinQueryString(\n        searchParamsString,\n        stateName,\n        queryParamState,\n      );\n\n      if (searchParamsString !== queryString) {\n        setSearchParams(queryString, { replace: true });\n      }\n    },\n    debounceTime,\n    [setSearchParams, queryParamState, searchParamsString, stateName],\n  );\n\n  return [queryParamState, setQueryParamState];\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useApi, configApiRef } from '@backstage/core-plugin-api';\n\nexport type SupportItemLink = {\n  url: string;\n  title: string;\n};\n\nexport type SupportItem = {\n  title: string;\n  icon?: string;\n  links: SupportItemLink[];\n};\n\nexport type SupportConfig = {\n  url: string;\n  items: SupportItem[];\n};\n\nconst DEFAULT_SUPPORT_CONFIG: SupportConfig = {\n  url: 'https://github.com/backstage/backstage/issues',\n  items: [\n    {\n      title: 'Support Not Configured',\n      icon: 'warning',\n      links: [\n        {\n          // TODO: Update to dedicated support page on backstage.io/docs\n          title: 'Add `app.support` config key',\n          url: 'https://github.com/andrewthauer/backstage/blob/master/app-config.yaml',\n        },\n      ],\n    },\n  ],\n};\n\nexport function useSupportConfig(): SupportConfig {\n  const config = useApi(configApiRef);\n  const supportConfig = config.getOptionalConfig('app.support');\n\n  if (!supportConfig) {\n    return DEFAULT_SUPPORT_CONFIG;\n  }\n\n  return {\n    url: supportConfig.getString('url'),\n    items: supportConfig.getConfigArray('items').flatMap(itemConf => ({\n      title: itemConf.getString('title'),\n      icon: itemConf.getOptionalString('icon'),\n      links: (itemConf.getOptionalConfigArray('links') ?? []).flatMap(\n        linkConf => ({\n          url: linkConf.getString('url'),\n          title: linkConf.getString('title'),\n        }),\n      ),\n    })),\n  };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport MuiBrokenImageIcon from '@material-ui/icons/BrokenImage';\nimport React from 'react';\nimport { useApp, IconComponent } from '@backstage/core-plugin-api';\n\nconst overridableSystemIcon = (key: string): IconComponent => {\n  const Component: IconComponent = props => {\n    const app = useApp();\n    const Icon = app.getSystemIcon(key);\n    return Icon ? <Icon {...props} /> : <MuiBrokenImageIcon {...props} />;\n  };\n  return Component;\n};\n\n// Should match the list of overridable system icon keys in @backstage/core-app-api\nexport const BrokenImageIcon = overridableSystemIcon('brokenImage');\nexport const CatalogIcon = overridableSystemIcon('catalog');\nexport const ChatIcon = overridableSystemIcon('chat');\nexport const DashboardIcon = overridableSystemIcon('dashboard');\nexport const DocsIcon = overridableSystemIcon('docs');\nexport const EmailIcon = overridableSystemIcon('email');\nexport const GitHubIcon = overridableSystemIcon('github');\nexport const GroupIcon = overridableSystemIcon('group');\nexport const HelpIcon = overridableSystemIcon('help');\nexport const UserIcon = overridableSystemIcon('user');\nexport const WarningIcon = overridableSystemIcon('warning');\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useApp } from '@backstage/core-plugin-api';\nimport { BackstageTheme } from '@backstage/theme';\nimport {\n  Box,\n  Button,\n  DialogActions,\n  IconButton,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  makeStyles,\n  Popover,\n  Typography,\n  useMediaQuery,\n} from '@material-ui/core';\nimport React, { MouseEventHandler, useState } from 'react';\nimport { SupportItem, SupportItemLink, useSupportConfig } from '../../hooks';\nimport { HelpIcon } from '../../icons';\nimport { Link } from '../Link';\n\ntype SupportButtonProps = {\n  title?: string;\n  children?: React.ReactNode;\n};\n\nconst useStyles = makeStyles({\n  popoverList: {\n    minWidth: 260,\n    maxWidth: 400,\n  },\n});\n\nconst SupportIcon = ({ icon }: { icon: string | undefined }) => {\n  const app = useApp();\n  const Icon = icon ? app.getSystemIcon(icon) ?? HelpIcon : HelpIcon;\n  return <Icon />;\n};\n\nconst SupportLink = ({ link }: { link: SupportItemLink }) => (\n  <Link to={link.url} target=\"_blank\" rel=\"noreferrer noopener\">\n    {link.title ?? link.url}\n  </Link>\n);\n\nconst SupportListItem = ({ item }: { item: SupportItem }) => {\n  return (\n    <ListItem>\n      <ListItemIcon>\n        <SupportIcon icon={item.icon} />\n      </ListItemIcon>\n      <ListItemText\n        primary={item.title}\n        secondary={item.links?.reduce<React.ReactNodeArray>(\n          (prev, link, idx) => [\n            ...prev,\n            idx > 0 && <br key={idx} />,\n            <SupportLink link={link} key={link.url} />,\n          ],\n          [],\n        )}\n      />\n    </ListItem>\n  );\n};\n\nexport const SupportButton = ({ title, children }: SupportButtonProps) => {\n  const { items } = useSupportConfig();\n\n  const [popoverOpen, setPopoverOpen] = useState(false);\n  const [anchorEl, setAnchorEl] = useState<Element | null>(null);\n  const classes = useStyles();\n  const isSmallScreen = useMediaQuery<BackstageTheme>(theme =>\n    theme.breakpoints.down('sm'),\n  );\n\n  const onClickHandler: MouseEventHandler = event => {\n    setAnchorEl(event.currentTarget);\n    setPopoverOpen(true);\n  };\n\n  const popoverCloseHandler = () => {\n    setPopoverOpen(false);\n  };\n\n  return (\n    <>\n      <Box display=\"flex\" ml={1}>\n        {isSmallScreen ? (\n          <IconButton\n            color=\"primary\"\n            size=\"small\"\n            onClick={onClickHandler}\n            data-testid=\"support-button\"\n          >\n            <HelpIcon />\n          </IconButton>\n        ) : (\n          <Button\n            data-testid=\"support-button\"\n            color=\"primary\"\n            onClick={onClickHandler}\n            startIcon={<HelpIcon />}\n          >\n            Support\n          </Button>\n        )}\n      </Box>\n      <Popover\n        data-testid=\"support-button-popover\"\n        open={popoverOpen}\n        anchorEl={anchorEl}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'right',\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'right',\n        }}\n        onClose={popoverCloseHandler}\n      >\n        <List className={classes.popoverList}>\n          {title && (\n            <ListItem alignItems=\"flex-start\">\n              <Typography variant=\"subtitle1\">{title}</Typography>\n            </ListItem>\n          )}\n          {React.Children.map(children, (child, i) => (\n            <ListItem alignItems=\"flex-start\" key={`child-${i}`}>\n              {child}\n            </ListItem>\n          ))}\n          {items &&\n            items.map((item, i) => (\n              <SupportListItem item={item} key={`item-${i}`} />\n            ))}\n        </List>\n        <DialogActions>\n          <Button color=\"primary\" onClick={popoverCloseHandler}>\n            Close\n          </Button>\n        </DialogActions>\n      </Popover>\n    </>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { PropsWithChildren } from 'react';\nimport classNames from 'classnames';\nimport { Theme, makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  root: {\n    gridArea: 'pageContent',\n    minWidth: 0,\n    paddingTop: theme.spacing(3),\n    paddingBottom: theme.spacing(3),\n    paddingLeft: theme.spacing(2),\n    paddingRight: theme.spacing(2),\n    [theme.breakpoints.up('sm')]: {\n      paddingLeft: theme.spacing(3),\n      paddingRight: theme.spacing(3),\n    },\n  },\n  stretch: {\n    display: 'flex',\n    flexDirection: 'column',\n    flexGrow: 1,\n  },\n  noPadding: {\n    padding: 0,\n  },\n}));\n\ntype Props = {\n  stretch?: boolean;\n  noPadding?: boolean;\n  className?: string;\n};\n\nexport const Content = ({\n  className,\n  stretch,\n  noPadding,\n  children,\n  ...props\n}: PropsWithChildren<Props>) => {\n  const classes = useStyles();\n  return (\n    <article\n      {...props}\n      className={classNames(classes.root, className, {\n        [classes.stretch]: stretch,\n        [classes.noPadding]: noPadding,\n      })}\n    >\n      {children}\n    </article>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// TODO(blam): Remove this implementation when the Tabs are ready\n// This is just a temporary solution to implementing tabs for now\n\nimport React, { useState, useEffect } from 'react';\nimport { makeStyles, Tabs, Tab as TabUI, TabProps } from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  tabsWrapper: {\n    gridArea: 'pageSubheader',\n    backgroundColor: theme.palette.background.paper,\n    paddingLeft: theme.spacing(3),\n  },\n  defaultTab: {\n    padding: theme.spacing(3, 3),\n    ...theme.typography.caption,\n    textTransform: 'uppercase',\n    fontWeight: 'bold',\n    color: theme.palette.text.secondary,\n  },\n  selected: {\n    color: theme.palette.text.primary,\n  },\n  tabRoot: {\n    '&:hover': {\n      backgroundColor: theme.palette.background.default,\n      color: theme.palette.text.primary,\n    },\n  },\n}));\n\nexport type Tab = {\n  id: string;\n  label: string;\n  tabProps?: TabProps<React.ElementType, { component?: React.ElementType }>;\n};\n\ntype HeaderTabsProps = {\n  tabs: Tab[];\n  onChange?: (index: number) => void;\n  selectedIndex?: number;\n};\nexport const HeaderTabs = ({\n  tabs,\n  onChange,\n  selectedIndex,\n}: HeaderTabsProps) => {\n  const [selectedTab, setSelectedTab] = useState<number>(selectedIndex ?? 0);\n  const styles = useStyles();\n\n  const handleChange = (_: React.ChangeEvent<{}>, index: number) => {\n    if (selectedIndex === undefined) {\n      setSelectedTab(index);\n    }\n    if (onChange) onChange(index);\n  };\n\n  useEffect(() => {\n    if (selectedIndex !== undefined) {\n      setSelectedTab(selectedIndex);\n    }\n  }, [selectedIndex]);\n\n  return (\n    <div className={styles.tabsWrapper}>\n      <Tabs\n        selectionFollowsFocus\n        indicatorColor=\"primary\"\n        textColor=\"inherit\"\n        variant=\"scrollable\"\n        scrollButtons=\"auto\"\n        aria-label=\"scrollable auto tabs example\"\n        onChange={handleChange}\n        value={selectedTab}\n      >\n        {tabs.map((tab, index) => (\n          <TabUI\n            {...tab.tabProps}\n            label={tab.label}\n            key={tab.id}\n            value={index}\n            className={styles.defaultTab}\n            classes={{ selected: styles.selected, root: styles.tabRoot }}\n          />\n        ))}\n      </Tabs>\n    </div>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useMemo } from 'react';\nimport { Helmet } from 'react-helmet';\nimport { matchRoutes, useNavigate, useParams, useRoutes } from 'react-router';\nimport { Content } from '../../layout/Content';\nimport { HeaderTabs } from '../../layout/HeaderTabs';\nimport { SubRoute } from './types';\n\nexport function useSelectedSubRoute(subRoutes: SubRoute[]): {\n  index: number;\n  route: SubRoute;\n  element: JSX.Element;\n} {\n  const params = useParams();\n\n  const routes = subRoutes.map(({ path, children }) => ({\n    caseSensitive: false,\n    path: `${path}/*`,\n    element: children,\n  }));\n\n  const element = useRoutes(routes) ?? subRoutes[0].children;\n\n  const [matchedRoute] = matchRoutes(routes, `/${params['*']}`) ?? [];\n  const foundIndex = matchedRoute\n    ? subRoutes.findIndex(t => `${t.path}/*` === matchedRoute.route.path)\n    : 0;\n\n  return {\n    index: foundIndex === -1 ? 0 : foundIndex,\n    element,\n    route: subRoutes[foundIndex] ?? subRoutes[0],\n  };\n}\n\nexport const RoutedTabs = ({ routes }: { routes: SubRoute[] }) => {\n  const navigate = useNavigate();\n  const { index, route, element } = useSelectedSubRoute(routes);\n  const headerTabs = useMemo(\n    () =>\n      routes.map(t => ({\n        id: t.path,\n        label: t.title,\n        tabProps: t.tabProps,\n      })),\n    [routes],\n  );\n\n  const onTabChange = (tabIndex: number) =>\n    // Remove trailing /*\n    // And remove leading / for relative navigation\n    // Note! route resolves relative to the position in the React tree,\n    // not relative to current location\n    navigate(routes[tabIndex].path.replace(/\\/\\*$/, '').replace(/^\\//, ''));\n\n  return (\n    <>\n      <HeaderTabs\n        tabs={headerTabs}\n        selectedIndex={index}\n        onChange={onTabChange}\n      />\n      <Content>\n        <Helmet title={route.title} />\n        {element}\n      </Content>\n    </>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { attachComponentData } from '@backstage/core-plugin-api';\nimport React, {\n  Children,\n  Fragment,\n  isValidElement,\n  PropsWithChildren,\n  ReactNode,\n} from 'react';\nimport { RoutedTabs } from './RoutedTabs';\nimport { TabProps } from '@material-ui/core';\n\ntype SubRoute = {\n  path: string;\n  title: string;\n  children: JSX.Element;\n  tabProps?: TabProps<React.ElementType, { component?: React.ElementType }>;\n};\n\nconst Route: (props: SubRoute) => null = () => null;\n\n// This causes all mount points that are discovered within this route to use the path of the route itself\nattachComponentData(Route, 'core.gatherMountPoints', true);\n\nexport function createSubRoutesFromChildren(\n  childrenProps: ReactNode,\n): SubRoute[] {\n  // Directly comparing child.type with Route will not work with in\n  // combination with react-hot-loader in storybook\n  // https://github.com/gaearon/react-hot-loader/issues/304\n  const routeType = (\n    <Route path=\"\" title=\"\">\n      <div />\n    </Route>\n  ).type;\n\n  return Children.toArray(childrenProps).flatMap(child => {\n    if (!isValidElement(child)) {\n      return [];\n    }\n\n    if (child.type === Fragment) {\n      return createSubRoutesFromChildren(child.props.children);\n    }\n\n    if (child.type !== routeType) {\n      throw new Error('Child of TabbedLayout must be an TabbedLayout.Route');\n    }\n\n    const { path, title, children, tabProps } = child.props;\n    return [{ path, title, children, tabProps }];\n  });\n}\n\n/**\n * TabbedLayout is a compound component, which allows you to define a layout for\n * pages using a sub-navigation mechanism.\n *\n * Consists of two parts: TabbedLayout and TabbedLayout.Route\n *\n * @example\n * ```jsx\n * <TabbedLayout>\n *   <TabbedLayout.Route path=\"/example\" title=\"Example tab\">\n *     <div>This is rendered under /example/anything-here route</div>\n *   </TabbedLayout.Route>\n * </TabbedLayout>\n * ```\n */\nexport const TabbedLayout = ({ children }: PropsWithChildren<{}>) => {\n  const routes = createSubRoutesFromChildren(children);\n\n  return <RoutedTabs routes={routes} />;\n};\n\nTabbedLayout.Route = Route;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { BackstageTheme } from '@backstage/theme';\nimport { makeStyles } from '@material-ui/core';\n\nconst useSubvalueCellStyles = makeStyles<BackstageTheme>(theme => ({\n  value: {\n    marginBottom: '6px',\n  },\n  subvalue: {\n    color: theme.palette.textSubtle,\n    fontWeight: 'normal',\n  },\n}));\n\ntype SubvalueCellProps = {\n  value: React.ReactNode;\n  subvalue: React.ReactNode;\n};\n\nexport const SubvalueCell = ({ value, subvalue }: SubvalueCellProps) => {\n  const classes = useSubvalueCellStyles();\n\n  return (\n    <>\n      <div className={classes.value}>{value}</div>\n      <div className={classes.subvalue}>{subvalue}</div>\n    </>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* eslint-disable guard-for-in */\nimport {\n  Checkbox,\n  Collapse,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Typography,\n} from '@material-ui/core';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport produce from 'immer';\nimport { isEqual } from 'lodash';\nimport React, { useEffect, useReducer } from 'react';\nimport { usePrevious } from 'react-use';\n\ntype IndexedObject<T> = {\n  [key: string]: T;\n};\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      width: '100%',\n      minWidth: 10,\n      maxWidth: 360,\n      backgroundColor: 'transparent',\n      '&:hover': {\n        backgroundColor: 'transparent',\n      },\n      '&:active': {\n        animation: 'none',\n        transform: 'none',\n      },\n    },\n    nested: {\n      paddingLeft: theme.spacing(5),\n      height: '32px',\n      '&:hover': {\n        backgroundColor: 'transparent',\n      },\n    },\n    listItemIcon: {\n      minWidth: 10,\n    },\n    listItem: {\n      '&:hover': {\n        backgroundColor: 'transparent',\n      },\n    },\n    text: {\n      '& span, & svg': {\n        fontWeight: 'normal',\n        fontSize: 14,\n      },\n    },\n  }),\n);\n\n/* SUB_CATEGORY */\n\ntype SubCategory = {\n  label: string;\n  isChecked?: boolean;\n  isOpen?: boolean;\n  options?: Option[];\n};\n\ntype SubCategoryWithIndexedOptions = {\n  label: string;\n  isChecked?: boolean;\n  isOpen?: boolean;\n  options: IndexedObject<Option>;\n};\n\n/* OPTION */\n\ntype Option = {\n  label: string;\n  value: string | number;\n  isChecked?: boolean;\n};\n\ntype Selection = { category?: string; selectedChildren?: string[] }[];\n\nexport type CheckboxTreeProps = {\n  subCategories: SubCategory[];\n  label: string;\n  triggerReset?: boolean;\n  selected?: Selection;\n  onChange: (arg: Selection) => any;\n};\n\n/* REDUCER */\n\ntype checkOptionPayload = {\n  subCategoryLabel: string;\n  optionLabel: string;\n};\n\ntype Action =\n  | { type: 'checkOption'; payload: checkOptionPayload }\n  | { type: 'checkCategory'; payload: string }\n  | { type: 'toggleCategory'; payload: string }\n  | {\n      type: 'updateCategories';\n      payload: IndexedObject<SubCategoryWithIndexedOptions>;\n    }\n  | { type: 'updateSelected'; payload: Selection }\n  | { type: 'triggerReset' };\n\nconst reducer = (\n  state: IndexedObject<SubCategoryWithIndexedOptions>,\n  action: Action,\n) => {\n  switch (action.type) {\n    case 'checkOption': {\n      return produce(state, newState => {\n        const category = newState[action.payload.subCategoryLabel];\n        const option = category.options[action.payload.optionLabel];\n        option.isChecked = !option.isChecked;\n        category.isChecked = Object.values(category.options).every(\n          o => o.isChecked,\n        );\n      });\n    }\n    case 'checkCategory': {\n      return produce(state, newState => {\n        const category = newState[action.payload];\n        const options = category.options;\n        category.isChecked = !category.isChecked;\n        for (const option in options) {\n          options[option].isChecked = category.isChecked;\n        }\n      });\n    }\n    case 'toggleCategory':\n      return produce(state, newState => {\n        const category = newState[action.payload];\n        category.isOpen = !category.isOpen;\n      });\n    case 'triggerReset': {\n      return produce(state, newState => {\n        for (const category in newState) {\n          newState[category].isChecked = false;\n          for (const option in newState[category].options) {\n            newState[category].options[option].isChecked =\n              newState[category].isChecked;\n          }\n        }\n      });\n    }\n    case 'updateCategories': {\n      return produce(state, newState => {\n        for (const category in newState) {\n          delete newState[category];\n        }\n\n        for (const category in action.payload) {\n          newState[category] = action.payload[category];\n\n          if (state[category]) {\n            newState[category].isChecked = state[category].isChecked;\n            newState[category].isOpen = state[category].isOpen;\n          }\n        }\n      });\n    }\n    case 'updateSelected': {\n      return produce(state, newState => {\n        for (const category in newState) {\n          const selection = action.payload.find(s => s.category === category);\n\n          if (selection) {\n            newState[category].isChecked = true;\n\n            for (const option in newState[category].options) {\n              newState[category].options[option].isChecked =\n                selection.selectedChildren?.includes(option) || false;\n            }\n          }\n        }\n      });\n    }\n    default:\n      return state;\n  }\n};\n\nconst indexer = (\n  arr: SubCategory[],\n): IndexedObject<SubCategoryWithIndexedOptions> =>\n  arr.reduce((accumulator, el) => {\n    if (el.options) {\n      return {\n        ...accumulator,\n        [el.label]: {\n          label: el.label,\n          isChecked: el.isChecked || false,\n          isOpen: false,\n          options: indexer(el.options),\n        },\n      };\n    }\n    return {\n      ...accumulator,\n      [el.label]: { ...el, isChecked: el.isChecked || false },\n    };\n  }, {});\n\nexport const CheckboxTree = ({\n  subCategories,\n  label,\n  selected,\n  onChange,\n  triggerReset,\n}: CheckboxTreeProps) => {\n  const classes = useStyles();\n\n  const [state, dispatch] = useReducer(reducer, indexer(subCategories));\n\n  const handleOpen = (event: any, value: any) => {\n    event.stopPropagation();\n    dispatch({ type: 'toggleCategory', payload: value });\n  };\n\n  const previousSubCategories = usePrevious(subCategories);\n\n  useEffect(() => {\n    const values = Object.values(state).map(category => ({\n      category: category.isChecked ? category.label : undefined,\n      selectedChildren: Object.values(category.options)\n        .filter(option => option.isChecked)\n        .map(option => option.label),\n    }));\n    onChange(values);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [state]);\n\n  useEffect(() => {\n    dispatch({ type: 'triggerReset' });\n  }, [triggerReset]);\n\n  useEffect(() => {\n    if (selected) {\n      dispatch({ type: 'updateSelected', payload: selected });\n    }\n  }, [selected]);\n\n  useEffect(() => {\n    if (!isEqual(subCategories, previousSubCategories)) {\n      dispatch({\n        type: 'updateCategories',\n        payload: indexer(subCategories),\n      });\n    }\n  }, [subCategories, previousSubCategories]);\n\n  return (\n    <div>\n      <Typography variant=\"button\">{label}</Typography>\n      <List className={classes.root}>\n        {Object.values(state).map(item => (\n          <div key={item.label}>\n            <ListItem\n              className={classes.listItem}\n              dense\n              button\n              onClick={() =>\n                dispatch({\n                  type: 'checkCategory',\n                  payload: item.label,\n                })\n              }\n            >\n              <ListItemIcon className={classes.listItemIcon}>\n                <Checkbox\n                  color=\"primary\"\n                  edge=\"start\"\n                  checked={item.isChecked}\n                  tabIndex={-1}\n                  disableRipple\n                />\n              </ListItemIcon>\n              <ListItemText className={classes.text} primary={item.label} />\n              {Object.values(item.options).length ? (\n                <>\n                  {item.isOpen ? (\n                    <ExpandLess\n                      data-testid=\"expandable\"\n                      onClick={event => handleOpen(event, item.label)}\n                    />\n                  ) : (\n                    <ExpandMore\n                      data-testid=\"expandable\"\n                      onClick={event => handleOpen(event, item.label)}\n                    />\n                  )}\n                </>\n              ) : null}\n            </ListItem>\n            <Collapse in={item.isOpen} timeout=\"auto\" unmountOnExit>\n              <List component=\"div\" disablePadding>\n                {Object.values(item.options).map(option => (\n                  <ListItem\n                    button\n                    key={option.label}\n                    className={classes.nested}\n                    onClick={() =>\n                      dispatch({\n                        type: 'checkOption',\n                        payload: {\n                          subCategoryLabel: item.label,\n                          optionLabel: option.label,\n                        },\n                      })\n                    }\n                  >\n                    <ListItemIcon className={classes.listItemIcon}>\n                      <Checkbox\n                        color=\"primary\"\n                        edge=\"start\"\n                        checked={option.isChecked}\n                        tabIndex={-1}\n                        disableRipple\n                      />\n                    </ListItemIcon>\n                    <ListItemText\n                      className={classes.text}\n                      primary={option.label}\n                    />\n                  </ListItem>\n                ))}\n              </List>\n            </Collapse>\n          </div>\n        ))}\n      </List>\n    </div>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport { BackstageTheme } from '@backstage/theme';\nimport { Button, makeStyles } from '@material-ui/core';\nimport { Select } from '../Select';\nimport { CheckboxTree } from '../CheckboxTree';\nimport { CheckboxTreeProps } from '../CheckboxTree/CheckboxTree';\nimport { SelectProps } from '../Select/Select';\n\nconst useSubvalueCellStyles = makeStyles<BackstageTheme>(theme => ({\n  root: {\n    height: '100%',\n    width: '315px',\n    display: 'flex',\n    flexDirection: 'column',\n    marginRight: theme.spacing(3),\n  },\n  value: {\n    fontWeight: 'bold',\n    fontSize: 18,\n  },\n  header: {\n    display: 'flex',\n    alignItems: 'center',\n    height: '60px',\n    justifyContent: 'space-between',\n    borderBottom: `1px solid ${theme.palette.grey[500]}`,\n  },\n  filters: {\n    display: 'flex',\n    flexDirection: 'column',\n    '& > *': {\n      marginTop: theme.spacing(2),\n    },\n  },\n}));\n\nexport type Without<T, K> = Pick<T, Exclude<keyof T, K>>;\n\nexport type Filter = {\n  type: 'select' | 'checkbox-tree' | 'multiple-select';\n  element:\n    | Without<CheckboxTreeProps, 'onChange'>\n    | Without<SelectProps, 'onChange'>;\n};\n\nexport type SelectedFilters = {\n  [key: string]: string | string[];\n};\n\ntype Props = {\n  filters: Filter[];\n  selectedFilters?: SelectedFilters;\n  onChangeFilters: (arg: any) => any;\n};\n\nexport const Filters = (props: Props) => {\n  const classes = useSubvalueCellStyles();\n\n  const { onChangeFilters } = props;\n\n  const [selectedFilters, setSelectedFilters] = useState<SelectedFilters>({\n    ...props.selectedFilters,\n  });\n  const [reset, triggerReset] = useState(false);\n\n  // Trigger re-rendering\n  const handleClick = () => {\n    setSelectedFilters({});\n    triggerReset(el => !el);\n  };\n\n  useEffect(() => {\n    onChangeFilters(selectedFilters);\n  }, [selectedFilters, onChangeFilters]);\n\n  // As material table doesn't provide a way to add a column filter tab we will make our own filter logic\n  return (\n    <div className={classes.root}>\n      <div className={classes.header}>\n        <div className={classes.value}>Filters</div>\n        <Button color=\"primary\" onClick={handleClick}>\n          Clear all\n        </Button>\n      </div>\n      <div className={classes.filters}>\n        {props.filters?.length &&\n          props.filters.map(filter =>\n            filter.type === 'checkbox-tree' ? (\n              <CheckboxTree\n                triggerReset={reset}\n                key={filter.element.label}\n                {...(filter.element as CheckboxTreeProps)}\n                selected={\n                  selectedFilters[filter.element.label]\n                    ? (selectedFilters[filter.element.label] as string[]).map(\n                        s => ({\n                          category: s,\n                        }),\n                      )\n                    : undefined\n                }\n                onChange={el =>\n                  setSelectedFilters({\n                    ...selectedFilters,\n                    [filter.element.label]: el\n                      .filter(\n                        (checkboxFilter: any) =>\n                          checkboxFilter.category ||\n                          checkboxFilter.selectedChildren.length,\n                      )\n                      .map((checkboxFilter: any) =>\n                        checkboxFilter.category\n                          ? [\n                              ...checkboxFilter.selectedChildren,\n                              checkboxFilter.category,\n                            ]\n                          : checkboxFilter.selectedChildren,\n                      )\n                      .flat(),\n                  })\n                }\n              />\n            ) : (\n              <Select\n                triggerReset={reset}\n                key={filter.element.label}\n                {...(filter.element as SelectProps)}\n                selected={selectedFilters[filter.element.label]}\n                onChange={el =>\n                  setSelectedFilters({\n                    ...selectedFilters,\n                    [filter.element.label]: el as any,\n                  })\n                }\n              />\n            ),\n          )}\n      </div>\n    </div>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { BackstageTheme } from '@backstage/theme';\nimport {\n  IconButton,\n  makeStyles,\n  Typography,\n  useTheme,\n  withStyles,\n} from '@material-ui/core';\n// Material-table is not using the standard icons available in in material-ui. https://github.com/mbrn/material-table/issues/51\nimport AddBox from '@material-ui/icons/AddBox';\nimport ArrowUpward from '@material-ui/icons/ArrowUpward';\nimport Check from '@material-ui/icons/Check';\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport Clear from '@material-ui/icons/Clear';\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\nimport Edit from '@material-ui/icons/Edit';\nimport FilterList from '@material-ui/icons/FilterList';\nimport FirstPage from '@material-ui/icons/FirstPage';\nimport LastPage from '@material-ui/icons/LastPage';\nimport Remove from '@material-ui/icons/Remove';\nimport SaveAlt from '@material-ui/icons/SaveAlt';\nimport Search from '@material-ui/icons/Search';\nimport ViewColumn from '@material-ui/icons/ViewColumn';\nimport { isEqual, transform } from 'lodash';\nimport MTable, {\n  Column,\n  Icons,\n  MaterialTableProps,\n  MTableBody,\n  MTableHeader,\n  MTableToolbar,\n  Options,\n} from '@material-table/core';\nimport React, {\n  forwardRef,\n  MutableRefObject,\n  ReactNode,\n  useCallback,\n  useEffect,\n  useState,\n} from 'react';\nimport { CheckboxTreeProps } from '../CheckboxTree/CheckboxTree';\nimport { SelectProps } from '../Select/Select';\nimport { Filter, Filters, SelectedFilters, Without } from './Filters';\n\nconst tableIcons: Icons = {\n  Add: forwardRef((props, ref) => <AddBox {...props} ref={ref} />),\n  Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\n  Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\n  DetailPanel: forwardRef((props, ref) => (\n    <ChevronRight {...props} ref={ref} />\n  )),\n  Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\n  Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\n  Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\n  FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\n  LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\n  NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n  PreviousPage: forwardRef((props, ref) => (\n    <ChevronLeft {...props} ref={ref} />\n  )),\n  ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Search: forwardRef((props, ref) => <Search {...props} ref={ref} />),\n  SortArrow: forwardRef((props, ref) => <ArrowUpward {...props} ref={ref} />),\n  ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\n  ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />),\n};\n\n// TODO: Material table might already have such a function internally that we can use?\nfunction extractValueByField(data: any, field: string): any | undefined {\n  const path = field.split('.');\n  let value = data[path[0]];\n\n  for (let i = 1; i < path.length; ++i) {\n    if (value === undefined) {\n      return value;\n    }\n\n    const f = path[i];\n    value = value[f];\n  }\n\n  return value;\n}\n\nconst StyledMTableHeader = withStyles(theme => ({\n  header: {\n    padding: theme.spacing(1, 2, 1, 2.5),\n    borderTop: `1px solid ${theme.palette.grey.A100}`,\n    borderBottom: `1px solid ${theme.palette.grey.A100}`,\n    // withStyles hasn't a generic overload for theme\n    color: (theme as BackstageTheme).palette.textSubtle,\n    fontWeight: theme.typography.fontWeightBold,\n    position: 'static',\n    wordBreak: 'normal',\n  },\n}))(MTableHeader);\n\nconst StyledMTableToolbar = withStyles(theme => ({\n  root: {\n    padding: theme.spacing(3, 0, 2.5, 2.5),\n  },\n  title: {\n    '& > h6': {\n      fontWeight: 'bold',\n    },\n  },\n  searchField: {\n    paddingRight: theme.spacing(2),\n  },\n}))(MTableToolbar);\n\nconst useFilterStyles = makeStyles<BackstageTheme>(() => ({\n  root: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n  },\n  title: {\n    fontWeight: 'bold',\n    fontSize: 18,\n    whiteSpace: 'nowrap',\n  },\n}));\n\nconst useTableStyles = makeStyles<BackstageTheme>(() => ({\n  root: {\n    display: 'flex',\n    alignItems: 'start',\n  },\n}));\n\nfunction convertColumns<T extends object>(\n  columns: TableColumn<T>[],\n  theme: BackstageTheme,\n): TableColumn<T>[] {\n  return columns.map(column => {\n    const headerStyle: React.CSSProperties = {};\n    const cellStyle: React.CSSProperties =\n      typeof column.cellStyle === 'object' ? column.cellStyle : {};\n\n    if (column.highlight) {\n      headerStyle.color = theme.palette.textContrast;\n      cellStyle.fontWeight = theme.typography.fontWeightBold;\n    }\n\n    return {\n      ...column,\n      headerStyle,\n      cellStyle,\n    };\n  });\n}\n\nfunction removeDefaultValues(state: any, defaultState: any): any {\n  return transform(state, (result, value, key) => {\n    if (!isEqual(value, defaultState[key])) {\n      result[key] = value;\n    }\n  });\n}\n\nconst defaultInitialState = {\n  search: '',\n  filtersOpen: false,\n  filters: {},\n};\n\nexport interface TableColumn<T extends object = {}> extends Column<T> {\n  highlight?: boolean;\n  width?: string;\n}\n\nexport type TableFilter = {\n  column: string;\n  type: 'select' | 'multiple-select' | 'checkbox-tree';\n};\n\nexport type TableState = {\n  search?: string;\n  filtersOpen?: boolean;\n  filters?: SelectedFilters;\n};\n\nexport interface TableProps<T extends object = {}>\n  extends MaterialTableProps<T> {\n  columns: TableColumn<T>[];\n  subtitle?: string;\n  filters?: TableFilter[];\n  initialState?: TableState;\n  emptyContent?: ReactNode;\n  onStateChange?: (state: TableState) => any;\n}\n\nexport function TableToolbar(toolbarProps: {\n  toolbarRef: MutableRefObject<any>;\n  setSearch: (value: string) => void;\n  onSearchChanged: (value: string) => void;\n  toggleFilters: () => void;\n  hasFilters: boolean;\n  selectedFiltersLength: number;\n}) {\n  const {\n    toolbarRef,\n    setSearch,\n    hasFilters,\n    selectedFiltersLength,\n    toggleFilters,\n  } = toolbarProps;\n  const filtersClasses = useFilterStyles();\n  const onSearchChanged = useCallback(\n    (searchText: string) => {\n      toolbarProps.onSearchChanged(searchText);\n      setSearch(searchText);\n    },\n    [toolbarProps, setSearch],\n  );\n\n  if (hasFilters) {\n    return (\n      <div className={filtersClasses.root}>\n        <div className={filtersClasses.root}>\n          <IconButton onClick={toggleFilters} aria-label=\"filter list\">\n            <FilterList />\n          </IconButton>\n          <Typography className={filtersClasses.title}>\n            Filters ({selectedFiltersLength})\n          </Typography>\n        </div>\n        <StyledMTableToolbar\n          {...toolbarProps}\n          ref={toolbarRef}\n          onSearchChanged={onSearchChanged}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <StyledMTableToolbar\n      {...toolbarProps}\n      ref={toolbarRef}\n      onSearchChanged={onSearchChanged}\n    />\n  );\n}\n\nexport function Table<T extends object = {}>({\n  columns,\n  options,\n  title,\n  subtitle,\n  filters,\n  initialState,\n  emptyContent,\n  onStateChange,\n  ...props\n}: TableProps<T>) {\n  const tableClasses = useTableStyles();\n\n  const { data, ...propsWithoutData } = props;\n\n  const theme = useTheme<BackstageTheme>();\n\n  const calculatedInitialState = { ...defaultInitialState, ...initialState };\n\n  const [filtersOpen, setFiltersOpen] = useState(\n    calculatedInitialState.filtersOpen,\n  );\n  const toggleFilters = useCallback(\n    () => setFiltersOpen(v => !v),\n    [setFiltersOpen],\n  );\n  const [selectedFiltersLength, setSelectedFiltersLength] = useState(0);\n  const [tableData, setTableData] = useState(data as any[]);\n  const [selectedFilters, setSelectedFilters] = useState(\n    calculatedInitialState.filters,\n  );\n\n  const MTColumns = convertColumns(columns, theme);\n\n  const [search, setSearch] = useState(calculatedInitialState.search);\n\n  useEffect(() => {\n    if (onStateChange) {\n      const state = removeDefaultValues(\n        {\n          search,\n          filtersOpen,\n          filters: selectedFilters,\n        },\n        defaultInitialState,\n      );\n\n      onStateChange(state);\n    }\n  }, [search, filtersOpen, selectedFilters, onStateChange]);\n\n  const defaultOptions: Options<T> = {\n    headerStyle: {\n      textTransform: 'uppercase',\n    },\n  };\n\n  const getFieldByTitle = useCallback(\n    (titleValue: string | keyof T) =>\n      columns.find(el => el.title === titleValue)?.field,\n    [columns],\n  );\n\n  useEffect(() => {\n    if (typeof data === 'function') {\n      return;\n    }\n    if (!selectedFilters) {\n      setTableData(data as any[]);\n      return;\n    }\n\n    const selectedFiltersArray = Object.values(selectedFilters);\n    if (data && selectedFiltersArray.flat().length) {\n      const newData = (data as any[]).filter(\n        el =>\n          !!Object.entries(selectedFilters)\n            .filter(([, value]) => !!value.length)\n            .every(([key, filterValue]) => {\n              const fieldValue = extractValueByField(\n                el,\n                getFieldByTitle(key) as string,\n              );\n\n              if (Array.isArray(fieldValue) && Array.isArray(filterValue)) {\n                return fieldValue.some(v => filterValue.includes(v));\n              } else if (Array.isArray(fieldValue)) {\n                return fieldValue.includes(filterValue);\n              } else if (Array.isArray(filterValue)) {\n                return filterValue.includes(fieldValue);\n              }\n\n              return fieldValue === filterValue;\n            }),\n      );\n      setTableData(newData);\n    } else {\n      setTableData(data as any[]);\n    }\n    setSelectedFiltersLength(selectedFiltersArray.flat().length);\n  }, [data, selectedFilters, getFieldByTitle]);\n\n  const constructFilters = (\n    filterConfig: TableFilter[],\n    dataValue: any[] | undefined,\n  ): Filter[] => {\n    const extractDistinctValues = (field: string | keyof T): Set<any> => {\n      const distinctValues = new Set<any>();\n      const addValue = (value: any) => {\n        if (value !== undefined && value !== null) {\n          distinctValues.add(value);\n        }\n      };\n\n      if (dataValue) {\n        dataValue.forEach(el => {\n          const value = extractValueByField(\n            el,\n            getFieldByTitle(field) as string,\n          );\n\n          if (Array.isArray(value)) {\n            (value as []).forEach(addValue);\n          } else {\n            addValue(value);\n          }\n        });\n      }\n\n      return distinctValues;\n    };\n\n    const constructCheckboxTree = (\n      filter: TableFilter,\n    ): Without<CheckboxTreeProps, 'onChange'> => ({\n      label: filter.column,\n      subCategories: [...extractDistinctValues(filter.column)].map(v => ({\n        label: v,\n        options: [],\n      })),\n    });\n\n    const constructSelect = (\n      filter: TableFilter,\n    ): Without<SelectProps, 'onChange'> => {\n      return {\n        placeholder: 'All results',\n        label: filter.column,\n        multiple: filter.type === 'multiple-select',\n        items: [...extractDistinctValues(filter.column)].sort().map(value => ({\n          label: value,\n          value,\n        })),\n      };\n    };\n\n    return filterConfig.map(filter => ({\n      type: filter.type,\n      element:\n        filter.type === 'checkbox-tree'\n          ? constructCheckboxTree(filter)\n          : constructSelect(filter),\n    }));\n  };\n\n  const hasFilters = !!filters?.length;\n  const Toolbar = useCallback(\n    toolbarProps => {\n      return (\n        <TableToolbar\n          setSearch={setSearch}\n          hasFilters={hasFilters}\n          selectedFiltersLength={selectedFiltersLength}\n          toggleFilters={toggleFilters}\n          {...toolbarProps}\n        />\n      );\n    },\n    [toggleFilters, hasFilters, selectedFiltersLength, setSearch],\n  );\n\n  const hasNoRows = typeof data !== 'function' && data.length === 0;\n  const columnCount = columns.length;\n  const Body = useCallback(\n    bodyProps => {\n      if (emptyContent && hasNoRows) {\n        return (\n          <tbody>\n            <tr>\n              <td colSpan={columnCount}>{emptyContent}</td>\n            </tr>\n          </tbody>\n        );\n      }\n\n      return <MTableBody {...bodyProps} />;\n    },\n    [hasNoRows, emptyContent, columnCount],\n  );\n\n  return (\n    <div className={tableClasses.root}>\n      {filtersOpen && data && typeof data !== 'function' && filters?.length && (\n        <Filters\n          filters={constructFilters(filters, data as any[])}\n          selectedFilters={selectedFilters}\n          onChangeFilters={setSelectedFilters}\n        />\n      )}\n      <MTable<T>\n        components={{\n          Header: StyledMTableHeader,\n          Toolbar,\n          Body,\n        }}\n        options={{ ...defaultOptions, ...options }}\n        columns={MTColumns}\n        icons={tableIcons}\n        title={\n          <>\n            <Typography variant=\"h5\" component=\"h3\">\n              {title}\n            </Typography>\n            {subtitle && (\n              <Typography color=\"textSecondary\" variant=\"body1\">\n                {subtitle}\n              </Typography>\n            )}\n          </>\n        }\n        data={typeof data === 'function' ? data : tableData}\n        style={{ width: '100%' }}\n        {...propsWithoutData}\n      />\n    </div>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function chunkArray<T>(array: T[], chunkSize: number): T[][] {\n  if (chunkSize <= 0) {\n    return [array];\n  }\n\n  const result: T[][] = [];\n  for (let i = 0; i < array.length; i += chunkSize) {\n    result.push(array.slice(i, i + chunkSize));\n  }\n\n  return result;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { PropsWithChildren } from 'react';\nimport Box from '@material-ui/core/Box';\n\nexport interface TabPanelProps {\n  value?: any;\n  index?: number;\n}\n\nexport const TabPanel = (props: PropsWithChildren<TabPanelProps>) => {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      aria-labelledby={`scrollable-auto-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box p={3}>{children}</Box>}\n    </div>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { IconButton, makeStyles } from '@material-ui/core';\nimport { BackstageTheme } from '@backstage/theme';\n\ninterface StyledIconProps {\n  ariaLabel: string;\n  children: any;\n  isNext?: boolean;\n  onClick: any;\n}\n\nconst useStyles = makeStyles<BackstageTheme, StyledIconProps>(() => ({\n  root: {\n    color: '#6E6E6E',\n    overflow: 'visible',\n    fontSize: '1.5rem',\n    textAlign: 'center',\n    borderRadius: '50%',\n    backgroundColor: '#E6E6E6',\n    marginLeft: props => (props.isNext ? 'auto' : '0'),\n    marginRight: props => (props.isNext ? '0' : '10px'),\n    '&:hover': {\n      backgroundColor: '#E6E6E6',\n      opacity: '1',\n    },\n  },\n}));\n\nexport const StyledIcon = (props: StyledIconProps) => {\n  const classes = useStyles(props);\n  const { ariaLabel, onClick } = props;\n  return (\n    <IconButton\n      onClick={onClick}\n      className={classes.root}\n      size=\"small\"\n      disableRipple\n      disableFocusRipple\n      aria-label={ariaLabel}\n    >\n      {props.children}\n    </IconButton>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Tab, makeStyles } from '@material-ui/core';\nimport { BackstageTheme } from '@backstage/theme';\n\ninterface StyledTabProps {\n  label?: string;\n  icon?: any; // TODO: define type for material-ui icons\n  isFirstNav?: boolean;\n  isFirstIndex?: boolean;\n  value?: any;\n}\n\nconst tabMarginLeft = (isFirstNav: boolean, isFirstIndex: boolean) => {\n  if (isFirstIndex) {\n    if (isFirstNav) {\n      return '20px';\n    }\n    return '0';\n  }\n  return '40px';\n};\n\nconst useStyles = makeStyles<BackstageTheme, StyledTabProps>(theme => ({\n  root: {\n    textTransform: 'none',\n    height: '64px',\n    fontWeight: theme.typography.fontWeightBold,\n    fontSize: theme.typography.pxToRem(13),\n    color: theme.palette.textSubtle,\n    marginLeft: props =>\n      tabMarginLeft(props.isFirstNav as boolean, props.isFirstIndex as boolean),\n    width: '130px',\n    minWidth: '130px',\n    '&:hover': {\n      outline: 'none',\n      backgroundColor: 'transparent',\n      color: theme.palette.textSubtle,\n    },\n  },\n}));\n\nexport const StyledTab = (props: StyledTabProps) => {\n  const classes = useStyles(props);\n  const { isFirstNav, isFirstIndex, ...rest } = props;\n  return <Tab className={classes.root} disableRipple {...rest} />;\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { PropsWithChildren } from 'react';\nimport { Tabs, makeStyles } from '@material-ui/core';\nimport { BackstageTheme } from '@backstage/theme';\n\ninterface StyledTabsProps {\n  value: number | boolean;\n  selectionFollowsFocus: boolean;\n  onChange: (event: React.ChangeEvent<{}>, newValue: number) => void;\n}\n\nconst useStyles = makeStyles<BackstageTheme>(theme => ({\n  indicator: {\n    display: 'flex',\n    justifyContent: 'center',\n    backgroundColor: theme.palette.tabbar.indicator,\n    height: '4px',\n  },\n  flexContainer: {\n    alignItems: 'center',\n  },\n  root: {\n    '&:last-child': {\n      marginLeft: 'auto',\n    },\n  },\n}));\n\nexport const StyledTabs = (props: PropsWithChildren<StyledTabsProps>) => {\n  const classes = useStyles(props);\n  return (\n    <Tabs\n      classes={classes}\n      {...props}\n      TabIndicatorProps={{ children: <span /> }}\n    />\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useRef, useEffect, MutableRefObject, useState } from 'react';\nimport { BackstageTheme } from '@backstage/theme';\nimport { AppBar } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\nimport { chunkArray } from './utils';\nimport { useWindowSize } from 'react-use';\n\n/* Import Components */\n\nimport { TabPanel } from './TabPanel';\nimport { StyledIcon } from './TabIcon';\nimport { StyledTab } from './Tab';\nimport { StyledTabs } from './TabBar';\n\n/* Props Types */\n\nexport interface TabProps {\n  content: any;\n  label?: string;\n  icon?: any; // TODO: define type for material-ui icons\n}\n\nexport interface TabsProps {\n  tabs: TabProps[];\n}\n\nconst useStyles = makeStyles<BackstageTheme>(theme => ({\n  root: {\n    flexGrow: 1,\n    width: '100%',\n  },\n  styledTabs: {\n    backgroundColor: theme.palette.background.paper,\n  },\n  appbar: {\n    boxShadow: 'none',\n    backgroundColor: theme.palette.background.paper,\n    paddingLeft: '10px',\n    paddingRight: '10px',\n  },\n}));\n\nexport const Tabs = ({ tabs }: TabsProps) => {\n  const classes = useStyles();\n  const [value, setValue] = useState([0, 0]); // [selectedChunkedNavIndex, selectedIndex]\n  const [navIndex, setNavIndex] = useState(0);\n  const [numberOfChunkedElement, setNumberOfChunkedElement] = useState(0);\n  const [chunkedTabs, setChunkedTabs] = useState<TabProps[][]>([[]]);\n  const wrapper = useRef() as MutableRefObject<HTMLDivElement>;\n\n  const { width } = useWindowSize();\n\n  const handleChange = (_: React.ChangeEvent<{}>, newValue: number) => {\n    setValue([navIndex, newValue]);\n  };\n\n  const navigateToPrevChunk = () => {\n    setNavIndex(navIndex - 1);\n  };\n\n  const navigateToNextChunk = () => {\n    setNavIndex(navIndex + 1);\n  };\n\n  const hasNextNavIndex = () => navIndex + 1 < chunkedTabs.length;\n\n  useEffect(() => {\n    // Each time the window is resized we calculate how many tabs we can render given the window width\n    const padding = 20; // The AppBar padding\n\n    const numberOfTabIcons = navIndex === 0 ? 1 : 2;\n    const wrapperWidth =\n      wrapper.current.offsetWidth - padding - numberOfTabIcons * 30;\n    const flattenIndex = value[0] * numberOfChunkedElement + value[1];\n    const newChunkedElementSize = Math.floor(wrapperWidth / 170);\n\n    setNumberOfChunkedElement(newChunkedElementSize);\n    setChunkedTabs(chunkArray(tabs, newChunkedElementSize));\n    setValue([\n      Math.floor(flattenIndex / newChunkedElementSize),\n      flattenIndex % newChunkedElementSize,\n    ]);\n    // eslint-disable-next-line\n  }, [width, tabs]);\n\n  const currentIndex = navIndex === value[0] ? value[1] : false;\n\n  return (\n    <div className={classes.root}>\n      <AppBar ref={wrapper} className={classes.appbar} position=\"static\">\n        <div>\n          <StyledTabs\n            value={currentIndex}\n            onChange={handleChange}\n            selectionFollowsFocus\n          >\n            {navIndex !== 0 && (\n              <StyledIcon\n                onClick={navigateToPrevChunk}\n                ariaLabel=\"navigate-before\"\n              >\n                <NavigateBeforeIcon />\n              </StyledIcon>\n            )}\n            {chunkedTabs[navIndex].map((tab, index) => (\n              <StyledTab\n                value={index}\n                isFirstIndex={index === 0}\n                isFirstNav={navIndex === 0}\n                key={index}\n                icon={tab.icon || undefined}\n                label={tab.label || undefined}\n              />\n            ))}\n            {hasNextNavIndex() && (\n              <StyledIcon\n                isNext\n                onClick={navigateToNextChunk}\n                ariaLabel=\"navigate-next\"\n              >\n                <NavigateNextIcon />\n              </StyledIcon>\n            )}\n          </StyledTabs>\n        </div>\n      </AppBar>\n      {currentIndex !== false ? (\n        chunkedTabs[navIndex].map((tab, index) => (\n          <TabPanel key={index} value={index} index={currentIndex}>\n            {tab.content}\n          </TabPanel>\n        ))\n      ) : (\n        // Render if the selected tab index is outside the current rendered chunked array\n        <TabPanel\n          key=\"panel_outside_chunked_array\"\n          value={value[1]}\n          index={value[1]}\n        >\n          {chunkedTabs[value[0]][value[1]].content}\n        </TabPanel>\n      )}\n    </div>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  Sparklines,\n  SparklinesLine,\n  SparklinesLineProps,\n  SparklinesProps,\n} from 'react-sparklines';\nimport { useTheme } from '@material-ui/core';\nimport { BackstageTheme } from '@backstage/theme';\n\nfunction color(data: number[], theme: BackstageTheme): string | undefined {\n  const lastNum = data[data.length - 1];\n  if (!lastNum) return undefined;\n  if (lastNum >= 0.9) return theme.palette.status.ok;\n  if (lastNum >= 0.5) return theme.palette.status.warning;\n  return theme.palette.status.error;\n}\n\nexport const TrendLine = (\n  props: SparklinesProps &\n    Pick<SparklinesLineProps, 'color'> & { title?: string },\n) => {\n  const theme = useTheme<BackstageTheme>();\n\n  if (!props.data) return null;\n  return (\n    <Sparklines width={120} height={30} min={0} max={1} {...props}>\n      {props.title && <title>{props.title}</title>}\n      <SparklinesLine color={props.color ?? color(props.data, theme)} />\n    </Sparklines>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * TODO favoriteable capability\n */\n\nimport React, { ComponentType, PropsWithChildren } from 'react';\nimport { Typography, makeStyles } from '@material-ui/core';\nimport { Helmet } from 'react-helmet';\n\nconst useStyles = (props: ContentHeaderProps) =>\n  makeStyles(theme => ({\n    container: {\n      width: '100%',\n      display: 'flex',\n      flexDirection: 'row',\n      flexWrap: 'wrap',\n      justifyContent: 'flex-end',\n      alignItems: 'center',\n      marginBottom: theme.spacing(2),\n      textAlign: props.textAlign,\n    },\n    leftItemsBox: {\n      flex: '1 1 auto',\n      minWidth: 0,\n      overflow: 'visible',\n    },\n    rightItemsBox: {\n      flex: '0 1 auto',\n      display: 'flex',\n      flexDirection: 'row',\n      flexWrap: 'wrap',\n      alignItems: 'center',\n      marginLeft: theme.spacing(1),\n      minWidth: 0,\n      overflow: 'visible',\n    },\n    description: {},\n    title: {\n      display: 'inline-flex',\n      marginBottom: 0,\n    },\n  }));\n\ntype ContentHeaderTitleProps = {\n  title?: string;\n  className?: string;\n};\n\nconst ContentHeaderTitle = ({\n  title = 'Unknown page',\n  className,\n}: ContentHeaderTitleProps) => (\n  <Typography\n    variant=\"h4\"\n    component=\"h2\"\n    className={className}\n    data-testid=\"header-title\"\n  >\n    {title}\n  </Typography>\n);\n\ntype ContentHeaderProps = {\n  title?: ContentHeaderTitleProps['title'];\n  titleComponent?: ComponentType;\n  description?: string;\n  textAlign?: 'left' | 'right' | 'center';\n};\n\nexport const ContentHeader = ({\n  description,\n  title,\n  titleComponent: TitleComponent = undefined,\n  children,\n  textAlign = 'left',\n}: PropsWithChildren<ContentHeaderProps>) => {\n  const classes = useStyles({ textAlign })();\n\n  const renderedTitle = TitleComponent ? (\n    <TitleComponent />\n  ) : (\n    <ContentHeaderTitle title={title} className={classes.title} />\n  );\n  return (\n    <>\n      <Helmet title={title} />\n      <div className={classes.container}>\n        <div className={classes.leftItemsBox}>\n          {renderedTitle}\n          {description && (\n            <Typography className={classes.description} variant=\"body2\">\n              {description}\n            </Typography>\n          )}\n        </div>\n        <div className={classes.rightItemsBox}>{children}</div>\n      </div>\n    </>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core';\nimport MicDropSvgUrl from './mic-drop.svg';\n\nconst useStyles = makeStyles(theme => ({\n  micDrop: {\n    maxWidth: '60%',\n    position: 'absolute',\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n    [theme.breakpoints.down('xs')]: {\n      maxWidth: '96%',\n      position: 'relative',\n      bottom: 'unset',\n      right: 'unset',\n      margin: `${theme.spacing(10)}px auto ${theme.spacing(4)}px`,\n    },\n  },\n}));\n\nexport const MicDrop = () => {\n  const classes = useStyles();\n  return (\n    <img\n      src={MicDropSvgUrl}\n      className={classes.micDrop}\n      alt=\"Girl dropping mic from her hands\"\n    />\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Typography, Link, Grid } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { BackstageTheme } from '@backstage/theme';\nimport { MicDrop } from './MicDrop';\nimport { useNavigate } from 'react-router';\nimport { useSupportConfig } from '../../hooks';\n\ninterface IErrorPageProps {\n  status: string;\n  statusMessage: string;\n  additionalInfo?: string;\n}\n\nconst useStyles = makeStyles<BackstageTheme>(theme => ({\n  container: {\n    padding: theme.spacing(8),\n    [theme.breakpoints.down('xs')]: {\n      padding: theme.spacing(2),\n    },\n  },\n  title: {\n    paddingBottom: theme.spacing(5),\n    [theme.breakpoints.down('xs')]: {\n      paddingBottom: theme.spacing(4),\n      fontSize: 32,\n    },\n  },\n  subtitle: {\n    color: theme.palette.textSubtle,\n  },\n}));\n\nexport const ErrorPage = ({\n  status,\n  statusMessage,\n  additionalInfo,\n}: IErrorPageProps) => {\n  const classes = useStyles();\n  const navigate = useNavigate();\n  const support = useSupportConfig();\n\n  return (\n    <Grid container spacing={0} className={classes.container}>\n      <MicDrop />\n      <Grid item xs={12} sm={8} md={4}>\n        <Typography variant=\"body1\" className={classes.subtitle}>\n          ERROR {status}: {statusMessage}\n        </Typography>\n        <Typography variant=\"body1\" className={classes.subtitle}>\n          {additionalInfo}\n        </Typography>\n        <Typography variant=\"h2\" className={classes.title}>\n          Looks like someone dropped the mic!\n        </Typography>\n        <Typography variant=\"h6\">\n          <Link data-testid=\"go-back-link\" onClick={() => navigate(-1)}>\n            Go back\n          </Link>\n          ... or please{' '}\n          <Link href={support.url} rel=\"noopener noreferrer\">\n            contact support\n          </Link>{' '}\n          if you think this is a bug.\n        </Typography>\n      </Grid>\n    </Grid>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Box,\n  Breadcrumbs as MaterialBreadcrumbs,\n  List,\n  ListItem,\n  Popover,\n  Typography,\n  withStyles,\n} from '@material-ui/core';\nimport React, { ComponentProps, Fragment } from 'react';\n\ntype Props = ComponentProps<typeof MaterialBreadcrumbs>;\n\nconst ClickableText = withStyles({\n  root: {\n    textDecoration: 'underline',\n    cursor: 'pointer',\n  },\n})(Typography);\n\nconst StyledBox = withStyles({\n  root: {\n    textDecoration: 'underline',\n    color: 'inherit',\n  },\n})(Box);\n\nexport const Breadcrumbs = ({ children, ...props }: Props) => {\n  const [anchorEl, setAnchorEl] = React.useState<HTMLButtonElement | null>(\n    null,\n  );\n\n  const childrenArray = React.Children.toArray(children);\n\n  const [firstPage, secondPage, ...expandablePages] = childrenArray;\n  const currentPage = expandablePages.length\n    ? expandablePages.pop()\n    : childrenArray[childrenArray.length - 1];\n  const hasHiddenBreadcrumbs = childrenArray.length > 3;\n\n  const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const open = Boolean(anchorEl);\n  return (\n    <Fragment>\n      <MaterialBreadcrumbs aria-label=\"breadcrumb\" {...props}>\n        {childrenArray.length > 1 && <StyledBox clone>{firstPage}</StyledBox>}\n        {childrenArray.length > 2 && <StyledBox clone>{secondPage}</StyledBox>}\n        {hasHiddenBreadcrumbs && (\n          <ClickableText onClick={handleClick}>...</ClickableText>\n        )}\n        <Box style={{ fontStyle: 'italic' }}>{currentPage}</Box>\n      </MaterialBreadcrumbs>\n      <Popover\n        open={open}\n        anchorEl={anchorEl}\n        onClose={handleClose}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'left',\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'left',\n        }}\n      >\n        <List>\n          {expandablePages.map((pageLink, index) => (\n            <ListItem key={index} button>\n              <StyledBox clone>{pageLink}</StyledBox>\n            </ListItem>\n          ))}\n        </List>\n      </Popover>\n    </Fragment>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useApi, configApiRef } from '@backstage/core-plugin-api';\nimport { BackstageTheme } from '@backstage/theme';\nimport { Box, Grid, makeStyles, Tooltip, Typography } from '@material-ui/core';\nimport React, { CSSProperties, PropsWithChildren, ReactNode } from 'react';\nimport { Helmet } from 'react-helmet';\nimport { Link } from '../../components/Link';\nimport { Breadcrumbs } from '../Breadcrumbs';\n\nconst minHeaderHeight = 118;\n\nconst useStyles = makeStyles<BackstageTheme>(theme => ({\n  header: {\n    gridArea: 'pageHeader',\n    padding: theme.spacing(3),\n    minHeight: minHeaderHeight,\n    width: '100%',\n    boxShadow: '0 0 8px 3px rgba(20, 20, 20, 0.3)',\n    position: 'relative',\n    zIndex: 100,\n    display: 'flex',\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    alignItems: 'center',\n    backgroundImage: theme.page.backgroundImage,\n    backgroundPosition: 'center',\n    backgroundSize: 'cover',\n  },\n  leftItemsBox: {\n    maxWidth: '100%',\n    flexGrow: 1,\n    marginBottom: theme.spacing(1),\n  },\n  rightItemsBox: {\n    width: 'auto',\n  },\n  title: {\n    color: theme.palette.bursts.fontColor,\n    wordBreak: 'break-all',\n    fontSize: 'calc(24px + 6 * ((100vw - 320px) / 680))',\n    marginBottom: theme.spacing(1),\n  },\n  subtitle: {\n    color: 'rgba(255, 255, 255, 0.8)',\n    lineHeight: '1.0em',\n  },\n  type: {\n    textTransform: 'uppercase',\n    fontSize: 11,\n    opacity: 0.8,\n    marginBottom: theme.spacing(1),\n    color: theme.palette.bursts.fontColor,\n  },\n  breadcrumb: {\n    fontSize: 'calc(15px + 1 * ((100vw - 320px) / 680))',\n    color: theme.palette.bursts.fontColor,\n  },\n  breadcrumbType: {\n    fontSize: 'inherit',\n    opacity: 0.7,\n    marginRight: -theme.spacing(0.3),\n    marginBottom: theme.spacing(0.3),\n  },\n  breadcrumbTitle: {\n    fontSize: 'inherit',\n    marginLeft: -theme.spacing(0.3),\n    marginBottom: theme.spacing(0.3),\n  },\n}));\n\ntype HeaderStyles = ReturnType<typeof useStyles>;\n\ntype Props = {\n  component?: ReactNode;\n  pageTitleOverride?: string;\n  style?: CSSProperties;\n  subtitle?: ReactNode;\n  title: ReactNode;\n  tooltip?: string;\n  type?: string;\n  typeLink?: string;\n};\n\ntype TypeFragmentProps = {\n  classes: HeaderStyles;\n  pageTitle: string | ReactNode;\n  type?: Props['type'];\n  typeLink?: Props['typeLink'];\n};\n\ntype TitleFragmentProps = {\n  classes: HeaderStyles;\n  pageTitle: string | ReactNode;\n  tooltip?: Props['tooltip'];\n};\n\ntype SubtitleFragmentProps = {\n  classes: HeaderStyles;\n  subtitle?: Props['subtitle'];\n};\n\nconst TypeFragment = ({\n  type,\n  typeLink,\n  classes,\n  pageTitle,\n}: TypeFragmentProps) => {\n  if (!type) {\n    return null;\n  }\n\n  if (!typeLink) {\n    return <Typography className={classes.type}>{type}</Typography>;\n  }\n\n  return (\n    <Breadcrumbs className={classes.breadcrumb}>\n      <Link to={typeLink}>{type}</Link>\n      <Typography>{pageTitle}</Typography>\n    </Breadcrumbs>\n  );\n};\n\nconst TitleFragment = ({ pageTitle, classes, tooltip }: TitleFragmentProps) => {\n  const FinalTitle = (\n    <Typography className={classes.title} variant=\"h1\">\n      {pageTitle}\n    </Typography>\n  );\n\n  if (!tooltip) {\n    return FinalTitle;\n  }\n\n  return (\n    <Tooltip title={tooltip} placement=\"top-start\">\n      {FinalTitle}\n    </Tooltip>\n  );\n};\n\nconst SubtitleFragment = ({ classes, subtitle }: SubtitleFragmentProps) => {\n  if (!subtitle) {\n    return null;\n  }\n\n  if (typeof subtitle !== 'string') {\n    return <>{subtitle}</>;\n  }\n\n  return (\n    <Typography\n      className={classes.subtitle}\n      variant=\"subtitle2\"\n      component=\"span\"\n    >\n      {subtitle}\n    </Typography>\n  );\n};\n\nexport const Header = ({\n  children,\n  pageTitleOverride,\n  style,\n  subtitle,\n  title,\n  tooltip,\n  type,\n  typeLink,\n}: PropsWithChildren<Props>) => {\n  const classes = useStyles();\n  const configApi = useApi(configApiRef);\n  const appTitle = configApi.getOptionalString('app.title') || 'Backstage';\n  const documentTitle = pageTitleOverride || title;\n  const pageTitle = title || pageTitleOverride;\n  const titleTemplate = `${documentTitle} | %s | ${appTitle}`;\n  const defaultTitle = `${documentTitle} | ${appTitle}`;\n\n  return (\n    <>\n      <Helmet titleTemplate={titleTemplate} defaultTitle={defaultTitle} />\n      <header style={style} className={classes.header}>\n        <Box className={classes.leftItemsBox}>\n          <TypeFragment\n            classes={classes}\n            type={type}\n            typeLink={typeLink}\n            pageTitle={pageTitle}\n          />\n          <TitleFragment\n            classes={classes}\n            pageTitle={pageTitle}\n            tooltip={tooltip}\n          />\n          <SubtitleFragment classes={classes} subtitle={subtitle} />\n        </Box>\n        <Grid container className={classes.rightItemsBox} spacing={4}>\n          {children}\n        </Grid>\n      </header>\n    </>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Link, makeStyles, Typography, Grid } from '@material-ui/core';\nimport React from 'react';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    textAlign: 'left',\n  },\n  label: {\n    color: theme.palette.common.white,\n    fontWeight: 'bold',\n    letterSpacing: 0,\n    fontSize: theme.typography.fontSize,\n    marginBottom: theme.spacing(1) / 2,\n    lineHeight: 1,\n  },\n  value: {\n    color: 'rgba(255, 255, 255, 0.8)',\n    fontSize: theme.typography.fontSize,\n    lineHeight: 1,\n  },\n}));\n\ntype HeaderLabelContentProps = {\n  value: React.ReactNode;\n  className: string;\n};\n\nconst HeaderLabelContent = ({ value, className }: HeaderLabelContentProps) => (\n  <Typography className={className}>{value}</Typography>\n);\n\ntype HeaderLabelProps = {\n  label: string;\n  value?: HeaderLabelContentProps['value'];\n  url?: string;\n};\n\nexport const HeaderLabel = ({ label, value, url }: HeaderLabelProps) => {\n  const classes = useStyles();\n  const content = (\n    <HeaderLabelContent\n      className={classes.value}\n      value={value || '<Unknown>'}\n    />\n  );\n  return (\n    <Grid item>\n      <span className={classes.root}>\n        <Typography className={classes.label}>{label}</Typography>\n        {url ? <Link href={url}>{content}</Link> : content}\n      </span>\n    </Grid>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { HeaderLabel } from '../HeaderLabel';\nimport { ConfigApi, useApi, configApiRef } from '@backstage/core-plugin-api';\n\nconst timeFormat: Intl.DateTimeFormatOptions = {\n  hour: '2-digit',\n  minute: '2-digit',\n};\n\ntype TimeObj = {\n  time: string;\n  label: string;\n};\n\nfunction getTimes(configApi: ConfigApi) {\n  const d = new Date();\n  const lang = window.navigator.language;\n\n  const clocks: TimeObj[] = [];\n\n  if (!configApi.has('homepage.clocks')) {\n    return clocks;\n  }\n\n  const clockConfigs = configApi.getConfigArray('homepage.clocks');\n\n  for (const clock of clockConfigs) {\n    if (clock.has('label') && clock.has('timezone')) {\n      let label = clock.getString('label');\n\n      const options: Intl.DateTimeFormatOptions = {\n        timeZone: clock.getString('timezone'),\n        ...timeFormat,\n      };\n\n      try {\n        new Date().toLocaleString(lang, options);\n      } catch (e) {\n        // eslint-disable-next-line no-console\n        console.warn(\n          `The timezone ${options.timeZone} is invalid. Defaulting to GMT`,\n        );\n        options.timeZone = 'GMT';\n        label = 'GMT';\n      }\n\n      const time = d.toLocaleTimeString(lang, options);\n      clocks.push({ time, label });\n    }\n  }\n  return clocks;\n}\n\nexport const HomepageTimer = () => {\n  const configApi = useApi(configApiRef);\n\n  const defaultTimes: TimeObj[] = [];\n  const [clocks, setTimes] = React.useState(defaultTimes);\n\n  React.useEffect(() => {\n    setTimes(getTimes(configApi));\n\n    const intervalId = setInterval(() => {\n      setTimes(getTimes(configApi));\n    }, 1000);\n\n    return () => {\n      clearInterval(intervalId);\n    };\n  }, [configApi]);\n\n  if (clocks.length !== 0) {\n    return (\n      <>\n        {clocks.map(clock => (\n          <HeaderLabel\n            label={clock.label}\n            value={clock.time}\n            key={clock.label}\n          />\n        ))}\n      </>\n    );\n  }\n  return null;\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  createStyles,\n  makeStyles,\n  Typography,\n  WithStyles,\n} from '@material-ui/core';\nimport React from 'react';\nimport { BackstageTheme } from '../../../../theme/src';\n\nconst styles = (theme: BackstageTheme) =>\n  createStyles({\n    root: {\n      color: theme.palette.common.white,\n      padding: theme.spacing(2, 2, 3),\n      backgroundImage: theme.palette.bursts.gradient.linear,\n      backgroundPosition: 0,\n      backgroundSize: 'inherit',\n    },\n  });\n\nconst useStyles = makeStyles(styles);\n\nexport type ItemCardHeaderProps = Partial<WithStyles<typeof styles>> & {\n  /**\n   * A large title to show in the header, providing the main heading.\n   *\n   * Use this if you want to have the default styling and placement of a title.\n   */\n  title?: React.ReactNode;\n  /**\n   * A slightly smaller title to show in the header, providing additional\n   * details.\n   *\n   * Use this if you want to have the default styling and placement of a\n   * subtitle.\n   */\n  subtitle?: React.ReactNode;\n  /**\n   * Custom children to draw in the header.\n   *\n   * If the title and/or subtitle were specified, the children are drawn below\n   * those.\n   */\n  children?: React.ReactNode;\n};\n\n/**\n * A simple card header, rendering a default look for \"item cards\" - cards that\n * are arranged in a grid for users to select among several options.\n *\n * This component expects to be placed within a MUI <CardMedia>.\n *\n * Styles for the header can be overridden using the `classes` prop, e.g.:\n *\n * <code>\n *   <ItemCardHeader title=\"Hello\" classes={{ root: myClassName }} />\n * </code>\n */\nexport const ItemCardHeader = (props: ItemCardHeaderProps) => {\n  const { title, subtitle, children } = props;\n  const classes = useStyles(props);\n  return (\n    <div className={classes.root}>\n      {subtitle && (\n        <Typography variant=\"subtitle2\" component=\"h3\">\n          {subtitle}\n        </Typography>\n      )}\n      {title && (\n        <Typography variant=\"h6\" component=\"h4\">\n          {title}\n        </Typography>\n      )}\n      {children}\n    </div>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  Box,\n  Card,\n  CardActions,\n  CardContent,\n  CardMedia,\n  Chip,\n} from '@material-ui/core';\nimport React, { ReactNode } from 'react';\nimport { Button } from '../../components';\nimport { ItemCardHeader } from './ItemCardHeader';\n\ntype ItemCardProps = {\n  description?: string;\n  tags?: string[];\n  title: string;\n  /** @deprecated Use subtitle instead */\n  type?: string;\n  subtitle?: ReactNode;\n  label: string;\n  onClick?: () => void;\n  href?: string;\n};\n\n/**\n * This card type has been deprecated. Instead use plain MUI Card and helpers\n * where appropriate.\n *\n * <code>\n * <!--\n *   <Card>\n *     <CardMedia>\n *       <ItemCardHeader title=\"My Card\" subtitle=\"neat!\" />\n *     </CardMedia>\n *     <CardContent>\n *        Some text\n *     </CardContent>\n *     <CardActions>\n *       <Button color=\"primary\" to=\"https://backstage.io\">\n *         Get Started\n *       </Button>\n *     </CardActions>\n *   </Card>\n * -->\n * </code>\n *\n * @deprecated Use plain MUI <Card> and composable helpers instead.\n * @see https://material-ui.com/components/cards/\n */\nexport const ItemCard = ({\n  description,\n  tags,\n  title,\n  type,\n  subtitle,\n  label,\n  onClick,\n  href,\n}: ItemCardProps) => {\n  return (\n    <Card>\n      <CardMedia>\n        <ItemCardHeader title={title} subtitle={subtitle || type} />\n      </CardMedia>\n      <CardContent>\n        {tags?.length ? (\n          <Box>\n            {tags.map((tag, i) => (\n              <Chip size=\"small\" label={tag} key={i} />\n            ))}\n          </Box>\n        ) : null}\n        {description}\n      </CardContent>\n      <CardActions>\n        {!href && (\n          <Button to=\"#\" onClick={onClick} color=\"primary\">\n            {label}\n          </Button>\n        )}\n        {href && (\n          <Button to={href} color=\"primary\">\n            {label}\n          </Button>\n        )}\n      </CardActions>\n    </Card>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createStyles, makeStyles, Theme, WithStyles } from '@material-ui/core';\nimport React from 'react';\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'grid',\n      gridTemplateColumns: 'repeat(auto-fill, minmax(22em, 1fr))',\n      gridAutoRows: '1fr',\n      gridGap: theme.spacing(2),\n    },\n  });\n\nconst useStyles = makeStyles(styles);\n\nexport type ItemCardGridProps = Partial<WithStyles<typeof styles>> & {\n  /**\n   * The Card items of the grid.\n   */\n  children?: React.ReactNode;\n};\n\n/**\n * A default grid to use when arranging \"item cards\" - cards that let users\n * select among several options.\n *\n * The immediate children are expected to be MUI Card components.\n *\n * Styles for the grid can be overridden using the `classes` prop, e.g.:\n *\n * <code>\n *   <ItemCardGrid title=\"Hello\" classes={{ root: myClassName }} />\n * </code>\n *\n * This can be useful for e.g. overriding gridTemplateColumns to adapt the\n * minimum size of the cells to fit the content better.\n */\nexport const ItemCardGrid = (props: ItemCardGridProps) => {\n  const { children, ...otherProps } = props;\n  const classes = useStyles(otherProps);\n  return (\n    <div className={classes.root} {...otherProps}>\n      {children}\n    </div>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { PropsWithChildren } from 'react';\nimport { BackstageTheme } from '@backstage/theme';\nimport { makeStyles, ThemeProvider } from '@material-ui/core';\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    display: 'grid',\n    gridTemplateAreas:\n      \"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'\",\n    gridTemplateRows: 'max-content auto 1fr',\n    gridTemplateColumns: 'auto 1fr auto',\n    height: '100vh',\n    overflowY: 'auto',\n  },\n}));\n\ntype Props = {\n  themeId: string;\n};\n\nexport const Page = ({ themeId, children }: PropsWithChildren<Props>) => {\n  const classes = useStyles();\n  return (\n    <ThemeProvider\n      theme={(baseTheme: BackstageTheme) => ({\n        ...baseTheme,\n        page: baseTheme.getPageTheme({ themeId }),\n      })}\n    >\n      <div className={classes.root}>{children}</div>\n    </ThemeProvider>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { PropsWithChildren, ComponentProps } from 'react';\n\nimport { Header } from '../Header';\nimport { Page } from './Page';\n\ntype PageWithHeaderProps = ComponentProps<typeof Header> & {\n  themeId: string;\n};\n\nexport const PageWithHeader = ({\n  themeId,\n  children,\n  ...props\n}: PropsWithChildren<PageWithHeaderProps>) => (\n  <Page themeId={themeId}>\n    <Header {...props} />\n    {children}\n  </Page>\n);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createContext } from 'react';\n\nconst drawerWidthClosed = 72;\nconst iconPadding = 24;\nconst userBadgePadding = 18;\n\nexport const sidebarConfig = {\n  drawerWidthClosed,\n  drawerWidthOpen: 224,\n  // As per NN/g's guidance on timing for exposing hidden content\n  // See https://www.nngroup.com/articles/timing-exposing-content/\n  defaultOpenDelayMs: 100,\n  defaultCloseDelayMs: 0,\n  defaultFadeDuration: 200,\n  logoHeight: 32,\n  iconContainerWidth: drawerWidthClosed,\n  iconSize: drawerWidthClosed - iconPadding * 2,\n  iconPadding,\n  selectedIndicatorWidth: 3,\n  userBadgePadding,\n  userBadgeDiameter: drawerWidthClosed - userBadgePadding * 2,\n};\n\nexport const SIDEBAR_INTRO_LOCAL_STORAGE =\n  '@backstage/core/sidebar-intro-dismissed';\n\nexport type SidebarContextType = {\n  isOpen: boolean;\n};\n\nexport const SidebarContext = createContext<SidebarContextType>({\n  isOpen: false,\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nenum LocalStorageKeys {\n  SIDEBAR_PIN_STATE = 'sidebarPinState',\n}\n\nexport const LocalStorage = {\n  getSidebarPinState(): boolean {\n    let value;\n    try {\n      value = JSON.parse(\n        window.localStorage.getItem(LocalStorageKeys.SIDEBAR_PIN_STATE) ||\n          'false',\n      );\n    } catch {\n      return false;\n    }\n    return !!value;\n  },\n  setSidebarPinState(state: boolean) {\n    return window.localStorage.setItem(\n      LocalStorageKeys.SIDEBAR_PIN_STATE,\n      JSON.stringify(state),\n    );\n  },\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles } from '@material-ui/core';\nimport React, {\n  createContext,\n  PropsWithChildren,\n  useEffect,\n  useState,\n} from 'react';\nimport { sidebarConfig } from './config';\nimport { BackstageTheme } from '@backstage/theme';\nimport { LocalStorage } from './localStorage';\n\nconst useStyles = makeStyles<BackstageTheme, { isPinned: boolean }>({\n  root: {\n    width: '100%',\n    minHeight: '100%',\n    transition: 'padding-left 0.1s ease-out',\n    paddingLeft: ({ isPinned }) =>\n      isPinned\n        ? sidebarConfig.drawerWidthOpen\n        : sidebarConfig.drawerWidthClosed,\n  },\n});\n\nexport type SidebarPinStateContextType = {\n  isPinned: boolean;\n  toggleSidebarPinState: () => any;\n};\n\nexport const SidebarPinStateContext = createContext<SidebarPinStateContextType>(\n  {\n    isPinned: false,\n    toggleSidebarPinState: () => {},\n  },\n);\n\nexport const SidebarPage = (props: PropsWithChildren<{}>) => {\n  const [isPinned, setIsPinned] = useState(() =>\n    LocalStorage.getSidebarPinState(),\n  );\n\n  useEffect(() => {\n    LocalStorage.setSidebarPinState(isPinned);\n  }, [isPinned]);\n\n  const toggleSidebarPinState = () => setIsPinned(!isPinned);\n\n  const classes = useStyles({ isPinned });\n  return (\n    <SidebarPinStateContext.Provider\n      value={{\n        isPinned,\n        toggleSidebarPinState,\n      }}\n    >\n      <div className={classes.root}>{props.children}</div>\n    </SidebarPinStateContext.Provider>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles, useMediaQuery } from '@material-ui/core';\nimport clsx from 'clsx';\nimport React, { useRef, useState, useContext, PropsWithChildren } from 'react';\nimport { sidebarConfig, SidebarContext } from './config';\nimport { BackstageTheme } from '@backstage/theme';\nimport { SidebarPinStateContext } from './Page';\n\nconst useStyles = makeStyles<BackstageTheme>(theme => ({\n  root: {\n    zIndex: 1000,\n    position: 'relative',\n    overflow: 'visible',\n    width: theme.spacing(7) + 1,\n  },\n  drawer: {\n    display: 'flex',\n    flexFlow: 'column nowrap',\n    alignItems: 'flex-start',\n    position: 'fixed',\n    left: 0,\n    top: 0,\n    bottom: 0,\n    padding: 0,\n    background: theme.palette.navigation.background,\n    overflowX: 'hidden',\n    msOverflowStyle: 'none',\n    scrollbarWidth: 'none',\n    width: sidebarConfig.drawerWidthClosed,\n    borderRight: `1px solid #383838`,\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.shortest,\n    }),\n    '& > *': {\n      flexShrink: 0,\n    },\n    '&::-webkit-scrollbar': {\n      display: 'none',\n    },\n  },\n  drawerOpen: {\n    width: sidebarConfig.drawerWidthOpen,\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.shorter,\n    }),\n  },\n}));\n\nenum State {\n  Closed,\n  Idle,\n  Open,\n}\n\ntype Props = {\n  openDelayMs?: number;\n  closeDelayMs?: number;\n};\n\nexport const Sidebar = ({\n  openDelayMs = sidebarConfig.defaultOpenDelayMs,\n  closeDelayMs = sidebarConfig.defaultCloseDelayMs,\n  children,\n}: PropsWithChildren<Props>) => {\n  const classes = useStyles();\n  const isSmallScreen = useMediaQuery<BackstageTheme>(theme =>\n    theme.breakpoints.down('md'),\n  );\n  const [state, setState] = useState(State.Closed);\n  const hoverTimerRef = useRef<number>();\n  const { isPinned } = useContext(SidebarPinStateContext);\n\n  const handleOpen = () => {\n    if (isPinned) {\n      return;\n    }\n    if (hoverTimerRef.current) {\n      clearTimeout(hoverTimerRef.current);\n      hoverTimerRef.current = undefined;\n    }\n    if (state !== State.Open && !isSmallScreen) {\n      hoverTimerRef.current = window.setTimeout(() => {\n        hoverTimerRef.current = undefined;\n        setState(State.Open);\n      }, openDelayMs);\n\n      setState(State.Idle);\n    }\n  };\n\n  const handleClose = () => {\n    if (isPinned) {\n      return;\n    }\n    if (hoverTimerRef.current) {\n      clearTimeout(hoverTimerRef.current);\n      hoverTimerRef.current = undefined;\n    }\n    if (state === State.Idle) {\n      setState(State.Closed);\n    } else if (state === State.Open) {\n      hoverTimerRef.current = window.setTimeout(() => {\n        hoverTimerRef.current = undefined;\n        setState(State.Closed);\n      }, closeDelayMs);\n    }\n  };\n\n  const isOpen = (state === State.Open && !isSmallScreen) || isPinned;\n\n  return (\n    <div\n      className={classes.root}\n      onMouseEnter={handleOpen}\n      onFocus={handleOpen}\n      onMouseLeave={handleClose}\n      onBlur={handleClose}\n      data-testid=\"sidebar-root\"\n    >\n      <SidebarContext.Provider\n        value={{\n          isOpen,\n        }}\n      >\n        <div\n          className={clsx(classes.drawer, {\n            [classes.drawerOpen]: isOpen,\n          })}\n        >\n          {children}\n        </div>\n      </SidebarContext.Provider>\n    </div>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { IconComponent } from '@backstage/core-plugin-api';\nimport { BackstageTheme } from '@backstage/theme';\nimport {\n  Badge,\n  makeStyles,\n  styled,\n  TextField,\n  Theme,\n  Typography,\n} from '@material-ui/core';\nimport { CreateCSSProperties } from '@material-ui/core/styles/withStyles';\nimport SearchIcon from '@material-ui/icons/Search';\nimport clsx from 'clsx';\nimport React, {\n  forwardRef,\n  KeyboardEventHandler,\n  ReactNode,\n  useContext,\n  useState,\n} from 'react';\nimport {\n  Link,\n  NavLinkProps,\n  useLocation,\n  useResolvedPath,\n} from 'react-router-dom';\nimport { sidebarConfig, SidebarContext } from './config';\n\nconst useStyles = makeStyles<BackstageTheme>(theme => {\n  const {\n    selectedIndicatorWidth,\n    drawerWidthClosed,\n    drawerWidthOpen,\n    iconContainerWidth,\n  } = sidebarConfig;\n  return {\n    root: {\n      color: theme.palette.navigation.color,\n      display: 'flex',\n      flexFlow: 'row nowrap',\n      alignItems: 'center',\n      height: 48,\n      cursor: 'pointer',\n    },\n    buttonItem: {\n      background: 'none',\n      border: 'none',\n      width: 'auto',\n      margin: 0,\n      padding: 0,\n      textAlign: 'inherit',\n      font: 'inherit',\n    },\n    closed: {\n      width: drawerWidthClosed,\n      justifyContent: 'center',\n    },\n    open: {\n      width: drawerWidthOpen,\n    },\n    label: {\n      // XXX (@koroeskohr): I can't seem to achieve the desired font-weight from the designs\n      fontWeight: 'bold',\n      whiteSpace: 'nowrap',\n      lineHeight: 'auto',\n      flex: '3 1 auto',\n      width: '110px',\n      overflow: 'hidden',\n      'text-overflow': 'ellipsis',\n    },\n    iconContainer: {\n      boxSizing: 'border-box',\n      height: '100%',\n      width: iconContainerWidth,\n      marginRight: -theme.spacing(2),\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n    },\n    searchRoot: {\n      marginBottom: 12,\n    },\n    searchField: {\n      color: '#b5b5b5',\n      fontWeight: 'bold',\n      fontSize: theme.typography.fontSize,\n    },\n    searchFieldHTMLInput: {\n      padding: `${theme.spacing(2)} 0 ${theme.spacing(2)}`,\n    },\n    searchContainer: {\n      width: drawerWidthOpen - iconContainerWidth,\n    },\n    secondaryAction: {\n      width: theme.spacing(6),\n      textAlign: 'center',\n      marginRight: theme.spacing(1),\n    },\n    selected: {\n      '&$root': {\n        borderLeft: `solid ${selectedIndicatorWidth}px ${theme.palette.navigation.indicator}`,\n        color: theme.palette.navigation.selectedColor,\n      },\n      '&$closed': {\n        width: drawerWidthClosed - selectedIndicatorWidth,\n      },\n      '& $iconContainer': {\n        marginLeft: -selectedIndicatorWidth,\n      },\n    },\n  };\n});\n\ntype SidebarItemBaseProps = {\n  icon: IconComponent;\n  text?: string;\n  hasNotifications?: boolean;\n  children?: ReactNode;\n  className?: string;\n};\n\ntype SidebarItemButtonProps = SidebarItemBaseProps & {\n  onClick: (ev: React.MouseEvent) => void;\n};\n\ntype SidebarItemLinkProps = SidebarItemBaseProps & {\n  to: string;\n  onClick?: (ev: React.MouseEvent) => void;\n} & NavLinkProps;\n\ntype SidebarItemProps = SidebarItemButtonProps | SidebarItemLinkProps;\n\nfunction isButtonItem(\n  props: SidebarItemProps,\n): props is SidebarItemButtonProps {\n  return (props as SidebarItemLinkProps).to === undefined;\n}\n\n// TODO(Rugvip): Remove this once NavLink is updated in react-router-dom.\n//               This is needed because react-router doesn't handle the path comparison\n//               properly yet, matching for example /foobar with /foo.\nexport const WorkaroundNavLink = React.forwardRef<\n  HTMLAnchorElement,\n  NavLinkProps\n>(function WorkaroundNavLinkWithRef(\n  {\n    to,\n    end,\n    style,\n    className,\n    activeStyle,\n    caseSensitive,\n    activeClassName = 'active',\n    'aria-current': ariaCurrentProp = 'page',\n    ...rest\n  },\n  ref,\n) {\n  let { pathname: locationPathname } = useLocation();\n  let { pathname: toPathname } = useResolvedPath(to);\n\n  if (!caseSensitive) {\n    locationPathname = locationPathname.toLowerCase();\n    toPathname = toPathname.toLowerCase();\n  }\n\n  let isActive = locationPathname === toPathname;\n  if (!isActive && !end) {\n    // This is the behavior that is different from the original NavLink\n    isActive = locationPathname.startsWith(`${toPathname}/`);\n  }\n\n  const ariaCurrent = isActive ? ariaCurrentProp : undefined;\n\n  return (\n    <Link\n      {...rest}\n      to={to}\n      ref={ref}\n      aria-current={ariaCurrent}\n      style={{ ...style, ...(isActive ? activeStyle : undefined) }}\n      className={clsx([className, isActive ? activeClassName : undefined])}\n    />\n  );\n});\n\nexport const SidebarItem = forwardRef<any, SidebarItemProps>((props, ref) => {\n  const {\n    icon: Icon,\n    text,\n    hasNotifications = false,\n    onClick,\n    children,\n    className,\n    ...navLinkProps\n  } = props;\n  const classes = useStyles();\n  // XXX (@koroeskohr): unsure this is optimal. But I just really didn't want to have the item component\n  // depend on the current location, and at least have it being optionally forced to selected.\n  // Still waiting on a Q answered to fine tune the implementation\n  const { isOpen } = useContext(SidebarContext);\n\n  const itemIcon = (\n    <Badge\n      color=\"secondary\"\n      variant=\"dot\"\n      overlap=\"circular\"\n      invisible={!hasNotifications}\n    >\n      <Icon fontSize=\"small\" />\n    </Badge>\n  );\n\n  const closedContent = itemIcon;\n\n  const openContent = (\n    <>\n      <div data-testid=\"login-button\" className={classes.iconContainer}>\n        {itemIcon}\n      </div>\n      {text && (\n        <Typography variant=\"subtitle2\" className={classes.label}>\n          {text}\n        </Typography>\n      )}\n      <div className={classes.secondaryAction}>{children}</div>\n    </>\n  );\n\n  const content = isOpen ? openContent : closedContent;\n\n  const childProps = {\n    onClick,\n    className: clsx(\n      className,\n      classes.root,\n      isOpen ? classes.open : classes.closed,\n      isButtonItem(props) && classes.buttonItem,\n    ),\n  };\n\n  if (isButtonItem(props)) {\n    return (\n      <button aria-label={text} {...childProps} ref={ref}>\n        {content}\n      </button>\n    );\n  }\n\n  return (\n    <WorkaroundNavLink\n      {...childProps}\n      activeClassName={classes.selected}\n      to={props.to}\n      ref={ref}\n      aria-label={text ? text : props.to}\n      {...navLinkProps}\n    >\n      {content}\n    </WorkaroundNavLink>\n  );\n});\n\ntype SidebarSearchFieldProps = {\n  onSearch: (input: string) => void;\n  to?: string;\n};\n\nexport const SidebarSearchField = (props: SidebarSearchFieldProps) => {\n  const [input, setInput] = useState('');\n  const classes = useStyles();\n\n  const search = () => {\n    props.onSearch(input);\n    setInput('');\n  };\n\n  const handleEnter: KeyboardEventHandler = ev => {\n    if (ev.key === 'Enter') {\n      search();\n    }\n  };\n\n  const handleInput = (ev: React.ChangeEvent<HTMLInputElement>) => {\n    setInput(ev.target.value);\n  };\n\n  const handleInputClick = (ev: React.MouseEvent<HTMLInputElement>) => {\n    // Clicking into the search fields shouldn't navigate to the search page\n    ev.preventDefault();\n    ev.stopPropagation();\n  };\n\n  const handleItemClick = (ev: React.MouseEvent) => {\n    // Clicking on the search icon while should execute a query with the current field content\n    search();\n    ev.preventDefault();\n  };\n\n  return (\n    <div className={classes.searchRoot}>\n      <SidebarItem icon={SearchIcon} to={props.to} onClick={handleItemClick}>\n        <TextField\n          placeholder=\"Search\"\n          value={input}\n          onClick={handleInputClick}\n          onChange={handleInput}\n          onKeyDown={handleEnter}\n          className={classes.searchContainer}\n          InputProps={{\n            disableUnderline: true,\n            className: classes.searchField,\n          }}\n          inputProps={{\n            className: classes.searchFieldHTMLInput,\n          }}\n        />\n      </SidebarItem>\n    </div>\n  );\n};\n\nexport const SidebarSpace = styled('div')({\n  flex: 1,\n});\n\nexport const SidebarSpacer = styled('div')({\n  height: 8,\n});\n\nexport const SidebarDivider = styled('hr')({\n  height: 1,\n  width: '100%',\n  background: '#383838',\n  border: 'none',\n  margin: '12px 0px',\n});\n\nconst styledScrollbar = (theme: Theme): CreateCSSProperties => ({\n  overflowY: 'auto',\n  '&::-webkit-scrollbar': {\n    backgroundColor: theme.palette.background.default,\n    width: '5px',\n    borderRadius: '5px',\n  },\n  '&::-webkit-scrollbar-thumb': {\n    backgroundColor: theme.palette.text.hint,\n    borderRadius: '5px',\n  },\n});\n\nexport const SidebarScrollWrapper = styled('div')(({ theme }) => {\n  const scrollbarStyles = styledScrollbar(theme);\n  return {\n    flex: '0 1 auto',\n    overflowX: 'hidden',\n    // 5px space to the right of the scrollbar\n    width: 'calc(100% - 5px)',\n    // Display at least one item in the container\n    // Question: Can this be a config/theme variable - if so, which? :/\n    minHeight: '48px',\n    overflowY: 'hidden',\n    '@media (hover: none)': scrollbarStyles,\n    '&:hover': scrollbarStyles,\n  };\n});\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useContext, useState } from 'react';\nimport { useLocalStorage } from 'react-use';\nimport { Link, Typography, makeStyles, Collapse } from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { BackstageTheme } from '@backstage/theme';\nimport {\n  SIDEBAR_INTRO_LOCAL_STORAGE,\n  SidebarContext,\n  sidebarConfig,\n} from './config';\nimport { SidebarDivider } from './Items';\n\nconst useStyles = makeStyles<BackstageTheme>(theme => ({\n  introCard: {\n    color: '#b5b5b5',\n    // XXX (@koroeskohr): should I be using a Mui theme variable?\n    fontSize: 12,\n    width: sidebarConfig.drawerWidthOpen,\n    marginTop: 18,\n    marginBottom: 12,\n    paddingLeft: sidebarConfig.iconPadding,\n    paddingRight: sidebarConfig.iconPadding,\n  },\n  introDismiss: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    alignItems: 'center',\n    marginTop: 12,\n  },\n  introDismissLink: {\n    color: '#dddddd',\n    display: 'flex',\n    alignItems: 'center',\n    marginBottom: 4,\n    '&:hover': {\n      color: theme.palette.linkHover,\n      transition: theme.transitions.create('color', {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.shortest,\n      }),\n    },\n  },\n  introDismissText: {\n    fontSize: '0.7rem',\n    fontWeight: 'bold',\n    textTransform: 'uppercase',\n    letterSpacing: 1,\n  },\n  introDismissIcon: {\n    width: 18,\n    height: 18,\n    marginRight: 12,\n  },\n}));\n\ntype IntroCardProps = {\n  text: string;\n  onClose: () => void;\n};\n\nexport const IntroCard = (props: IntroCardProps) => {\n  const classes = useStyles();\n  const { text, onClose } = props;\n  const handleClose = () => onClose();\n\n  return (\n    <div className={classes.introCard}>\n      <Typography variant=\"subtitle2\">{text}</Typography>\n      <div className={classes.introDismiss}>\n        <Link\n          component=\"button\"\n          onClick={handleClose}\n          underline=\"none\"\n          className={classes.introDismissLink}\n        >\n          <CloseIcon className={classes.introDismissIcon} />\n          <Typography component=\"span\" className={classes.introDismissText}>\n            Dismiss\n          </Typography>\n        </Link>\n      </div>\n    </div>\n  );\n};\n\ntype SidebarIntroLocalStorage = {\n  starredItemsDismissed: boolean;\n  recentlyViewedItemsDismissed: boolean;\n};\n\ntype SidebarIntroCardProps = {\n  text: string;\n  onDismiss: () => void;\n};\n\nconst SidebarIntroCard = (props: SidebarIntroCardProps) => {\n  const { text, onDismiss } = props;\n  const [collapsing, setCollapsing] = useState(false);\n  const startDismissing = () => {\n    setCollapsing(true);\n  };\n  return (\n    <Collapse in={!collapsing} onExited={onDismiss}>\n      <IntroCard text={text} onClose={startDismissing} />\n    </Collapse>\n  );\n};\n\nconst starredIntroText = `Fun fact! As you explore all the awesome plugins in Backstage, you can actually pin them to this side nav.\nKeep an eye out for the little star icon () next to the plugin name and give it a click!`;\nconst recentlyViewedIntroText =\n  'And your recently viewed plugins will pop up here!';\n\nexport const SidebarIntro = () => {\n  const { isOpen } = useContext(SidebarContext);\n  const defaultValue = {\n    starredItemsDismissed: false,\n    recentlyViewedItemsDismissed: false,\n  };\n  const [dismissedIntro, setDismissedIntro] =\n    useLocalStorage<SidebarIntroLocalStorage>(SIDEBAR_INTRO_LOCAL_STORAGE);\n\n  const { starredItemsDismissed, recentlyViewedItemsDismissed } =\n    dismissedIntro ?? {};\n\n  const dismissStarred = () => {\n    setDismissedIntro(state => ({\n      ...defaultValue,\n      ...state,\n      starredItemsDismissed: true,\n    }));\n  };\n  const dismissRecentlyViewed = () => {\n    setDismissedIntro(state => ({\n      ...defaultValue,\n      ...state,\n      recentlyViewedItemsDismissed: true,\n    }));\n  };\n\n  if (!isOpen) {\n    return null;\n  }\n\n  return (\n    <>\n      {!starredItemsDismissed && (\n        <>\n          <SidebarIntroCard\n            text={starredIntroText}\n            onDismiss={dismissStarred}\n          />\n          <SidebarDivider />\n        </>\n      )}\n      {!recentlyViewedItemsDismissed && (\n        <SidebarIntroCard\n          text={recentlyViewedIntroText}\n          onDismiss={dismissRecentlyViewed}\n        />\n      )}\n    </>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { Grid, makeStyles } from '@material-ui/core';\n\nexport const useStyles = makeStyles({\n  container: {\n    padding: 0,\n    listStyle: 'none',\n  },\n  item: {\n    display: 'flex',\n    flexDirection: 'column',\n    width: '100%',\n    maxWidth: '400px',\n    margin: 0,\n    padding: 0,\n  },\n});\n\nexport const GridItem = ({ children }: { children: JSX.Element }) => {\n  const classes = useStyles();\n\n  return (\n    <Grid component=\"li\" item classes={classes}>\n      {children}\n    </Grid>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Typography, Button } from '@material-ui/core';\nimport { InfoCard } from '../InfoCard/InfoCard';\nimport {\n  ProviderComponent,\n  ProviderLoader,\n  SignInProvider,\n  SignInProviderConfig,\n} from './types';\nimport { useApi, errorApiRef } from '@backstage/core-plugin-api';\nimport { GridItem } from './styles';\n\nconst Component: ProviderComponent = ({ config, onResult }) => {\n  const { apiRef, title, message } = config as SignInProviderConfig;\n  const authApi = useApi(apiRef);\n  const errorApi = useApi(errorApiRef);\n\n  const handleLogin = async () => {\n    try {\n      const identity = await authApi.getBackstageIdentity({\n        instantPopup: true,\n      });\n\n      const profile = await authApi.getProfile();\n      onResult({\n        userId: identity!.id,\n        profile: profile!,\n        getIdToken: () => {\n          return authApi.getBackstageIdentity().then(i => i!.idToken);\n        },\n        signOut: async () => {\n          await authApi.signOut();\n        },\n      });\n    } catch (error) {\n      errorApi.post(error);\n    }\n  };\n\n  return (\n    <GridItem>\n      <InfoCard\n        variant=\"fullHeight\"\n        title={title}\n        actions={\n          <Button color=\"primary\" variant=\"outlined\" onClick={handleLogin}>\n            Sign In\n          </Button>\n        }\n      >\n        <Typography variant=\"body1\">{message}</Typography>\n      </InfoCard>\n    </GridItem>\n  );\n};\n\nconst loader: ProviderLoader = async (apis, apiRef) => {\n  const authApi = apis.get(apiRef)!;\n\n  const identity = await authApi.getBackstageIdentity({\n    optional: true,\n  });\n\n  if (!identity) {\n    return undefined;\n  }\n\n  const profile = await authApi.getProfile();\n\n  return {\n    userId: identity.id,\n    profile: profile!,\n    getIdToken: () =>\n      authApi.getBackstageIdentity().then(i => i!.token ?? i!.idToken),\n    signOut: async () => {\n      await authApi.signOut();\n    },\n  };\n};\n\nexport const commonProvider: SignInProvider = { Component, loader };\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Typography, Button } from '@material-ui/core';\nimport { InfoCard } from '../InfoCard/InfoCard';\nimport { GridItem } from './styles';\nimport { ProviderComponent, ProviderLoader, SignInProvider } from './types';\n\nconst result = {\n  userId: 'guest',\n  profile: {\n    email: 'guest@example.com',\n    displayName: 'Guest',\n  },\n};\n\nconst Component: ProviderComponent = ({ onResult }) => (\n  <GridItem>\n    <InfoCard\n      title=\"Guest\"\n      variant=\"fullHeight\"\n      actions={\n        <Button\n          color=\"primary\"\n          variant=\"outlined\"\n          onClick={() => onResult(result)}\n        >\n          Enter\n        </Button>\n      }\n    >\n      <Typography variant=\"body1\">\n        Enter as a Guest User.\n        <br />\n        You will not have a verified identity,\n        <br />\n        meaning some features might be unavailable.\n      </Typography>\n    </InfoCard>\n  </GridItem>\n);\n\nconst loader: ProviderLoader = async () => {\n  return result;\n};\n\nexport const guestProvider: SignInProvider = { Component, loader };\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { useForm } from 'react-hook-form';\nimport {\n  Typography,\n  Button,\n  FormControl,\n  TextField,\n  FormHelperText,\n  makeStyles,\n} from '@material-ui/core';\nimport isEmpty from 'lodash/isEmpty';\nimport { InfoCard } from '../InfoCard/InfoCard';\nimport { ProviderComponent, ProviderLoader, SignInProvider } from './types';\nimport { GridItem } from './styles';\n\n// accept base64url format according to RFC7515 (https://tools.ietf.org/html/rfc7515#section-3)\nconst ID_TOKEN_REGEX = /^[a-z0-9_\\-]+\\.[a-z0-9_\\-]+\\.[a-z0-9_\\-]+$/i;\n\nconst useFormStyles = makeStyles(theme => ({\n  form: {\n    display: 'flex',\n    flexFlow: 'column nowrap',\n  },\n  button: {\n    alignSelf: 'center',\n    marginTop: theme.spacing(2),\n  },\n}));\n\ntype Data = {\n  userId: string;\n  idToken?: string;\n};\n\nconst Component: ProviderComponent = ({ onResult }) => {\n  const classes = useFormStyles();\n  const { register, handleSubmit, errors, formState } = useForm<Data>({\n    mode: 'onChange',\n  });\n\n  const handleResult = ({ userId, idToken }: Data) => {\n    onResult({\n      userId,\n      profile: {\n        email: `${userId}@example.com`,\n      },\n      getIdToken: idToken ? async () => idToken : undefined,\n    });\n  };\n\n  return (\n    <GridItem>\n      <InfoCard title=\"Custom User\" variant=\"fullHeight\">\n        <Typography variant=\"body1\">\n          Enter your own User ID and credentials.\n          <br />\n          This selection will not be stored.\n        </Typography>\n\n        <form className={classes.form} onSubmit={handleSubmit(handleResult)}>\n          <FormControl>\n            <TextField\n              name=\"userId\"\n              label=\"User ID\"\n              margin=\"normal\"\n              error={Boolean(errors.userId)}\n              inputRef={register({ required: true })}\n            />\n            {errors.userId && (\n              <FormHelperText error>{errors.userId.message}</FormHelperText>\n            )}\n          </FormControl>\n          <FormControl>\n            <TextField\n              name=\"idToken\"\n              label=\"ID Token (optional)\"\n              margin=\"normal\"\n              autoComplete=\"off\"\n              error={Boolean(errors.idToken)}\n              inputRef={register({\n                required: false,\n                validate: token =>\n                  !token ||\n                  ID_TOKEN_REGEX.test(token) ||\n                  'Token is not a valid OpenID Connect JWT Token',\n              })}\n            />\n            {errors.idToken && (\n              <FormHelperText error>{errors.idToken.message}</FormHelperText>\n            )}\n          </FormControl>\n          <Button\n            type=\"submit\"\n            color=\"primary\"\n            variant=\"outlined\"\n            className={classes.button}\n            disabled={!formState?.isDirty || !isEmpty(errors)}\n          >\n            Continue\n          </Button>\n        </form>\n      </InfoCard>\n    </GridItem>\n  );\n};\n\n// Custom provider doesn't store credentials\nconst loader: ProviderLoader = async () => undefined;\n\nexport const customProvider: SignInProvider = { Component, loader };\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useLayoutEffect, useState, useMemo, useCallback } from 'react';\nimport {\n  SignInPageProps,\n  SignInResult,\n  useApi,\n  useApiHolder,\n  errorApiRef,\n} from '@backstage/core-plugin-api';\nimport {\n  IdentityProviders,\n  SignInProvider,\n  SignInProviderConfig,\n} from './types';\nimport { commonProvider } from './commonProvider';\nimport { guestProvider } from './guestProvider';\nimport { customProvider } from './customProvider';\n\nconst PROVIDER_STORAGE_KEY = '@backstage/core:SignInPage:provider';\n\nexport type SignInProviderType = {\n  [key: string]: {\n    components: SignInProvider;\n    id: string;\n    config?: SignInProviderConfig;\n  };\n};\n\nconst signInProviders: { [key: string]: SignInProvider } = {\n  guest: guestProvider,\n  custom: customProvider,\n  common: commonProvider,\n};\n\nfunction validateIDs(id: string, providers: SignInProviderType): void {\n  if (id in providers)\n    throw new Error(\n      `\"${id}\" ID is duplicated. IDs of identity providers have to be unique.`,\n    );\n}\n\nexport function getSignInProviders(\n  identityProviders: IdentityProviders,\n): SignInProviderType {\n  const providers = identityProviders.reduce(\n    (acc: SignInProviderType, config) => {\n      if (typeof config === 'string') {\n        validateIDs(config, acc);\n        acc[config] = { components: signInProviders[config], id: config };\n\n        return acc;\n      }\n\n      const { id } = config as SignInProviderConfig;\n      validateIDs(id, acc);\n\n      acc[id] = { components: signInProviders.common, id, config };\n\n      return acc;\n    },\n    {},\n  );\n\n  return providers;\n}\n\nexport const useSignInProviders = (\n  providers: SignInProviderType,\n  onResult: SignInPageProps['onResult'],\n) => {\n  const errorApi = useApi(errorApiRef);\n  const apiHolder = useApiHolder();\n  const [loading, setLoading] = useState(true);\n\n  // This decorates the result with sign out logic from this hook\n  const handleWrappedResult = useCallback(\n    (result: SignInResult) => {\n      onResult({\n        ...result,\n        signOut: async () => {\n          localStorage.removeItem(PROVIDER_STORAGE_KEY);\n          await result.signOut?.();\n        },\n      });\n    },\n    [onResult],\n  );\n\n  // In this effect we check if the user has already selected an existing login\n  // provider, and in that case try to load an existing session for the provider.\n  useLayoutEffect(() => {\n    if (!loading) {\n      return undefined;\n    }\n\n    // We can't use storageApi here, as it might have a dependency on the IdentityApi\n    const selectedProviderId = localStorage.getItem(\n      PROVIDER_STORAGE_KEY,\n    ) as string;\n\n    // No provider selected, let the user pick one\n    if (selectedProviderId === null) {\n      setLoading(false);\n      return undefined;\n    }\n\n    const provider = providers[selectedProviderId];\n    if (!provider) {\n      setLoading(false);\n      return undefined;\n    }\n\n    let didCancel = false;\n\n    provider.components\n      .loader(apiHolder, provider.config?.apiRef!)\n      .then(result => {\n        if (didCancel) {\n          return;\n        }\n        if (result) {\n          handleWrappedResult(result);\n        } else {\n          setLoading(false);\n        }\n      })\n      .catch(error => {\n        if (didCancel) {\n          return;\n        }\n        localStorage.removeItem(PROVIDER_STORAGE_KEY);\n        errorApi.post(error);\n        setLoading(false);\n      });\n\n    return () => {\n      didCancel = true;\n    };\n  }, [loading, errorApi, onResult, apiHolder, providers, handleWrappedResult]);\n\n  // This renders all available sign-in providers\n  const elements = useMemo(\n    () =>\n      Object.keys(providers).map(key => {\n        const provider = providers[key];\n\n        const { Component } = provider.components;\n\n        const handleResult = (result: SignInResult) => {\n          localStorage.setItem(PROVIDER_STORAGE_KEY, provider.id);\n\n          handleWrappedResult(result);\n        };\n\n        return (\n          <Component\n            key={provider.id}\n            config={provider.config!}\n            onResult={handleResult}\n          />\n        );\n      }),\n    [providers, handleWrappedResult],\n  );\n\n  return [loading, elements];\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  configApiRef,\n  SignInPageProps,\n  useApi,\n} from '@backstage/core-plugin-api';\nimport { Button, Grid, Typography } from '@material-ui/core';\nimport React, { useEffect, useState } from 'react';\nimport { Progress } from '../../components/Progress';\nimport { Content } from '../Content/Content';\nimport { ContentHeader } from '../ContentHeader/ContentHeader';\nimport { Header } from '../Header';\nimport { InfoCard } from '../InfoCard';\nimport { Page } from '../Page';\nimport { getSignInProviders, useSignInProviders } from './providers';\nimport { GridItem, useStyles } from './styles';\nimport { IdentityProviders, SignInProviderConfig } from './types';\n\ntype MultiSignInPageProps = SignInPageProps & {\n  providers: IdentityProviders;\n  title?: string;\n  align?: 'center' | 'left';\n};\n\ntype SingleSignInPageProps = SignInPageProps & {\n  provider: SignInProviderConfig;\n  auto?: boolean;\n};\n\nexport type Props = MultiSignInPageProps | SingleSignInPageProps;\n\nexport const MultiSignInPage = ({\n  onResult,\n  providers = [],\n  title,\n  align = 'left',\n}: MultiSignInPageProps) => {\n  const configApi = useApi(configApiRef);\n  const classes = useStyles();\n\n  const signInProviders = getSignInProviders(providers);\n  const [loading, providerElements] = useSignInProviders(\n    signInProviders,\n    onResult,\n  );\n\n  if (loading) {\n    return <Progress />;\n  }\n\n  return (\n    <Page themeId=\"home\">\n      <Header title={configApi.getString('app.title')} />\n      <Content>\n        {title && <ContentHeader title={title} textAlign={align} />}\n        <Grid\n          container\n          justifyContent={align === 'center' ? align : 'flex-start'}\n          spacing={2}\n          component=\"ul\"\n          classes={classes}\n        >\n          {providerElements}\n        </Grid>\n      </Content>\n    </Page>\n  );\n};\n\nexport const SingleSignInPage = ({\n  onResult,\n  provider,\n  auto,\n}: SingleSignInPageProps) => {\n  const classes = useStyles();\n  const authApi = useApi(provider.apiRef);\n  const configApi = useApi(configApiRef);\n\n  const [autoShowPopup, setAutoShowPopup] = useState<boolean>(auto ?? false);\n  // Defaults to true so that an initial check for existing user session is made\n  const [retry, setRetry] = useState<{} | boolean | undefined>(undefined);\n  const [error, setError] = useState<Error>();\n\n  // The SignIn component takes some time to decide whether the user is logged-in or not.\n  // showLoginPage is used to prevent a glitch-like experience where the sign-in page is\n  // displayed for a split second when the user is already logged-in.\n  const [showLoginPage, setShowLoginPage] = useState<boolean>(false);\n\n  useEffect(() => {\n    const login = async () => {\n      try {\n        let identity;\n        // Do an initial check if any logged-in session exists\n        identity = await authApi.getBackstageIdentity({\n          optional: true,\n        });\n\n        // If no session exists, show the sign-in page\n        if (!identity && autoShowPopup) {\n          // Unless auto is set to true, this step should not happen.\n          // When user intentionally clicks the Sign In button, autoShowPopup is set to true\n          setShowLoginPage(true);\n          identity = await authApi.getBackstageIdentity({\n            instantPopup: true,\n          });\n        }\n\n        if (!identity) {\n          setShowLoginPage(true);\n          return;\n        }\n\n        const profile = await authApi.getProfile();\n        onResult({\n          userId: identity!.id,\n          profile: profile!,\n          getIdToken: () => {\n            return authApi\n              .getBackstageIdentity()\n              .then(i => i!.token ?? i!.idToken);\n          },\n          signOut: async () => {\n            await authApi.signOut();\n          },\n        });\n      } catch (err) {\n        // User closed the sign-in modal\n        setError(err);\n        setShowLoginPage(true);\n      }\n    };\n\n    login();\n  }, [onResult, authApi, retry, autoShowPopup]);\n\n  return showLoginPage ? (\n    <Page themeId=\"home\">\n      <Header title={configApi.getString('app.title')} />\n      <Content>\n        <Grid\n          container\n          justifyContent=\"center\"\n          spacing={2}\n          component=\"ul\"\n          classes={classes}\n        >\n          <GridItem>\n            <InfoCard\n              variant=\"fullHeight\"\n              title={provider.title}\n              actions={\n                <Button\n                  color=\"primary\"\n                  variant=\"outlined\"\n                  onClick={() => {\n                    setRetry({});\n                    setAutoShowPopup(true);\n                  }}\n                >\n                  Sign In\n                </Button>\n              }\n            >\n              <Typography variant=\"body1\">{provider.message}</Typography>\n              {error && error.name !== 'PopupRejectedError' && (\n                <Typography variant=\"body1\" color=\"error\">\n                  {error.message}\n                </Typography>\n              )}\n            </InfoCard>\n          </GridItem>\n        </Grid>\n      </Content>\n    </Page>\n  ) : (\n    <Progress />\n  );\n};\n\nexport const SignInPage = (props: Props) => {\n  if ('provider' in props) {\n    return <SingleSignInPage {...props} />;\n  }\n\n  return <MultiSignInPage {...props} />;\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  useState,\n  ReactElement,\n  ReactNode,\n  PropsWithChildren,\n} from 'react';\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  Divider,\n  withStyles,\n  makeStyles,\n  Tabs,\n  Tab,\n  TabProps,\n} from '@material-ui/core';\nimport { BottomLink, BottomLinkProps } from '../BottomLink';\nimport { ErrorBoundary, ErrorBoundaryProps } from '../ErrorBoundary';\n\nconst useTabsStyles = makeStyles(theme => ({\n  root: {\n    padding: theme.spacing(0, 2, 0, 2.5),\n    minHeight: theme.spacing(3),\n  },\n  indicator: {\n    backgroundColor: theme.palette.info.main,\n    height: theme.spacing(0.3),\n  },\n}));\n\nconst BoldHeader = withStyles(theme => ({\n  root: { padding: theme.spacing(2, 2, 2, 2.5), display: 'inline-block' },\n  title: { fontWeight: 700 },\n  subheader: { paddingTop: theme.spacing(1) },\n}))(CardHeader);\n\ntype Props = {\n  /** @deprecated Use errorBoundaryProps instead */\n  slackChannel?: string;\n  errorBoundaryProps?: ErrorBoundaryProps;\n  children?: ReactElement<TabProps>[];\n  onChange?: (event: React.ChangeEvent<{}>, value: number | string) => void;\n  title?: string;\n  value?: number | string;\n  deepLink?: BottomLinkProps;\n};\n\nconst TabbedCard = ({\n  slackChannel,\n  errorBoundaryProps,\n  children,\n  title,\n  deepLink,\n  value,\n  onChange,\n}: PropsWithChildren<Props>) => {\n  const tabsClasses = useTabsStyles();\n  const [selectedIndex, selectIndex] = useState(0);\n\n  const handleChange = onChange\n    ? onChange\n    : (_ev: unknown, newSelectedIndex: number) => selectIndex(newSelectedIndex);\n\n  let selectedTabContent: ReactNode;\n  if (!value) {\n    React.Children.map(children, (child, index) => {\n      if (index === selectedIndex) selectedTabContent = child?.props.children;\n    });\n  } else {\n    React.Children.map(children, child => {\n      if (child?.props.value === value)\n        selectedTabContent = child?.props.children;\n    });\n  }\n\n  const errProps: ErrorBoundaryProps =\n    errorBoundaryProps || (slackChannel ? { slackChannel } : {});\n\n  return (\n    <Card>\n      <ErrorBoundary {...errProps}>\n        {title && <BoldHeader title={title} />}\n        <Tabs\n          selectionFollowsFocus\n          classes={tabsClasses}\n          value={value || selectedIndex}\n          onChange={handleChange}\n        >\n          {children}\n        </Tabs>\n        <Divider />\n        <CardContent>{selectedTabContent}</CardContent>\n        {deepLink && <BottomLink {...deepLink} />}\n      </ErrorBoundary>\n    </Card>\n  );\n};\n\nconst useCardTabStyles = makeStyles(theme => ({\n  root: {\n    minWidth: theme.spacing(6),\n    minHeight: theme.spacing(3),\n    margin: theme.spacing(0, 2, 0, 0),\n    padding: theme.spacing(0.5, 0, 0.5, 0),\n    textTransform: 'none',\n    '&:hover': {\n      opacity: 1,\n      backgroundColor: 'transparent',\n      color: theme.palette.text.primary,\n    },\n  },\n  selected: {\n    fontWeight: 'bold',\n  },\n}));\n\ntype CardTabProps = TabProps & {\n  children: ReactNode;\n};\n\nconst CardTab = ({ children, ...props }: PropsWithChildren<CardTabProps>) => {\n  const classes = useCardTabStyles();\n\n  return <Tab disableRipple classes={classes} {...props} />;\n};\n\nexport { TabbedCard, CardTab };\n"],"names":["useStyles","MaterialAvatar","MaterialLink","RouterLink","MaterialButton","defaultProps","Button","makeStyles","renderDefault","useTheme","Snackbar","IconButton","Close","Link","classnames","ChevronRightIcon","Component","withStyles","createStyles","MuiStepper","MuiStep","Table","Box","Tabs","TabUI","useSubvalueCellStyles","ExpandMore","Select","ChevronLeft","MaterialBreadcrumbs","styles","SearchIcon","loader"],"mappings":"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"}